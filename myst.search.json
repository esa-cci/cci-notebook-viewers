{"version":"1","records":[{"hierarchy":{"lvl1":"Example Viewer Template"},"type":"lvl1","url":"/","position":0},{"hierarchy":{"lvl1":"Example Viewer Template"},"content":"This template repository is intended to allow easy instantiation of an example viewer for jupyterlab notebooks.\nExternal repositories can be added via git submodules to the external_notebooks folder.\nThe github action will traverse available notebooks and try to extract metadata information as well as build them with Jupyterbook (v2 and MYST).\nThe build package is then deployed on github pages.","type":"content","url":"/","position":1},{"hierarchy":{"lvl1":"cci-notebooks"},"type":"lvl1","url":"/external-notebooks/esa-cci/cci-notebooks/readme","position":0},{"hierarchy":{"lvl1":"cci-notebooks"},"content":"This repository is home to notebooks that are tailored for working with CCI Datasets. Each notebook is geared towards a specific ECV (Essential Climate Variable).","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/readme","position":1},{"hierarchy":{"lvl1":"Getting Started with Aerosol CCI Data"},"type":"lvl1","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/aerosol-cci","position":0},{"hierarchy":{"lvl1":"Getting Started with Aerosol CCI Data"},"content":"\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/aerosol-cci","position":1},{"hierarchy":{"lvl1":"Getting Started with Aerosol CCI Data"},"type":"lvl1","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/aerosol-cci#getting-started-with-aerosol-cci-data","position":2},{"hierarchy":{"lvl1":"Getting Started with Aerosol CCI Data"},"content":"\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/aerosol-cci#getting-started-with-aerosol-cci-data","position":3},{"hierarchy":{"lvl1":"Getting Started with Aerosol CCI Data","lvl2":"1. Import Necessary Packages"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/aerosol-cci#id-1-import-necessary-packages","position":4},{"hierarchy":{"lvl1":"Getting Started with Aerosol CCI Data","lvl2":"1. Import Necessary Packages"},"content":"In this section, we import the required Python packages to work with ESA Climate Change Initiative (CCI) data. Most notably, we use the \n\nESA Climate Toolbox which simplifies access, manipulation, and visualization of CCI datasets in Python.\n\nThese packages allow us to:\n\nAccess satellite-based climate data records from ESA.\n\nHandle geospatial and temporal dimensions efficiently.\n\nVisualize data with intuitive plotting tools.\n\nüìö For a broader introduction to the toolbox and how to install it, visit:üîó \n\nESA CCI Climate Toolbox Quick Startüîó \n\nESA Climate Data Toolbox Website\n\nfrom xcube.core.store import new_data_store\nfrom esa_climate_toolbox.core import get_op\nfrom esa_climate_toolbox.core import list_ecv_datasets\nfrom esa_climate_toolbox.core import get_store\nfrom esa_climate_toolbox.core import list_datasets\nfrom esa_climate_toolbox.ops import plot\nimport xarray as xr\nimport matplotlib.pyplot as plt\nimport warnings\nwarnings.filterwarnings(\"ignore\") # Suppressing warnings to keep notebook output clean\n%matplotlib inline\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/aerosol-cci#id-1-import-necessary-packages","position":5},{"hierarchy":{"lvl1":"Getting Started with Aerosol CCI Data","lvl2":"Step 2: Connect to the ESA CCI Data Store"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/aerosol-cci#step-2-connect-to-the-esa-cci-data-store","position":6},{"hierarchy":{"lvl1":"Getting Started with Aerosol CCI Data","lvl2":"Step 2: Connect to the ESA CCI Data Store"},"content":"The ESA Climate Toolbox provides direct access to the ESA Climate Data Store, which hosts harmonized satellite-based climate data records produced under the ESA Climate Change Initiative (CCI).\n\nIn this step, we establish a connection to the data store so we can browse and open datasets. This connection allows us to access data without having to download files manually ‚Äî a convenient way to explore and analyze large geospatial datasets in cloud-friendly formats such as Zarr or Kerchunk.\n\nThe data store includes a wide range of essential climate variables (ECVs), such as aerosols, land surface temperature, sea level, and soil moisture.\n\nüìò Learn more about available datasets:üîó \n\nESA Climate Data Toolbox ‚Äì Quick Start Guide\n\ncci_store = new_data_store(\"esa-cci\")\n# List all available data sets of an ECV\n# list_ecv_datasets(\"Aerosol\")\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/aerosol-cci#step-2-connect-to-the-esa-cci-data-store","position":7},{"hierarchy":{"lvl1":"Getting Started with Aerosol CCI Data","lvl2":"Step 3: Define the Dataset ID"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/aerosol-cci#step-3-define-the-dataset-id","position":8},{"hierarchy":{"lvl1":"Getting Started with Aerosol CCI Data","lvl2":"Step 3: Define the Dataset ID"},"content":"To work with a specific ESA CCI dataset, we need to specify its dataset ID. This unique identifier tells the toolbox which variable and product we want to access.\n\nIn this example, we are using a dataset providing Aerosol Optical Depth (AOD) derived from the AATSR sensor. This variable is important for understanding the effects of aerosols on climate and air quality.\n\nFor other ESA CCI projects (e.g., Land Cover, Soil Moisture, Sea Surface Temperature), simply replace the dataset ID accordingly.\n\nüìò A full list of dataset IDs can be retrieved from the store or found in the \n\nESA CCI Climate Toolbox documentation.\n\ndata_id = 'esacci.AEROSOL.day.L3C.AER_PRODUCTS.AATSR.Envisat.SU.4-3.r1'\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/aerosol-cci#step-3-define-the-dataset-id","position":9},{"hierarchy":{"lvl1":"Getting Started with Aerosol CCI Data","lvl2":"Step 4: Describe Dataset (Check Available Variables and Metadata)"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/aerosol-cci#step-4-describe-dataset-check-available-variables-and-metadata","position":10},{"hierarchy":{"lvl1":"Getting Started with Aerosol CCI Data","lvl2":"Step 4: Describe Dataset (Check Available Variables and Metadata)"},"content":"Before loading the full dataset, it‚Äôs helpful to inspect the metadata to understand its structure. This includes:\n\nAvailable variables (e.g., AOD, uncertainty estimates)\n\nTemporal and spatial coverage\n\nData format and structure\n\nThis step ensures we know what the dataset contains and how to work with it. It also helps confirm that the variable we want to plot or analyze is actually included.\n\nüõ†Ô∏è Tip: You can use the description to verify variable names, dimensions (e.g., lat, lon, time), and time coverage.\n\nüìò More on dataset structure:üîó \n\nESA Climate Toolbox ‚Äì Data Access\n\ncci_store.describe_data(data_id)\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/aerosol-cci#step-4-describe-dataset-check-available-variables-and-metadata","position":11},{"hierarchy":{"lvl1":"Getting Started with Aerosol CCI Data","lvl2":"Step 5: Check Open Parameters for the Dataset"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/aerosol-cci#step-5-check-open-parameters-for-the-dataset","position":12},{"hierarchy":{"lvl1":"Getting Started with Aerosol CCI Data","lvl2":"Step 5: Check Open Parameters for the Dataset"},"content":"Before opening the dataset, we can inspect which parameters are supported by the Zarr opener (e.g., time_range, bbox, variable_names). This step helps ensure that we pass valid arguments when loading data and avoid errors.\n\nThe command below lists all expected input parameters and their allowed values for the selected dataset.\n\ncci_store.get_open_data_params_schema(data_id=data_id, opener_id='dataset:zarr:cciodp')\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/aerosol-cci#step-5-check-open-parameters-for-the-dataset","position":13},{"hierarchy":{"lvl1":"Getting Started with Aerosol CCI Data","lvl2":"Step 6: Define Region, Time Range, and Variables of Interest"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/aerosol-cci#step-6-define-region-time-range-and-variables-of-interest","position":14},{"hierarchy":{"lvl1":"Getting Started with Aerosol CCI Data","lvl2":"Step 6: Define Region, Time Range, and Variables of Interest"},"content":"Before opening the dataset, we define a few key parameters:\n\nTime range: the date(s) we want to load\n\nVariables: which data variable(s) to retrieve\n\n(Optional) Bounding box: spatial region of interest ‚Äî here we skip it to load the global dataset\n\nvariables = ['AOD550_mean']  # Variable to retrieve\nstart_date = '2011-06-21'    # Start and end date (same for a single timestep)\nend_date = '2011-06-21'\n# bbox = (-10.0, 35.0, 30.0, 60.0)  # Optional: restrict to a region like Europe\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/aerosol-cci#step-6-define-region-time-range-and-variables-of-interest","position":15},{"hierarchy":{"lvl1":"Getting Started with Aerosol CCI Data","lvl2":"Step 7: Open the Dataset"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/aerosol-cci#step-7-open-the-dataset","position":16},{"hierarchy":{"lvl1":"Getting Started with Aerosol CCI Data","lvl2":"Step 7: Open the Dataset"},"content":"Now we open the dataset using the selected parameters.The ESA Climate Toolbox will download only the necessary data (e.g., variable and time range).\nYou can always adjust the time range or variables to explore different slices of the dataset.\n\naerosol_ds = cci_store.open_data(\n    data_id=data_id,\n    variable_names=variables,\n    time_range=[start_date, end_date]\n    # bbox=bbox  # Uncomment if regional selection is needed\n)\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/aerosol-cci#step-7-open-the-dataset","position":17},{"hierarchy":{"lvl1":"Getting Started with Aerosol CCI Data","lvl2":"Step 8: Display Dataset Structure"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/aerosol-cci#step-8-display-dataset-structure","position":18},{"hierarchy":{"lvl1":"Getting Started with Aerosol CCI Data","lvl2":"Step 8: Display Dataset Structure"},"content":"We print a summary of the opened dataset to inspect its structure, dimensions, variables, and metadata.This helps verify that the data was loaded correctly and shows what is available for analysis and visualization.\nThis step is useful to understand what the dataset contains before working with it further.\n\nprint(\"\\nOpened Dataset:\\n\", aerosol_ds)\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/aerosol-cci#step-8-display-dataset-structure","position":19},{"hierarchy":{"lvl1":"Getting Started with Aerosol CCI Data","lvl2":"Step 9: Visualize Results"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/aerosol-cci#step-9-visualize-results","position":20},{"hierarchy":{"lvl1":"Getting Started with Aerosol CCI Data","lvl2":"Step 9: Visualize Results"},"content":"We now create a simple map plot of the selected variable.This allows us to explore the spatial patterns of the data ‚Äî in this case, the Aerosol Optical Depth (AOD) for the selected day.\nFor more interactive and advanced visualizations, check out the \n\nESA Climate Toolbox or the \n\nToolbox documentation.\n\nimport matplotlib.pyplot as plt\n\n# Select the variable and the first (and only) time step\naod = aerosol_ds[\"AOD550_mean\"].isel(time=0)\n\n# Plot the data using xarray‚Äôs built-in .plot() with global map layout\nplt.figure(figsize=(10, 5))\naod.plot(\n    cmap=\"viridis\",\n    robust=True,\n    cbar_kwargs={\"label\": \"Aerosol Optical Depth (550nm)\"}\n)\nplt.title(\"Global AOD at 550nm on 21 June 2011\")\nplt.xlabel(\"Longitude\")\nplt.ylabel(\"Latitude\")\nplt.show()","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/aerosol-cci#step-9-visualize-results","position":21},{"hierarchy":{"lvl1":"Getting Started with Biomass CCI Data"},"type":"lvl1","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/biomass-cci","position":0},{"hierarchy":{"lvl1":"Getting Started with Biomass CCI Data"},"content":"\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/biomass-cci","position":1},{"hierarchy":{"lvl1":"Getting Started with Biomass CCI Data"},"type":"lvl1","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/biomass-cci#getting-started-with-biomass-cci-data","position":2},{"hierarchy":{"lvl1":"Getting Started with Biomass CCI Data"},"content":"\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/biomass-cci#getting-started-with-biomass-cci-data","position":3},{"hierarchy":{"lvl1":"Getting Started with Biomass CCI Data","lvl2":"1. Import Necessary Packages"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/biomass-cci#id-1-import-necessary-packages","position":4},{"hierarchy":{"lvl1":"Getting Started with Biomass CCI Data","lvl2":"1. Import Necessary Packages"},"content":"In this section, we import the required Python packages to work with ESA Climate Change Initiative (CCI) data. Most notably, we use the \n\nESA Climate Toolbox which simplifies access, manipulation, and visualization of CCI datasets in Python.\n\nThese packages allow us to:\n\nAccess satellite-based climate data records from ESA.\n\nHandle geospatial and temporal dimensions efficiently.\n\nVisualize data with intuitive plotting tools.\n\nüìö For a broader introduction to the toolbox and how to install it, visit:üîó \n\nESA CCI Climate Toolbox Quick Startüîó \n\nESA Climate Data Toolbox Website\n\nfrom xcube.core.store import new_data_store\nfrom esa_climate_toolbox.core import get_op\nfrom esa_climate_toolbox.core import list_ecv_datasets\nfrom esa_climate_toolbox.core import get_store\nfrom esa_climate_toolbox.core import list_datasets\nfrom esa_climate_toolbox.ops import plot\nimport xarray as xr\nimport matplotlib.pyplot as plt\nimport warnings\nwarnings.filterwarnings(\"ignore\") # Suppressing warnings to keep notebook output clean\n%matplotlib inline\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/biomass-cci#id-1-import-necessary-packages","position":5},{"hierarchy":{"lvl1":"Getting Started with Biomass CCI Data","lvl2":"Step 2: Connect to the ESA CCI Data Store"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/biomass-cci#step-2-connect-to-the-esa-cci-data-store","position":6},{"hierarchy":{"lvl1":"Getting Started with Biomass CCI Data","lvl2":"Step 2: Connect to the ESA CCI Data Store"},"content":"The ESA Climate Toolbox provides direct access to the ESA Climate Data Store, which hosts harmonized satellite-based climate data records produced under the ESA Climate Change Initiative (CCI).\n\nIn this step, we establish a connection to the data store so we can browse and open datasets. This connection allows us to access data without having to download files manually ‚Äî a convenient way to explore and analyze large geospatial datasets in cloud-friendly formats such as Zarr or Kerchunk.\n\nThe data store includes a wide range of essential climate variables (ECVs), such as aerosols, land surface temperature, sea level, and soil moisture.\n\nüìò Learn more about available datasets:üîó \n\nESA Climate Data Toolbox ‚Äì Quick Start Guide\n\ncci_store = new_data_store(\"esa-cci\")\n# List all available data sets of an ECV\n# list_ecv_datasets(\"Biomass\")\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/biomass-cci#step-2-connect-to-the-esa-cci-data-store","position":7},{"hierarchy":{"lvl1":"Getting Started with Biomass CCI Data","lvl2":"Step 3: Define the Dataset ID"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/biomass-cci#step-3-define-the-dataset-id","position":8},{"hierarchy":{"lvl1":"Getting Started with Biomass CCI Data","lvl2":"Step 3: Define the Dataset ID"},"content":"To work with a specific ESA CCI dataset, we need to specify its dataset ID. This unique identifier tells the toolbox which variable and product we want to access.\n\nIn this example, we are using a dataset that provides Above-Ground Biomass (AGB), derived from a combination of multiple sensors and platforms. AGB is a key Essential Climate Variable (ECV) used to estimate the amount of carbon stored in vegetation, supporting studies related to the global carbon cycle, deforestation, and land use change.\n\nFor other ESA CCI projects (e.g., Land Cover, Soil Moisture, Sea Surface Temperature), simply replace the dataset ID accordingly.\n\nüìò A full list of dataset IDs can be retrieved from the store or found in the \n\nESA CCI Climate Toolbox documentation.\n\ndata_id = 'esacci.BIOMASS.yr.L4.AGB.multi-sensor.multi-platform.MERGED.6-0.10000m'\n\nThis product provides annual AGB estimates at 10000m resolution, covering the period from 2007 to 2022.\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/biomass-cci#step-3-define-the-dataset-id","position":9},{"hierarchy":{"lvl1":"Getting Started with Biomass CCI Data","lvl2":"Step 4: Describe Dataset (Check Available Variables and Metadata)"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/biomass-cci#step-4-describe-dataset-check-available-variables-and-metadata","position":10},{"hierarchy":{"lvl1":"Getting Started with Biomass CCI Data","lvl2":"Step 4: Describe Dataset (Check Available Variables and Metadata)"},"content":"Before loading the full dataset, it‚Äôs helpful to inspect the metadata to understand its structure. This includes:\n\nAvailable variables (e.g., agb, uncertainty estimates)\n\nTemporal and spatial coverage\n\nData format and structure\n\nThis step ensures we know what the dataset contains and how to work with it. It also helps confirm that the variable we want to plot or analyze is actually included.\n\nüõ†Ô∏è Tip: You can use the description to verify variable names, dimensions (e.g., lat, lon, time), and time coverage.\n\nüìò More on dataset structure:üîó \n\nESA Climate Toolbox ‚Äì Data Access\n\ncci_store.describe_data(data_id)\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/biomass-cci#step-4-describe-dataset-check-available-variables-and-metadata","position":11},{"hierarchy":{"lvl1":"Getting Started with Biomass CCI Data","lvl2":"Step 5: Check Open Parameters for the Dataset"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/biomass-cci#step-5-check-open-parameters-for-the-dataset","position":12},{"hierarchy":{"lvl1":"Getting Started with Biomass CCI Data","lvl2":"Step 5: Check Open Parameters for the Dataset"},"content":"Before opening the dataset, we can inspect which parameters are supported by the Zarr opener (e.g., time_range, bbox, variable_names). This step helps ensure that we pass valid arguments when loading data and avoid errors.\n\nThe command below lists all expected input parameters and their allowed values for the selected dataset.\n\ncci_store.get_open_data_params_schema(data_id=data_id, opener_id='dataset:zarr:cciodp')\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/biomass-cci#step-5-check-open-parameters-for-the-dataset","position":13},{"hierarchy":{"lvl1":"Getting Started with Biomass CCI Data","lvl2":"Step 6: Define Region, Time Range, and Variables of Interest"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/biomass-cci#step-6-define-region-time-range-and-variables-of-interest","position":14},{"hierarchy":{"lvl1":"Getting Started with Biomass CCI Data","lvl2":"Step 6: Define Region, Time Range, and Variables of Interest"},"content":"Before opening the dataset, we define a few key parameters:\n\nTime range: the date(s) we want to load\n\nVariables: which data variable(s) to retrieve\n\n(Optional) Bounding box: spatial region of interest ‚Äî here we skip it to load the global dataset\n\nvariables = ['agb']  # Variable to retrieve\nstart_date = '2021-01-01'    # Start and end date (same for a single timestep)\nend_date = '2021-12-31'\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/biomass-cci#step-6-define-region-time-range-and-variables-of-interest","position":15},{"hierarchy":{"lvl1":"Getting Started with Biomass CCI Data","lvl2":"Step 7: Open the Dataset"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/biomass-cci#step-7-open-the-dataset","position":16},{"hierarchy":{"lvl1":"Getting Started with Biomass CCI Data","lvl2":"Step 7: Open the Dataset"},"content":"Now we open the dataset using the selected parameters.The ESA Climate Toolbox will download only the necessary data (e.g., variable and time range).\nYou can always adjust the time range or variables to explore different slices of the dataset.\n\nbiomass_ds = cci_store.open_data(\n    data_id=data_id,\n    variable_names=variables,\n    time_range=[start_date, end_date]\n)\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/biomass-cci#step-7-open-the-dataset","position":17},{"hierarchy":{"lvl1":"Getting Started with Biomass CCI Data","lvl2":"Step 8: Display Dataset Structure"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/biomass-cci#step-8-display-dataset-structure","position":18},{"hierarchy":{"lvl1":"Getting Started with Biomass CCI Data","lvl2":"Step 8: Display Dataset Structure"},"content":"We print a summary of the opened dataset to inspect its structure, dimensions, variables, and metadata.This helps verify that the data was loaded correctly and shows what is available for analysis and visualization.\nThis step is useful to understand what the dataset contains before working with it further.\n\nprint(\"\\nOpened Dataset:\\n\", biomass_ds)\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/biomass-cci#step-8-display-dataset-structure","position":19},{"hierarchy":{"lvl1":"Getting Started with Biomass CCI Data","lvl2":"Step 9: Visualize Results"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/biomass-cci#step-9-visualize-results","position":20},{"hierarchy":{"lvl1":"Getting Started with Biomass CCI Data","lvl2":"Step 9: Visualize Results"},"content":"We now create a simple map plot of the selected variable.This allows us to explore the spatial patterns of the data ‚Äî in this case, the above ground biomass (agb) for the selected day.\nFor more interactive and advanced visualisations, check out the \n\nESA Climate Toolbox or the \n\nToolbox documentation.\n\nimport matplotlib.pyplot as plt\nimport cartopy.crs as ccrs\nimport numpy as np\n\n# Choose date to plot\ntimestep = '2021-01-01'\n\n# Load and extract the data\nbiomass = biomass_ds[\"agb\"].sel(time = timestep, method = 'nearest').load()\nlat = biomass_ds[\"lat\"]\nlon = biomass_ds[\"lon\"]\ntime_str = biomass_ds['time'].sel(time = timestep, method = 'nearest').dt.strftime('%B %Y').item()\n\n# Plot\nfig = plt.figure(figsize=(12, 6))\nax = plt.axes(projection=ccrs.PlateCarree())\n\n# Use logarithmic scaling for better contrast, clip zero and nan\nmasked_biomass = np.ma.masked_where(biomass <= 0, biomass)\nmesh = ax.pcolormesh(\n    lon, lat, masked_biomass,\n    cmap=\"YlGn\", shading=\"auto\",\n    norm=plt.matplotlib.colors.LogNorm(vmin=1, vmax=np.nanpercentile(biomass, 99))\n)\n\nax.coastlines()\nplt.title(\"Above Ground Biomass (Mg/ha) - \"+ time_str)\nplt.colorbar(mesh, ax=ax, label=\"AGB (Mg/ha)\")\nplt.tight_layout()\nplt.show()","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/biomass-cci#step-9-visualize-results","position":21},{"hierarchy":{"lvl1":"Getting Started with Cloud CCI Data"},"type":"lvl1","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/cloud-cci","position":0},{"hierarchy":{"lvl1":"Getting Started with Cloud CCI Data"},"content":"\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/cloud-cci","position":1},{"hierarchy":{"lvl1":"Getting Started with Cloud CCI Data"},"type":"lvl1","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/cloud-cci#getting-started-with-cloud-cci-data","position":2},{"hierarchy":{"lvl1":"Getting Started with Cloud CCI Data"},"content":"\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/cloud-cci#getting-started-with-cloud-cci-data","position":3},{"hierarchy":{"lvl1":"Getting Started with Cloud CCI Data","lvl2":"1. Import Necessary Packages"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/cloud-cci#id-1-import-necessary-packages","position":4},{"hierarchy":{"lvl1":"Getting Started with Cloud CCI Data","lvl2":"1. Import Necessary Packages"},"content":"In this section, we import the required Python packages to work with ESA Climate Change Initiative (CCI) data. Most notably, we use the \n\nESA Climate Toolbox which simplifies access, manipulation, and visualization of CCI datasets in Python.\n\nThese packages allow us to:\n\nAccess satellite-based climate data records from ESA.\n\nHandle geospatial and temporal dimensions efficiently.\n\nVisualize data with intuitive plotting tools.\n\nüìö For a broader introduction to the toolbox and how to install it, visit:üîó \n\nESA CCI Climate Toolbox Quick Startüîó \n\nESA Climate Data Toolbox Website\n\nfrom xcube.core.store import new_data_store\nfrom esa_climate_toolbox.core import get_op\nfrom esa_climate_toolbox.core import list_ecv_datasets\nfrom esa_climate_toolbox.core import get_store\nfrom esa_climate_toolbox.core import list_datasets\nfrom esa_climate_toolbox.ops import plot\nimport xarray as xr\nimport matplotlib.pyplot as plt\nimport warnings\nwarnings.filterwarnings(\"ignore\") # Suppressing warnings to keep notebook output clean\n%matplotlib inline\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/cloud-cci#id-1-import-necessary-packages","position":5},{"hierarchy":{"lvl1":"Getting Started with Cloud CCI Data","lvl2":"Step 2: Connect to the ESA CCI Data Store"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/cloud-cci#step-2-connect-to-the-esa-cci-data-store","position":6},{"hierarchy":{"lvl1":"Getting Started with Cloud CCI Data","lvl2":"Step 2: Connect to the ESA CCI Data Store"},"content":"The ESA Climate Toolbox provides direct access to the ESA Climate Data Store, which hosts harmonized satellite-based climate data records produced under the ESA Climate Change Initiative (CCI).\n\nIn this step, we establish a connection to the data store so we can browse and open datasets. This connection allows us to access data without having to download files manually ‚Äî a convenient way to explore and analyze large geospatial datasets in cloud-friendly formats such as Zarr or Kerchunk.\n\nThe data store includes a wide range of essential climate variables (ECVs), such as aerosols, land surface temperature, sea level, and soil moisture.\n\nüìò Learn more about available datasets:üîó \n\nESA Climate Data Toolbox ‚Äì Quick Start Guide\n\ncci_store = new_data_store(\"esa-cci\")\n# List all available data sets of an ECV\nlist_ecv_datasets(\"Cloud\")\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/cloud-cci#step-2-connect-to-the-esa-cci-data-store","position":7},{"hierarchy":{"lvl1":"Getting Started with Cloud CCI Data","lvl2":"Step 3: Define the Dataset ID"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/cloud-cci#step-3-define-the-dataset-id","position":8},{"hierarchy":{"lvl1":"Getting Started with Cloud CCI Data","lvl2":"Step 3: Define the Dataset ID"},"content":"To work with a specific ESA CCI dataset, we need to specify its dataset ID. This unique identifier tells the toolbox which variable and product we want to access.\n\nIn this example, we are using a dataset from the Cloud CCI project that provides monthly Level 3 cloud property products, derived from multiple satellite sensors. These products include key cloud variables such as cloud fraction (cfc), which is important for understanding cloud coverage, its variability, and its impact on Earth‚Äôs radiation budget and climate.\n\nWe will use the following dataset ID:\n\ndata_id = 'esacci.CLOUD.mon.L3C.CLD_PRODUCTS.multi-sensor.multi-platform.AVHRR-PM.3-0.r1'\n\nThis product provides monthly cloud properties on a regular latitude‚Äìlongitude grid at a resolution of 0.5¬∞.\nüìò A full list of dataset IDs can be retrieved from the store or found in the \n\nESA CCI Climate Toolbox documentation.\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/cloud-cci#step-3-define-the-dataset-id","position":9},{"hierarchy":{"lvl1":"Getting Started with Cloud CCI Data","lvl2":"Step 4: Describe Dataset (Check Available Variables and Metadata)"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/cloud-cci#step-4-describe-dataset-check-available-variables-and-metadata","position":10},{"hierarchy":{"lvl1":"Getting Started with Cloud CCI Data","lvl2":"Step 4: Describe Dataset (Check Available Variables and Metadata)"},"content":"Before loading the full dataset, it‚Äôs helpful to inspect the metadata to understand its structure. This includes:\n\nAvailable variables (e.g., cfc, uncertainty estimates)\n\nTemporal and spatial coverage\n\nData format and structure\n\nThis step ensures we know what the dataset contains and how to work with it. It also helps confirm that the variable we want to plot or analyze is actually included.\n\nüõ†Ô∏è Tip: You can use the description to verify variable names, dimensions (e.g., lat, lon, time), and time coverage.\n\nüìò More on dataset structure:üîó \n\nESA Climate Toolbox ‚Äì Data Access\n\ncci_store.describe_data(data_id)\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/cloud-cci#step-4-describe-dataset-check-available-variables-and-metadata","position":11},{"hierarchy":{"lvl1":"Getting Started with Cloud CCI Data","lvl2":"Step 5: Check Open Parameters for the Dataset"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/cloud-cci#step-5-check-open-parameters-for-the-dataset","position":12},{"hierarchy":{"lvl1":"Getting Started with Cloud CCI Data","lvl2":"Step 5: Check Open Parameters for the Dataset"},"content":"Before opening the dataset, we can inspect which parameters are supported by the Zarr opener (e.g., time_range, bbox, variable_names). This step helps ensure that we pass valid arguments when loading data and avoid errors.\n\nThe command below lists all expected input parameters and their allowed values for the selected dataset.\n\ncci_store.get_open_data_params_schema(data_id=data_id, opener_id='dataset:zarr:cciodp')\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/cloud-cci#step-5-check-open-parameters-for-the-dataset","position":13},{"hierarchy":{"lvl1":"Getting Started with Cloud CCI Data","lvl2":"Step 6: Define Region, Time Range, and Variables of Interest"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/cloud-cci#step-6-define-region-time-range-and-variables-of-interest","position":14},{"hierarchy":{"lvl1":"Getting Started with Cloud CCI Data","lvl2":"Step 6: Define Region, Time Range, and Variables of Interest"},"content":"Before opening the dataset, we define a few key parameters:\n\nTime range: the date(s) we want to load\n\nVariables: which data variable(s) to retrieve\n\n(Optional) Bounding box: spatial region of interest ‚Äî here we skip it to load the global dataset\n\nvariables = ['cfc']  # Variable to retrieve\nstart_date = '2016-06-21'    # Start and end date (same for a single timestep)\nend_date = '2016-06-21'\n# bbox = (-10.0, 35.0, 30.0, 60.0)  # Optional: restrict to a region like Europe\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/cloud-cci#step-6-define-region-time-range-and-variables-of-interest","position":15},{"hierarchy":{"lvl1":"Getting Started with Cloud CCI Data","lvl2":"Step 7: Open the Dataset"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/cloud-cci#step-7-open-the-dataset","position":16},{"hierarchy":{"lvl1":"Getting Started with Cloud CCI Data","lvl2":"Step 7: Open the Dataset"},"content":"Now we open the dataset using the selected parameters.The ESA Climate Toolbox will download only the necessary data (e.g., variable and time range).\nYou can always adjust the time range or variables to explore different slices of the dataset.\n\ncloud_ds = cci_store.open_data(\n    data_id=data_id,\n    variable_names=variables,\n    time_range=[start_date, end_date]\n    # bbox=bbox  # Uncomment if regional selection is needed\n)\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/cloud-cci#step-7-open-the-dataset","position":17},{"hierarchy":{"lvl1":"Getting Started with Cloud CCI Data","lvl2":"Step 8: Display Dataset Structure"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/cloud-cci#step-8-display-dataset-structure","position":18},{"hierarchy":{"lvl1":"Getting Started with Cloud CCI Data","lvl2":"Step 8: Display Dataset Structure"},"content":"We print a summary of the opened dataset to inspect its structure, dimensions, variables, and metadata.This helps verify that the data was loaded correctly and shows what is available for analysis and visualization.\nThis step is useful to understand what the dataset contains before working with it further.\n\nprint(\"\\nOpened Dataset:\\n\", cloud_ds)\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/cloud-cci#step-8-display-dataset-structure","position":19},{"hierarchy":{"lvl1":"Getting Started with Cloud CCI Data","lvl2":"Step 9: Visualize Results"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/cloud-cci#step-9-visualize-results","position":20},{"hierarchy":{"lvl1":"Getting Started with Cloud CCI Data","lvl2":"Step 9: Visualize Results"},"content":"We now create a simple map plot of the selected variable.This allows us to explore the spatial patterns of the data ‚Äî in this case, the Cloud Fraction (CFC) for the selected day.\nFor more interactive and advanced visualizations, check out the \n\nESA Climate Toolbox or the \n\nToolbox documentation.\n\nimport matplotlib.pyplot as plt\n\n# Select the cloud fraction data at the available time (e.g. first and only time slice)\ncfc = cloud_ds[\"cfc\"].isel(time=0)\ntime_str = cloud_ds['time'].isel(time=0).dt.strftime('%B %Y').item()\n\n# Plot\nplt.figure(figsize=(10, 5))\ncfc.plot(\n    cmap=\"Blues_r\",  # reverse blues\n    cbar_kwargs={\"label\": \"Cloud Fraction (0-1)\"}\n)\nplt.title(\"Cloud Fraction ‚Äì \" + time_str + \" (Cloud CCI)\")\nplt.xlabel(\"Longitude\")\nplt.ylabel(\"Latitude\")\nplt.tight_layout()\nplt.show()","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/cloud-cci#step-9-visualize-results","position":21},{"hierarchy":{"lvl1":"Getting Started with Fire CCI Data"},"type":"lvl1","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/fire-cci","position":0},{"hierarchy":{"lvl1":"Getting Started with Fire CCI Data"},"content":"\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/fire-cci","position":1},{"hierarchy":{"lvl1":"Getting Started with Fire CCI Data"},"type":"lvl1","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/fire-cci#getting-started-with-fire-cci-data","position":2},{"hierarchy":{"lvl1":"Getting Started with Fire CCI Data"},"content":"\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/fire-cci#getting-started-with-fire-cci-data","position":3},{"hierarchy":{"lvl1":"Getting Started with Fire CCI Data","lvl2":"1. Import Necessary Packages"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/fire-cci#id-1-import-necessary-packages","position":4},{"hierarchy":{"lvl1":"Getting Started with Fire CCI Data","lvl2":"1. Import Necessary Packages"},"content":"In this section, we import the required Python packages to work with ESA Climate Change Initiative (CCI) data. Most notably, we use the \n\nESA Climate Toolbox which simplifies access, manipulation, and visualization of CCI datasets in Python.\n\nThese packages allow us to:\n\nAccess satellite-based climate data records from ESA.\n\nHandle geospatial and temporal dimensions efficiently.\n\nVisualize data with intuitive plotting tools.\n\nüìö For a broader introduction to the toolbox and how to install it, visit:üîó \n\nESA CCI Climate Toolbox Quick Startüîó \n\nESA Climate Data Toolbox Website\n\nfrom xcube.core.store import new_data_store\nfrom esa_climate_toolbox.core import get_op\nfrom esa_climate_toolbox.core import list_ecv_datasets\nfrom esa_climate_toolbox.core import get_store\nfrom esa_climate_toolbox.core import list_datasets\nfrom esa_climate_toolbox.ops import plot\nimport xarray as xr\nimport matplotlib.pyplot as plt\nimport warnings\nwarnings.filterwarnings(\"ignore\") # Suppressing warnings to keep notebook output clean\n%matplotlib inline\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/fire-cci#id-1-import-necessary-packages","position":5},{"hierarchy":{"lvl1":"Getting Started with Fire CCI Data","lvl2":"Step 2: Connect to the ESA CCI Data Store"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/fire-cci#step-2-connect-to-the-esa-cci-data-store","position":6},{"hierarchy":{"lvl1":"Getting Started with Fire CCI Data","lvl2":"Step 2: Connect to the ESA CCI Data Store"},"content":"The ESA Climate Toolbox provides direct access to the ESA Climate Data Store, which hosts harmonized satellite-based climate data records produced under the ESA Climate Change Initiative (CCI).\n\nIn this step, we establish a connection to the data store so we can browse and open datasets. This connection allows us to access data without having to download files manually ‚Äî a convenient way to explore and analyze large geospatial datasets in cloud-friendly formats such as Zarr or Kerchunk.\n\nThe data store includes a wide range of essential climate variables (ECVs), such as aerosols, land surface temperature, sea level, and soil moisture.\n\nüìò Learn more about available datasets:üîó \n\nESA Climate Data Toolbox ‚Äì Quick Start Guide\n\ncci_store = new_data_store(\"esa-cci\")\n# List all available data sets of an ECV\n# list_ecv_datasets(\"Fire\")\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/fire-cci#step-2-connect-to-the-esa-cci-data-store","position":7},{"hierarchy":{"lvl1":"Getting Started with Fire CCI Data","lvl2":"Step 3: Define the Dataset ID"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/fire-cci#step-3-define-the-dataset-id","position":8},{"hierarchy":{"lvl1":"Getting Started with Fire CCI Data","lvl2":"Step 3: Define the Dataset ID"},"content":"To work with a specific ESA CCI dataset, we need to specify its dataset ID. This unique identifier tells the toolbox which variable and product we want to access.\n\nIn this example, we are using a dataset from the Fire CCI project that provides monthly Level 4 burned area products, derived from MODIS Terra satellite observations. These products contain information about the amount of land that burned during a given time period, which is critical for assessing fire regimes, greenhouse gas emissions, and ecosystem impacts.\n\nThe dataset variable we are using is burned_area, expressed as the fraction of area burned per grid cell (in m^{2}). This information helps identify fire-affected regions and monitor changes over time.\n\nüìò A full list of dataset IDs can be retrieved from the store or found in the \n\nESA CCI Climate Toolbox documentation.\n\nWe will use the following dataset ID:\n\ndata_id = 'esacci.FIRE.mon.L4.BA.MODIS.Terra.MODIS_TERRA.v5-1.grid'\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/fire-cci#step-3-define-the-dataset-id","position":9},{"hierarchy":{"lvl1":"Getting Started with Fire CCI Data","lvl2":"Step 4: Describe Dataset (Check Available Variables and Metadata)"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/fire-cci#step-4-describe-dataset-check-available-variables-and-metadata","position":10},{"hierarchy":{"lvl1":"Getting Started with Fire CCI Data","lvl2":"Step 4: Describe Dataset (Check Available Variables and Metadata)"},"content":"Before loading the full dataset, it‚Äôs helpful to inspect the metadata to understand its structure. This includes:\n\nAvailable variables (e.g., burned_area, uncertainty estimates)\n\nTemporal and spatial coverage\n\nData format and structure\n\nThis step ensures we know what the dataset contains and how to work with it. It also helps confirm that the variable we want to plot or analyse is actually included.\n\nüõ†Ô∏è Tip: You can use the description to verify variable names, dimensions (e.g., lat, lon, time), and time coverage.\n\nüìò More on dataset structure:üîó \n\nESA Climate Toolbox ‚Äì Data Access\n\ncci_store.describe_data(data_id)\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/fire-cci#step-4-describe-dataset-check-available-variables-and-metadata","position":11},{"hierarchy":{"lvl1":"Getting Started with Fire CCI Data","lvl2":"Step 5: Check Open Parameters for the Dataset"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/fire-cci#step-5-check-open-parameters-for-the-dataset","position":12},{"hierarchy":{"lvl1":"Getting Started with Fire CCI Data","lvl2":"Step 5: Check Open Parameters for the Dataset"},"content":"Before opening the dataset, we can inspect which parameters are supported by the Zarr opener (e.g., time_range, bbox, variable_names). This step helps ensure that we pass valid arguments when loading data and avoid errors.\n\nThe command below lists all expected input parameters and their allowed values for the selected dataset.\n\ncci_store.get_open_data_params_schema(data_id=data_id, opener_id='dataset:zarr:cciodp')\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/fire-cci#step-5-check-open-parameters-for-the-dataset","position":13},{"hierarchy":{"lvl1":"Getting Started with Fire CCI Data","lvl2":"Step 6: Define Region, Time Range, and Variables of Interest"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/fire-cci#step-6-define-region-time-range-and-variables-of-interest","position":14},{"hierarchy":{"lvl1":"Getting Started with Fire CCI Data","lvl2":"Step 6: Define Region, Time Range, and Variables of Interest"},"content":"Before opening the dataset, we define a few key parameters:\n\nTime range: the date(s) we want to load\n\nVariables: which data variable(s) to retrieve\n\n(Optional) Bounding box: spatial region of interest ‚Äî here we skip it to load the global dataset\n\nvariables = ['burned_area']  # Variable to retrieve\nstart_date = '2022-06-01'    # Start and end date (same for a single timestep)\nend_date = '2022-06-01'\n# bbox = (-10.0, 35.0, 30.0, 60.0)  # Optional: restrict to a region like Europe\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/fire-cci#step-6-define-region-time-range-and-variables-of-interest","position":15},{"hierarchy":{"lvl1":"Getting Started with Fire CCI Data","lvl2":"Step 7: Open the Dataset"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/fire-cci#step-7-open-the-dataset","position":16},{"hierarchy":{"lvl1":"Getting Started with Fire CCI Data","lvl2":"Step 7: Open the Dataset"},"content":"Now we open the dataset using the selected parameters.The ESA Climate Toolbox will download only the necessary data (e.g., variable and time range).\nYou can always adjust the time range or variables to explore different slices of the dataset.\n\nfire_ds = cci_store.open_data(\n    data_id=data_id,\n    variable_names=variables,\n    time_range=[start_date, end_date]\n    # bbox=bbox  # Uncomment if regional selection is needed\n)\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/fire-cci#step-7-open-the-dataset","position":17},{"hierarchy":{"lvl1":"Getting Started with Fire CCI Data","lvl2":"Step 8: Display Dataset Structure"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/fire-cci#step-8-display-dataset-structure","position":18},{"hierarchy":{"lvl1":"Getting Started with Fire CCI Data","lvl2":"Step 8: Display Dataset Structure"},"content":"We print a summary of the opened dataset to inspect its structure, dimensions, variables, and metadata.This helps verify that the data was loaded correctly and shows what is available for analysis and visualization.\nThis step is useful to understand what the dataset contains before working with it further.\n\nprint(\"\\nOpened Dataset:\\n\", fire_ds)\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/fire-cci#step-8-display-dataset-structure","position":19},{"hierarchy":{"lvl1":"Getting Started with Fire CCI Data","lvl2":"Step 9: Visualize Results"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/fire-cci#step-9-visualize-results","position":20},{"hierarchy":{"lvl1":"Getting Started with Fire CCI Data","lvl2":"Step 9: Visualize Results"},"content":"We now create a simple map plot of the selected variable.This allows us to explore the spatial patterns of the data ‚Äî in this case, the burned areas for the selected day.\nFor more interactive and advanced visualisations, check out the \n\nESA Climate Toolbox or the \n\nToolbox documentation.\n\nimport matplotlib.pyplot as plt\nimport cartopy.crs as ccrs\nimport cartopy.feature as cfeature\n\n# Select variable \nburned_area_data = fire_ds[\"burned_area\"].isel(time=0) \n\nplt.figure(figsize=(12, 6))\nax = plt.axes(projection=ccrs.PlateCarree())\n\nburned_area_data.plot(\n    ax=ax,\n    transform=ccrs.PlateCarree(),\n    cmap=\"YlOrRd\",\n    vmin=0,\n    vmax=1e8,  # Adjust as needed\n    cbar_kwargs={\"label\": \"Burned Area (m$^{2}$)\"}\n)\n\nax.set_title(\"Burned Area ‚Äì June 2022 (Fire CCI)\")\nax.coastlines()\nax.add_feature(cfeature.BORDERS, linewidth=0.5)\nax.gridlines(draw_labels=True)\n\nplt.tight_layout()\nplt.show()","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/fire-cci#step-9-visualize-results","position":21},{"hierarchy":{"lvl1":"Getting Started with Greenhouse Gases CCI Data"},"type":"lvl1","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/ghg-cci","position":0},{"hierarchy":{"lvl1":"Getting Started with Greenhouse Gases CCI Data"},"content":"\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/ghg-cci","position":1},{"hierarchy":{"lvl1":"Getting Started with Greenhouse Gases CCI Data"},"type":"lvl1","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/ghg-cci#getting-started-with-greenhouse-gases-cci-data","position":2},{"hierarchy":{"lvl1":"Getting Started with Greenhouse Gases CCI Data"},"content":"\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/ghg-cci#getting-started-with-greenhouse-gases-cci-data","position":3},{"hierarchy":{"lvl1":"Getting Started with Greenhouse Gases CCI Data","lvl2":"1. Import Necessary Packages"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/ghg-cci#id-1-import-necessary-packages","position":4},{"hierarchy":{"lvl1":"Getting Started with Greenhouse Gases CCI Data","lvl2":"1. Import Necessary Packages"},"content":"In this section, we import the required Python packages to work with ESA Climate Change Initiative (CCI) data. Most notably, we use the \n\nESA Climate Toolbox which simplifies access, manipulation, and visualization of CCI datasets in Python.\n\nThese packages allow us to:\n\nAccess satellite-based climate data records from ESA.\n\nHandle geospatial and temporal dimensions efficiently.\n\nVisualize data with intuitive plotting tools.\n\nüìö For a broader introduction to the toolbox and how to install it, visit:üîó \n\nESA CCI Climate Toolbox Quick Startüîó \n\nESA Climate Data Toolbox Website\n\nfrom xcube.core.store import new_data_store\nfrom esa_climate_toolbox.core import get_op\nfrom esa_climate_toolbox.core import list_ecv_datasets\nfrom esa_climate_toolbox.core import get_store\nfrom esa_climate_toolbox.core import list_datasets\nfrom esa_climate_toolbox.ops import plot\nimport xarray as xr\nimport matplotlib.pyplot as plt\nimport warnings\nwarnings.filterwarnings(\"ignore\") # Suppressing warnings to keep notebook output clean\n%matplotlib inline\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/ghg-cci#id-1-import-necessary-packages","position":5},{"hierarchy":{"lvl1":"Getting Started with Greenhouse Gases CCI Data","lvl2":"Step 2: Connect to the ESA CCI Data Store"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/ghg-cci#step-2-connect-to-the-esa-cci-data-store","position":6},{"hierarchy":{"lvl1":"Getting Started with Greenhouse Gases CCI Data","lvl2":"Step 2: Connect to the ESA CCI Data Store"},"content":"The ESA Climate Toolbox provides direct access to the ESA Climate Data Store, which hosts harmonized satellite-based climate data records produced under the ESA Climate Change Initiative (CCI).\n\nIn this step, we establish a connection to the data store so we can browse and open datasets. This connection allows us to access data without having to download files manually ‚Äî a convenient way to explore and analyze large geospatial datasets in cloud-friendly formats such as Zarr or Kerchunk.\n\nThe data store includes a wide range of essential climate variables (ECVs), such as aerosols, land surface temperature, sea level, and soil moisture.\n\nüìò Learn more about available datasets:üîó \n\nESA Climate Data Toolbox ‚Äì Quick Start Guide\n\ncci_store = new_data_store(\"esa-cci\")\n# List all available data sets of an ECV\n# list_ecv_datasets(\"GHG\")\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/ghg-cci#step-2-connect-to-the-esa-cci-data-store","position":7},{"hierarchy":{"lvl1":"Getting Started with Greenhouse Gases CCI Data","lvl2":"Step 3: Define the Dataset ID"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/ghg-cci#step-3-define-the-dataset-id","position":8},{"hierarchy":{"lvl1":"Getting Started with Greenhouse Gases CCI Data","lvl2":"Step 3: Define the Dataset ID"},"content":"To work with a specific ESA CCI dataset, we need to specify its dataset ID. This unique identifier tells the toolbox which variable and product we want to access.\n\nIn this example, we are using a dataset from the Greenhouse Gas (GHG) CCI project that provides column-averaged methane concentrations (XCH‚ÇÑ). These data are derived from satellite sensors such as TANSO-FTS onboard GOSAT and Sentinel-5P TROPOMI, depending on the dataset version. XCH‚ÇÑ is a key variable for monitoring atmospheric methane, a potent greenhouse gas with significant implications for climate change.\n\nFor other ESA CCI projects (e.g., Land Cover, Soil Moisture, Sea Surface Temperature), simply replace the dataset ID accordingly.\n\nüìò A full list of dataset IDs can be retrieved from the store or found in the \n\nESA CCI Climate Toolbox documentation.\n\ndata_id = 'esacci.GHG.satellite-orbit-frequency.L2.CH4.TROPOMI.Sentinel-5P.WFMD.v1-8.r1'\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/ghg-cci#step-3-define-the-dataset-id","position":9},{"hierarchy":{"lvl1":"Getting Started with Greenhouse Gases CCI Data","lvl2":"Step 4: Describe Dataset (Check Available Variables and Metadata)"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/ghg-cci#step-4-describe-dataset-check-available-variables-and-metadata","position":10},{"hierarchy":{"lvl1":"Getting Started with Greenhouse Gases CCI Data","lvl2":"Step 4: Describe Dataset (Check Available Variables and Metadata)"},"content":"Before loading the full dataset, it‚Äôs helpful to inspect the metadata to understand its structure. This includes:\n\nAvailable variables (e.g., xch4, uncertainty estimates)\n\nTemporal and spatial coverage\n\nData format and structure\n\nThis step ensures we know what the dataset contains and how to work with it. It also helps confirm that the variable we want to plot or analyze is actually included.\n\nüõ†Ô∏è Tip: You can use the description to verify variable names, dimensions (e.g., lat, lon, time), and time coverage.\n\nüìò More on dataset structure:üîó \n\nESA Climate Toolbox ‚Äì Data Access\n\ncci_store.describe_data(data_id)\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/ghg-cci#step-4-describe-dataset-check-available-variables-and-metadata","position":11},{"hierarchy":{"lvl1":"Getting Started with Greenhouse Gases CCI Data","lvl2":"Step 5: Check Open Parameters for the Dataset"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/ghg-cci#step-5-check-open-parameters-for-the-dataset","position":12},{"hierarchy":{"lvl1":"Getting Started with Greenhouse Gases CCI Data","lvl2":"Step 5: Check Open Parameters for the Dataset"},"content":"Before opening the dataset, we can inspect which parameters are supported by the Zarr opener (e.g., time_range, bbox, variable_names). This step helps ensure that we pass valid arguments when loading data and avoid errors.\n\nThe command below lists all expected input parameters and their allowed values for the selected dataset.\n\ncci_store.get_open_data_params_schema(data_id=data_id, opener_id='dataset:zarr:cciodp')\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/ghg-cci#step-5-check-open-parameters-for-the-dataset","position":13},{"hierarchy":{"lvl1":"Getting Started with Greenhouse Gases CCI Data","lvl2":"Step 6: Define Region, Time Range, and Variables of Interest"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/ghg-cci#step-6-define-region-time-range-and-variables-of-interest","position":14},{"hierarchy":{"lvl1":"Getting Started with Greenhouse Gases CCI Data","lvl2":"Step 6: Define Region, Time Range, and Variables of Interest"},"content":"Before opening the dataset, we define a few key parameters:\n\nTime range: the date(s) we want to load\n\nVariables: which data variable(s) to retrieve\n\n(Optional) Bounding box: spatial region of interest ‚Äî here we skip it to load the global dataset\n\nvariables = ['xch4']  # Variable to retrieve\nstart_date = '2023-06-21'    # Start and end date (same for a single timestep)\nend_date = '2023-06-21'\n# bbox = (-10.0, 35.0, 30.0, 60.0)  # Optional: restrict to a region like Europe\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/ghg-cci#step-6-define-region-time-range-and-variables-of-interest","position":15},{"hierarchy":{"lvl1":"Getting Started with Greenhouse Gases CCI Data","lvl2":"Step 7: Open the Dataset"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/ghg-cci#step-7-open-the-dataset","position":16},{"hierarchy":{"lvl1":"Getting Started with Greenhouse Gases CCI Data","lvl2":"Step 7: Open the Dataset"},"content":"Now we open the dataset using the selected parameters.The ESA Climate Toolbox will download only the necessary data (e.g., variable and time range).\nYou can always adjust the time range or variables to explore different slices of the dataset.\n\nghg_ds = cci_store.open_data(\n    data_id=data_id,\n    variable_names=variables,\n    time_range=[start_date, end_date],\n    # bbox=bbox  # Uncomment if regional selection is needed\n)\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/ghg-cci#step-7-open-the-dataset","position":17},{"hierarchy":{"lvl1":"Getting Started with Greenhouse Gases CCI Data","lvl2":"Step 8: Display Dataset Structure"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/ghg-cci#step-8-display-dataset-structure","position":18},{"hierarchy":{"lvl1":"Getting Started with Greenhouse Gases CCI Data","lvl2":"Step 8: Display Dataset Structure"},"content":"We print a summary of the opened dataset to inspect its structure, dimensions, variables, and metadata.This helps verify that the data was loaded correctly and shows what is available for analysis and visualization.\nThis step is useful to understand what the dataset contains before working with it further.\n\nprint(\"\\nOpened Dataset:\\n\", ghg_ds)\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/ghg-cci#step-8-display-dataset-structure","position":19},{"hierarchy":{"lvl1":"Getting Started with Greenhouse Gases CCI Data","lvl2":"Step 9: Visualize Results"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/ghg-cci#step-9-visualize-results","position":20},{"hierarchy":{"lvl1":"Getting Started with Greenhouse Gases CCI Data","lvl2":"Step 9: Visualize Results"},"content":"We now create a simple map plot of the selected variable.This allows us to explore the spatial patterns of the data ‚Äî in this case, the column-averaged methane concentration (XCH4) for the selected day.\nFor more interactive and advanced visualizations, check out the \n\nESA Climate Toolbox or the \n\nToolbox documentation.\n\nimport geopandas as gpd\nimport matplotlib.pyplot as plt\nimport cartopy.crs as ccrs\nimport cartopy.feature as cfeature\n\n# Set up the map\nfig, ax = plt.subplots(figsize=(12, 6), subplot_kw={\"projection\": ccrs.PlateCarree()})\n\n# Add basemap features\nax.coastlines()\nax.add_feature(cfeature.BORDERS, linestyle=\":\")\nax.set_global()\n\n# Plot the CH4 data points\nsc = ghg_ds.plot(\n    ax=ax,\n    column=\"xch4\",\n    cmap=\"plasma\",  # or \"viridis\", \"inferno\", etc.\n    markersize=5,\n    legend=True,\n    legend_kwds={\"label\": \"XCH‚ÇÑ [ppb]\"},\n    transform=ccrs.PlateCarree()\n)\n\n# Add a title\nfrom datetime import datetime\n\nobs_date = datetime.fromisoformat(ghg_ds['time'].iloc[0]).date()\nplt.title(f\"GHG CCI CH‚ÇÑ (XCH‚ÇÑ) Observations ‚Äì {obs_date}\")\n\nplt.tight_layout()\nplt.show()","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/ghg-cci#step-9-visualize-results","position":21},{"hierarchy":{"lvl1":"Getting Started with Ice Sheets CCI Data"},"type":"lvl1","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/icesheets-cci","position":0},{"hierarchy":{"lvl1":"Getting Started with Ice Sheets CCI Data"},"content":"\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/icesheets-cci","position":1},{"hierarchy":{"lvl1":"Getting Started with Ice Sheets CCI Data"},"type":"lvl1","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/icesheets-cci#getting-started-with-ice-sheets-cci-data","position":2},{"hierarchy":{"lvl1":"Getting Started with Ice Sheets CCI Data"},"content":"\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/icesheets-cci#getting-started-with-ice-sheets-cci-data","position":3},{"hierarchy":{"lvl1":"Getting Started with Ice Sheets CCI Data","lvl2":"1. Import Necessary Packages"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/icesheets-cci#id-1-import-necessary-packages","position":4},{"hierarchy":{"lvl1":"Getting Started with Ice Sheets CCI Data","lvl2":"1. Import Necessary Packages"},"content":"In this section, we import the required Python packages to work with ESA Climate Change Initiative (CCI) data. Most notably, we use the \n\nESA Climate Toolbox which simplifies access, manipulation, and visualization of CCI datasets in Python.\n\nThese packages allow us to:\n\nAccess satellite-based climate data records from ESA.\n\nHandle geospatial and temporal dimensions efficiently.\n\nVisualize data with intuitive plotting tools.\n\nüìö For a broader introduction to the toolbox and how to install it, visit:üîó \n\nESA CCI Climate Toolbox Quick Startüîó \n\nESA Climate Data Toolbox Website\n\nfrom xcube.core.store import new_data_store\nfrom esa_climate_toolbox.core import get_op\nfrom esa_climate_toolbox.core import list_ecv_datasets\nfrom esa_climate_toolbox.core import get_store\nfrom esa_climate_toolbox.core import list_datasets\nfrom esa_climate_toolbox.ops import plot\nimport xarray as xr\nimport matplotlib.pyplot as plt\nimport warnings\nwarnings.filterwarnings(\"ignore\") # Suppressing warnings to keep notebook output clean\n%matplotlib inline\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/icesheets-cci#id-1-import-necessary-packages","position":5},{"hierarchy":{"lvl1":"Getting Started with Ice Sheets CCI Data","lvl2":"Step 2: Connect to the ESA CCI Data Store"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/icesheets-cci#step-2-connect-to-the-esa-cci-data-store","position":6},{"hierarchy":{"lvl1":"Getting Started with Ice Sheets CCI Data","lvl2":"Step 2: Connect to the ESA CCI Data Store"},"content":"The ESA Climate Toolbox provides direct access to the ESA Climate Data Store, which hosts harmonized satellite-based climate data records produced under the ESA Climate Change Initiative (CCI).\n\nIn this step, we establish a connection to the data store so we can browse and open datasets. This connection allows us to access data without having to download files manually ‚Äî a convenient way to explore and analyze large geospatial datasets in cloud-friendly formats such as Zarr or Kerchunk.\n\nThe data store includes a wide range of essential climate variables (ECVs), such as aerosols, land surface temperature, sea level, and soil moisture.\n\nüìò Learn more about available datasets:üîó \n\nESA Climate Data Toolbox ‚Äì Quick Start Guide\n\ncci_store = new_data_store(\"esa-cci\")\n# List all available data sets of an ECV\n# list_ecv_datasets(\"Icesheets\")\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/icesheets-cci#step-2-connect-to-the-esa-cci-data-store","position":7},{"hierarchy":{"lvl1":"Getting Started with Ice Sheets CCI Data","lvl2":"Step 3: Define the Dataset ID"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/icesheets-cci#step-3-define-the-dataset-id","position":8},{"hierarchy":{"lvl1":"Getting Started with Ice Sheets CCI Data","lvl2":"Step 3: Define the Dataset ID"},"content":"To work with a specific ESA CCI dataset, we need to specify its dataset ID. This unique identifier tells the toolbox which variable and product we want to access.\n\nIn this example, we are using a dataset from the Ice Sheets CCI project, providing annual Surface Elevation Change (SEC) data over the Greenland Ice Sheet. SEC is derived from multiple satellite altimeter missions and is a key variable for understanding ice sheet mass balance, sea level rise, and climate change impacts in polar regions.\n\nFor other ESA CCI projects (e.g., Cloud, Land Cover, Greenhouse Gases), simply replace the dataset ID accordingly to access the relevant product.\n\nWe will use the following dataset ID:\n\ndata_id = 'esacci.ICESHEETS.yr.Unspecified.SEC.multi-sensor.multi-platform.UNSPECIFIED.1-2.r1'\n\nüìò A full list of dataset IDs can be retrieved from the store or found in the \n\nESA CCI Climate Toolbox documentation.\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/icesheets-cci#step-3-define-the-dataset-id","position":9},{"hierarchy":{"lvl1":"Getting Started with Ice Sheets CCI Data","lvl2":"Step 4: Describe Dataset (Check Available Variables and Metadata)"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/icesheets-cci#step-4-describe-dataset-check-available-variables-and-metadata","position":10},{"hierarchy":{"lvl1":"Getting Started with Ice Sheets CCI Data","lvl2":"Step 4: Describe Dataset (Check Available Variables and Metadata)"},"content":"Before loading the full dataset, it‚Äôs helpful to inspect the metadata to understand its structure. This includes:\n\nAvailable variables (e.g., SEC, uncertainty estimates)\n\nTemporal and spatial coverage\n\nData format and structure\n\nThis step ensures we know what the dataset contains and how to work with it. It also helps confirm that the variable we want to plot or analyze is actually included.\n\nüõ†Ô∏è Tip: You can use the description to verify variable names, dimensions (e.g., lat, lon, time), and time coverage.\n\nüìò More on dataset structure:üîó \n\nESA Climate Toolbox ‚Äì Data Access\n\ncci_store.describe_data(data_id)\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/icesheets-cci#step-4-describe-dataset-check-available-variables-and-metadata","position":11},{"hierarchy":{"lvl1":"Getting Started with Ice Sheets CCI Data","lvl2":"Step 5: Check Open Parameters for the Dataset"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/icesheets-cci#step-5-check-open-parameters-for-the-dataset","position":12},{"hierarchy":{"lvl1":"Getting Started with Ice Sheets CCI Data","lvl2":"Step 5: Check Open Parameters for the Dataset"},"content":"Before opening the dataset, we can inspect which parameters are supported by the Zarr opener (e.g., time_range, bbox, variable_names). This step helps ensure that we pass valid arguments when loading data and avoid errors.\n\nThe command below lists all expected input parameters and their allowed values for the selected dataset.\n\ncci_store.get_open_data_params_schema(data_id=data_id, opener_id='dataset:zarr:cciodp')\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/icesheets-cci#step-5-check-open-parameters-for-the-dataset","position":13},{"hierarchy":{"lvl1":"Getting Started with Ice Sheets CCI Data","lvl2":"Step 6: Define Region, Time Range, and Variables of Interest"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/icesheets-cci#step-6-define-region-time-range-and-variables-of-interest","position":14},{"hierarchy":{"lvl1":"Getting Started with Ice Sheets CCI Data","lvl2":"Step 6: Define Region, Time Range, and Variables of Interest"},"content":"Before opening the dataset, we define a few key parameters:\n\nTime range: the date(s) we want to load\n\nVariables: which data variable(s) to retrieve\n\n(Optional) Bounding box: spatial region of interest ‚Äî here we skip it to load the global dataset\n\nvariables = ['SEC']  # Variable to retrieve\nstart_date = '2013-01-01'    # Start and end date (same for a single timestep)\nend_date = '2013-12-31'\n# bbox = (-10.0, 35.0, 30.0, 60.0)  # Optional: restrict to a region like Europe\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/icesheets-cci#step-6-define-region-time-range-and-variables-of-interest","position":15},{"hierarchy":{"lvl1":"Getting Started with Ice Sheets CCI Data","lvl2":"Step 7: Open the Dataset"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/icesheets-cci#step-7-open-the-dataset","position":16},{"hierarchy":{"lvl1":"Getting Started with Ice Sheets CCI Data","lvl2":"Step 7: Open the Dataset"},"content":"Now we open the dataset using the selected parameters.The ESA Climate Toolbox will download only the necessary data (e.g., variable and time range).\nYou can always adjust the time range or variables to explore different slices of the dataset.\n\nicesheet_ds = cci_store.open_data(\n    data_id=data_id,\n    variable_names=variables,\n    time_range=[start_date, end_date]\n    # bbox=bbox  # Uncomment if regional selection is needed\n)\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/icesheets-cci#step-7-open-the-dataset","position":17},{"hierarchy":{"lvl1":"Getting Started with Ice Sheets CCI Data","lvl2":"Step 8: Display Dataset Structure"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/icesheets-cci#step-8-display-dataset-structure","position":18},{"hierarchy":{"lvl1":"Getting Started with Ice Sheets CCI Data","lvl2":"Step 8: Display Dataset Structure"},"content":"We print a summary of the opened dataset to inspect its structure, dimensions, variables, and metadata.This helps verify that the data was loaded correctly and shows what is available for analysis and visualization.\nThis step is useful to understand what the dataset contains before working with it further.\n\nprint(\"\\nOpened Dataset:\\n\", icesheet_ds)\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/icesheets-cci#step-8-display-dataset-structure","position":19},{"hierarchy":{"lvl1":"Getting Started with Ice Sheets CCI Data","lvl2":"Step 9: Visualize Results"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/icesheets-cci#step-9-visualize-results","position":20},{"hierarchy":{"lvl1":"Getting Started with Ice Sheets CCI Data","lvl2":"Step 9: Visualize Results"},"content":"We now create a simple map plot of the selected variable.This allows us to explore the spatial patterns of the data ‚Äî in this case, the surface elevation change (SEC) for the selected day.\nFor more interactive and advanced visualizations, check out the \n\nESA Climate Toolbox or the \n\nToolbox documentation.\n\nimport matplotlib.pyplot as plt\n\n# Extract the SEC data for the first (and only) time slice\nsec = icesheet_ds[\"SEC\"].isel(time=0)\ntime_str = icesheet_ds['time'].isel(time=0).dt.strftime('%B %Y').item()\n\n# Flip the y-axis if needed by sorting\nif sec.y[0] > sec.y[-1]:\n    sec = sec.sortby(\"y\")\n\n# Plot\nplt.figure(figsize=(10, 6))\nsec.plot(\n    cmap=\"RdBu_r\",\n    robust=True,\n    cbar_kwargs={\"label\": \"Surface Elevation Change (m/year)\"}\n)\nplt.title(\"Surface Elevation Change (Greenland Ice Sheet) ‚Äì \" + time_str)\nplt.xlabel(\"x (m)\")\nplt.ylabel(\"y (m)\")\nplt.tight_layout()\nplt.show()","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/icesheets-cci#step-9-visualize-results","position":21},{"hierarchy":{"lvl1":"Getting Started with Land Surface Temperature CCI Data"},"type":"lvl1","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/lst-cci","position":0},{"hierarchy":{"lvl1":"Getting Started with Land Surface Temperature CCI Data"},"content":"\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/lst-cci","position":1},{"hierarchy":{"lvl1":"Getting Started with Land Surface Temperature CCI Data"},"type":"lvl1","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/lst-cci#getting-started-with-land-surface-temperature-cci-data","position":2},{"hierarchy":{"lvl1":"Getting Started with Land Surface Temperature CCI Data"},"content":"\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/lst-cci#getting-started-with-land-surface-temperature-cci-data","position":3},{"hierarchy":{"lvl1":"Getting Started with Land Surface Temperature CCI Data","lvl2":"1. Import Necessary Packages"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/lst-cci#id-1-import-necessary-packages","position":4},{"hierarchy":{"lvl1":"Getting Started with Land Surface Temperature CCI Data","lvl2":"1. Import Necessary Packages"},"content":"In this section, we import the required Python packages to work with ESA Climate Change Initiative (CCI) data. Most notably, we use the \n\nESA Climate Toolbox which simplifies access, manipulation, and visualization of CCI datasets in Python.\n\nThese packages allow us to:\n\nAccess satellite-based climate data records from ESA.\n\nHandle geospatial and temporal dimensions efficiently.\n\nVisualize data with intuitive plotting tools.\n\nüìö For a broader introduction to the toolbox and how to install it, visit:üîó \n\nESA CCI Climate Toolbox Quick Startüîó \n\nESA Climate Data Toolbox Website\n\nfrom xcube.core.store import new_data_store\nfrom esa_climate_toolbox.core import get_op\nfrom esa_climate_toolbox.core import list_ecv_datasets\nfrom esa_climate_toolbox.core import get_store\nfrom esa_climate_toolbox.core import list_datasets\nfrom esa_climate_toolbox.ops import plot\nimport xarray as xr\nimport matplotlib.pyplot as plt\nimport warnings\nwarnings.filterwarnings(\"ignore\") # Suppressing warnings to keep notebook output clean\n%matplotlib inline\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/lst-cci#id-1-import-necessary-packages","position":5},{"hierarchy":{"lvl1":"Getting Started with Land Surface Temperature CCI Data","lvl2":"Step 2: Connect to the ESA CCI Data Store"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/lst-cci#step-2-connect-to-the-esa-cci-data-store","position":6},{"hierarchy":{"lvl1":"Getting Started with Land Surface Temperature CCI Data","lvl2":"Step 2: Connect to the ESA CCI Data Store"},"content":"The ESA Climate Toolbox provides direct access to the ESA Climate Data Store, which hosts harmonized satellite-based climate data records produced under the ESA Climate Change Initiative (CCI).\n\nIn this step, we establish a connection to the data store so we can browse and open datasets. This connection allows us to access data without having to download files manually ‚Äî a convenient way to explore and analyze large geospatial datasets in cloud-friendly formats such as Zarr or Kerchunk.\n\nThe data store includes a wide range of essential climate variables (ECVs), such as aerosols, land surface temperature, sea level, and soil moisture.\n\nüìò Learn more about available datasets:üîó \n\nESA Climate Data Toolbox ‚Äì Quick Start Guide\n\ncci_store = new_data_store(\"esa-cci\")\n# List all available data sets of an ECV\n# list_ecv_datasets(\"LST\")\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/lst-cci#step-2-connect-to-the-esa-cci-data-store","position":7},{"hierarchy":{"lvl1":"Getting Started with Land Surface Temperature CCI Data","lvl2":"Step 3: Define the Dataset ID"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/lst-cci#step-3-define-the-dataset-id","position":8},{"hierarchy":{"lvl1":"Getting Started with Land Surface Temperature CCI Data","lvl2":"Step 3: Define the Dataset ID"},"content":"To work with a specific ESA CCI dataset, we need to specify its dataset ID. This unique identifier tells the toolbox which variable and product we want to access.\n\nIn this example, we are using the Land Surface Temperature (LST) dataset from the ESA CCI program. The variable lst represents daily land surface temperatures derived from multiple satellite sensors. These data are essential for studying surface energy balance, droughts, urban heat islands, and land‚Äìatmosphere interactions.\n\nFor other ESA CCI datasets (e.g., Lakes, Sea Ice, Soil Moisture), simply replace the dataset ID and variable names accordingly.\n\nWe will use the following dataset ID:\n\ndata_id = 'esacci.LST.day.L3C.LST.multi-sensor.multi-platform.SSMI_SSMIS.v2-33.ASC'\n\nüìò A full list of dataset IDs can be retrieved from the store or found in the \n\nESA CCI Climate Toolbox documentation.\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/lst-cci#step-3-define-the-dataset-id","position":9},{"hierarchy":{"lvl1":"Getting Started with Land Surface Temperature CCI Data","lvl2":"Step 4: Describe Dataset (Check Available Variables and Metadata)"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/lst-cci#step-4-describe-dataset-check-available-variables-and-metadata","position":10},{"hierarchy":{"lvl1":"Getting Started with Land Surface Temperature CCI Data","lvl2":"Step 4: Describe Dataset (Check Available Variables and Metadata)"},"content":"Before loading the full dataset, it‚Äôs helpful to inspect the metadata to understand its structure. This includes:\n\nAvailable variables (e.g., LST, uncertainty estimates)\n\nTemporal and spatial coverage\n\nData format and structure\n\nThis step ensures we know what the dataset contains and how to work with it. It also helps confirm that the variable we want to plot or analyze is actually included.\n\nüõ†Ô∏è Tip: You can use the description to verify variable names, dimensions (e.g., lat, lon, time), and time coverage.\n\nüìò More on dataset structure:üîó \n\nESA Climate Toolbox ‚Äì Data Access\n\ncci_store.describe_data(data_id)\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/lst-cci#step-4-describe-dataset-check-available-variables-and-metadata","position":11},{"hierarchy":{"lvl1":"Getting Started with Land Surface Temperature CCI Data","lvl2":"Step 5: Check Open Parameters for the Dataset"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/lst-cci#step-5-check-open-parameters-for-the-dataset","position":12},{"hierarchy":{"lvl1":"Getting Started with Land Surface Temperature CCI Data","lvl2":"Step 5: Check Open Parameters for the Dataset"},"content":"Before opening the dataset, we can inspect which parameters are supported by the Zarr opener (e.g., time_range, bbox, variable_names). This step helps ensure that we pass valid arguments when loading data and avoid errors.\n\nThe command below lists all expected input parameters and their allowed values for the selected dataset.\n\ncci_store.get_open_data_params_schema(data_id=data_id, opener_id='dataset:zarr:cciodp')\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/lst-cci#step-5-check-open-parameters-for-the-dataset","position":13},{"hierarchy":{"lvl1":"Getting Started with Land Surface Temperature CCI Data","lvl2":"Step 6: Define Region, Time Range, and Variables of Interest"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/lst-cci#step-6-define-region-time-range-and-variables-of-interest","position":14},{"hierarchy":{"lvl1":"Getting Started with Land Surface Temperature CCI Data","lvl2":"Step 6: Define Region, Time Range, and Variables of Interest"},"content":"Before opening the dataset, we define a few key parameters:\n\nTime range: the date(s) we want to load\n\nVariables: which data variable(s) to retrieve\n\n(Optional) Bounding box: spatial region of interest ‚Äî here we skip it to load the global dataset\n\nvariables = ['lst']  # Variable to retrieve\nstart_date = '2020-06-21'    # Start and end date (same for a single timestep)\nend_date = '2020-06-21'\n# bbox = (-10.0, 35.0, 30.0, 60.0)  # Optional: restrict to a region like Europe\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/lst-cci#step-6-define-region-time-range-and-variables-of-interest","position":15},{"hierarchy":{"lvl1":"Getting Started with Land Surface Temperature CCI Data","lvl2":"Step 7: Open the Dataset"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/lst-cci#step-7-open-the-dataset","position":16},{"hierarchy":{"lvl1":"Getting Started with Land Surface Temperature CCI Data","lvl2":"Step 7: Open the Dataset"},"content":"Now we open the dataset using the selected parameters.The ESA Climate Toolbox will download only the necessary data (e.g., variable and time range).\nYou can always adjust the time range or variables to explore different slices of the dataset.\n\nlst_ds = cci_store.open_data(\n    data_id=data_id,\n    variable_names=variables,\n    time_range=[start_date, end_date]\n    # bbox=bbox  # Uncomment if regional selection is needed\n)\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/lst-cci#step-7-open-the-dataset","position":17},{"hierarchy":{"lvl1":"Getting Started with Land Surface Temperature CCI Data","lvl2":"Step 8: Display Dataset Structure"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/lst-cci#step-8-display-dataset-structure","position":18},{"hierarchy":{"lvl1":"Getting Started with Land Surface Temperature CCI Data","lvl2":"Step 8: Display Dataset Structure"},"content":"We print a summary of the opened dataset to inspect its structure, dimensions, variables, and metadata.This helps verify that the data was loaded correctly and shows what is available for analysis and visualization.\nThis step is useful to understand what the dataset contains before working with it further.\n\nprint(\"\\nOpened Dataset:\\n\", lst_ds)\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/lst-cci#step-8-display-dataset-structure","position":19},{"hierarchy":{"lvl1":"Getting Started with Land Surface Temperature CCI Data","lvl2":"Step 9: Visualize Results"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/lst-cci#step-9-visualize-results","position":20},{"hierarchy":{"lvl1":"Getting Started with Land Surface Temperature CCI Data","lvl2":"Step 9: Visualize Results"},"content":"We now create a simple map plot of the selected variable.This allows us to explore the spatial patterns of the data ‚Äî in this case, the Land Surface Temperature (LST) for the selected day.\nFor more interactive and advanced visualizations, check out the \n\nESA Climate Toolbox or the \n\nToolbox documentation.\n\nimport matplotlib.pyplot as plt\nimport cartopy.crs as ccrs\n\n# Load LST data\nlst = lst_ds[\"lst\"].isel(time=0).squeeze().load()\nlat = lst_ds[\"lat\"].values\nlon = lst_ds[\"lon\"].values\n# Get date for the title\ntime_str = lst_ds['time'].isel(time=0).dt.strftime('%d %B %Y').item()\n\n\n# Create figure and map\nfig = plt.figure(figsize=(10, 5))\nax = plt.axes(projection=ccrs.PlateCarree())\n\nmesh = ax.pcolormesh(\n    lon, lat, lst,\n    cmap=\"inferno\",\n    transform=ccrs.PlateCarree()\n)\n\nax.coastlines()\nplt.colorbar(mesh, ax=ax, orientation='vertical', label=\"LST (K)\")\nplt.title(\"Land Surface Temperature (LST) ‚Äì \" + time_str)\nplt.tight_layout()\nplt.show()","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/lst-cci#step-9-visualize-results","position":21},{"hierarchy":{"lvl1":"Getting Started with Lakes CCI Data"},"type":"lvl1","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/lakes-cci","position":0},{"hierarchy":{"lvl1":"Getting Started with Lakes CCI Data"},"content":"\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/lakes-cci","position":1},{"hierarchy":{"lvl1":"Getting Started with Lakes CCI Data"},"type":"lvl1","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/lakes-cci#getting-started-with-lakes-cci-data","position":2},{"hierarchy":{"lvl1":"Getting Started with Lakes CCI Data"},"content":"\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/lakes-cci#getting-started-with-lakes-cci-data","position":3},{"hierarchy":{"lvl1":"Getting Started with Lakes CCI Data","lvl2":"1. Import Necessary Packages"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/lakes-cci#id-1-import-necessary-packages","position":4},{"hierarchy":{"lvl1":"Getting Started with Lakes CCI Data","lvl2":"1. Import Necessary Packages"},"content":"In this section, we import the required Python packages to work with ESA Climate Change Initiative (CCI) data. Most notably, we use the \n\nESA Climate Toolbox which simplifies access, manipulation, and visualization of CCI datasets in Python.\n\nThese packages allow us to:\n\nAccess satellite-based climate data records from ESA.\n\nHandle geospatial and temporal dimensions efficiently.\n\nVisualize data with intuitive plotting tools.\n\nüìö For a broader introduction to the toolbox and how to install it, visit:üîó \n\nESA CCI Climate Toolbox Quick Startüîó \n\nESA Climate Data Toolbox Website\n\nfrom xcube.core.store import new_data_store\nfrom esa_climate_toolbox.core import get_op\nfrom esa_climate_toolbox.core import list_ecv_datasets\nfrom esa_climate_toolbox.core import get_store\nfrom esa_climate_toolbox.core import list_datasets\nfrom esa_climate_toolbox.ops import plot\nimport xarray as xr\nimport matplotlib.pyplot as plt\nimport warnings\nwarnings.filterwarnings(\"ignore\") # Suppressing warnings to keep notebook output clean\n%matplotlib inline\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/lakes-cci#id-1-import-necessary-packages","position":5},{"hierarchy":{"lvl1":"Getting Started with Lakes CCI Data","lvl2":"Step 2: Connect to the ESA CCI Data Store"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/lakes-cci#step-2-connect-to-the-esa-cci-data-store","position":6},{"hierarchy":{"lvl1":"Getting Started with Lakes CCI Data","lvl2":"Step 2: Connect to the ESA CCI Data Store"},"content":"The ESA Climate Toolbox provides direct access to the ESA Climate Data Store, which hosts harmonized satellite-based climate data records produced under the ESA Climate Change Initiative (CCI).\n\nIn this step, we establish a connection to the data store so we can browse and open datasets. This connection allows us to access data without having to download files manually ‚Äî a convenient way to explore and analyze large geospatial datasets in cloud-friendly formats such as Zarr or Kerchunk.\n\nThe data store includes a wide range of essential climate variables (ECVs), such as aerosols, land surface temperature, sea level, and soil moisture.\n\nüìò Learn more about available datasets:üîó \n\nESA Climate Data Toolbox ‚Äì Quick Start Guide\n\ncci_store = new_data_store(\"esa-cci\")\n# List all available data sets of an ECV\n# list_ecv_datasets(\"Lakes\")\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/lakes-cci#step-2-connect-to-the-esa-cci-data-store","position":7},{"hierarchy":{"lvl1":"Getting Started with Lakes CCI Data","lvl2":"Step 3: Define the Dataset ID"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/lakes-cci#step-3-define-the-dataset-id","position":8},{"hierarchy":{"lvl1":"Getting Started with Lakes CCI Data","lvl2":"Step 3: Define the Dataset ID"},"content":"To work with a specific ESA CCI dataset, we need to specify its dataset ID. This unique identifier tells the toolbox which variable and product we want to access.\n\nIn this example, we are using a dataset from the Lakes CCI project that provides daily Level 3 surface temperature products for inland water bodies. These data are derived from satellite observations using multiple sensors and are valuable for monitoring climate-related changes in freshwater systems.\n\nThe key variable used in this example is lake_surface_water_temperature, which provides the skin temperature of lake surfaces globally.\n\nWe will use the following dataset ID:\n\ndata_id = 'esacci.LAKES.day.L3S.LK_PRODUCTS.multi-sensor.multi-platform.MERGED.v2-1-0.r1'\n\nüìò A full list of dataset IDs can be retrieved from the store or found in the \n\nESA CCI Climate Toolbox documentation.\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/lakes-cci#step-3-define-the-dataset-id","position":9},{"hierarchy":{"lvl1":"Getting Started with Lakes CCI Data","lvl2":"Step 4: Describe Dataset (Check Available Variables and Metadata)"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/lakes-cci#step-4-describe-dataset-check-available-variables-and-metadata","position":10},{"hierarchy":{"lvl1":"Getting Started with Lakes CCI Data","lvl2":"Step 4: Describe Dataset (Check Available Variables and Metadata)"},"content":"Before loading the full dataset, it‚Äôs helpful to inspect the metadata to understand its structure. This includes:\n\nAvailable variables (e.g., lake_surface_water_temperature, uncertainty estimates)\n\nTemporal and spatial coverage\n\nData format and structure\n\nThis step ensures we know what the dataset contains and how to work with it. It also helps confirm that the variable we want to plot or analyze is actually included.\n\nüõ†Ô∏è Tip: You can use the description to verify variable names, dimensions (e.g., lat, lon, time), and time coverage.\n\nüìò More on dataset structure:üîó \n\nESA Climate Toolbox ‚Äì Data Access\n\ncci_store.describe_data(data_id)\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/lakes-cci#step-4-describe-dataset-check-available-variables-and-metadata","position":11},{"hierarchy":{"lvl1":"Getting Started with Lakes CCI Data","lvl2":"Step 5: Check Open Parameters for the Dataset"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/lakes-cci#step-5-check-open-parameters-for-the-dataset","position":12},{"hierarchy":{"lvl1":"Getting Started with Lakes CCI Data","lvl2":"Step 5: Check Open Parameters for the Dataset"},"content":"Before opening the dataset, we can inspect which parameters are supported by the Zarr opener (e.g., time_range, bbox, variable_names). This step helps ensure that we pass valid arguments when loading data and avoid errors.\n\nThe command below lists all expected input parameters and their allowed values for the selected dataset.\n\ncci_store.get_open_data_params_schema(data_id=data_id, opener_id='dataset:zarr:cciodp')\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/lakes-cci#step-5-check-open-parameters-for-the-dataset","position":13},{"hierarchy":{"lvl1":"Getting Started with Lakes CCI Data","lvl2":"Step 6: Define Region, Time Range, and Variables of Interest"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/lakes-cci#step-6-define-region-time-range-and-variables-of-interest","position":14},{"hierarchy":{"lvl1":"Getting Started with Lakes CCI Data","lvl2":"Step 6: Define Region, Time Range, and Variables of Interest"},"content":"Before opening the dataset, we define a few key parameters:\n\nTime range: the date(s) we want to load\n\nVariables: which data variable(s) to retrieve\n\n(Optional) Bounding box: spatial region of interest ‚Äî here we skip it to load the global dataset\n\nvariables = ['lake_surface_water_temperature']  # Variable to retrieve\nstart_date = '2022-06-21'    # Start and end date (same for a single timestep)\nend_date = '2022-06-21'\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/lakes-cci#step-6-define-region-time-range-and-variables-of-interest","position":15},{"hierarchy":{"lvl1":"Getting Started with Lakes CCI Data","lvl2":"Step 7: Open the Dataset"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/lakes-cci#step-7-open-the-dataset","position":16},{"hierarchy":{"lvl1":"Getting Started with Lakes CCI Data","lvl2":"Step 7: Open the Dataset"},"content":"Now we open the dataset using the selected parameters.The ESA Climate Toolbox will download only the necessary data (e.g., variable and time range).\nYou can always adjust the time range or variables to explore different slices of the dataset.\n\nlakes_ds = cci_store.open_data(\n    data_id=data_id,\n    variable_names=variables,\n    time_range=[start_date, end_date],\n)\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/lakes-cci#step-7-open-the-dataset","position":17},{"hierarchy":{"lvl1":"Getting Started with Lakes CCI Data","lvl2":"Step 8: Display Dataset Structure"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/lakes-cci#step-8-display-dataset-structure","position":18},{"hierarchy":{"lvl1":"Getting Started with Lakes CCI Data","lvl2":"Step 8: Display Dataset Structure"},"content":"We print a summary of the opened dataset to inspect its structure, dimensions, variables, and metadata.This helps verify that the data was loaded correctly and shows what is available for analysis and visualization.\nThis step is useful to understand what the dataset contains before working with it further.\n\nprint(\"\\nOpened Dataset:\\n\", lakes_ds)\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/lakes-cci#step-8-display-dataset-structure","position":19},{"hierarchy":{"lvl1":"Getting Started with Lakes CCI Data","lvl2":"Step 9: Visualize Results"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/lakes-cci#step-9-visualize-results","position":20},{"hierarchy":{"lvl1":"Getting Started with Lakes CCI Data","lvl2":"Step 9: Visualize Results"},"content":"We now create a simple map plot of the selected variable.This allows us to explore the spatial patterns of the data ‚Äî in this case, the lake surface water temperature for the selected day.\nFor more interactive and advanced visualizations, check out the \n\nESA Climate Toolbox or the \n\nToolbox documentation.\n\nimport matplotlib.pyplot as plt\nimport cartopy.crs as ccrs\n\n# Select first (and only) time step and remove singleton dimension\nlswt = lakes_ds[\"lake_surface_water_temperature\"].isel(time=0).squeeze()\ntime_str = lakes_ds['time'].isel(time=0).dt.strftime('%d %B %Y').item()\n\n# For clarity and performance, you may want to subset the region (e.g., African lakes):\nlswt = lswt.sel(lat=slice(-15, 5), lon=slice(25, 40))\n\n# Create figure and axis\nfig = plt.figure(figsize=(12, 6))\nax = plt.axes(projection=ccrs.PlateCarree())\n\n# Plot the data\nmesh = lswt.plot(\n    ax=ax,\n    transform=ccrs.PlateCarree(),\n    cmap=\"turbo\",  # or \"inferno\", \"viridis\", or \"plasma\"\n    robust=True,\n    cbar_kwargs={\"label\": \"Lake Surface Water Temperature (K)\"}\n)\n\nax.coastlines()\nax.set_title(\"Lake Surface Water Temperature ‚Äì \" + time_str + \" (Lakes CCI)\")\n\n# Add ticks\nax.set_xticks(range(25, 41, 5), crs=ccrs.PlateCarree())  # longitude ticks\nax.set_yticks(range(-15, 6, 5), crs=ccrs.PlateCarree())  # latitude ticks\nax.set_xlabel(\"Longitude\")\nax.set_ylabel(\"Latitude\")\nplt.tight_layout()\nplt.show()","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/lakes-cci#step-9-visualize-results","position":21},{"hierarchy":{"lvl1":"Getting Started with Land Cover CCI Data"},"type":"lvl1","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/landcover-cci","position":0},{"hierarchy":{"lvl1":"Getting Started with Land Cover CCI Data"},"content":"\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/landcover-cci","position":1},{"hierarchy":{"lvl1":"Getting Started with Land Cover CCI Data"},"type":"lvl1","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/landcover-cci#getting-started-with-land-cover-cci-data","position":2},{"hierarchy":{"lvl1":"Getting Started with Land Cover CCI Data"},"content":"\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/landcover-cci#getting-started-with-land-cover-cci-data","position":3},{"hierarchy":{"lvl1":"Getting Started with Land Cover CCI Data","lvl2":"1. Import Necessary Packages"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/landcover-cci#id-1-import-necessary-packages","position":4},{"hierarchy":{"lvl1":"Getting Started with Land Cover CCI Data","lvl2":"1. Import Necessary Packages"},"content":"In this section, we import the required Python packages to work with ESA Climate Change Initiative (CCI) data. Most notably, we use the \n\nESA Climate Toolbox which simplifies access, manipulation, and visualization of CCI datasets in Python.\n\nThese packages allow us to:\n\nAccess satellite-based climate data records from ESA.\n\nHandle geospatial and temporal dimensions efficiently.\n\nVisualize data with intuitive plotting tools.\n\nüìö For a broader introduction to the toolbox and how to install it, visit:üîó \n\nESA CCI Climate Toolbox Quick Startüîó \n\nESA Climate Data Toolbox Website\n\nfrom xcube.core.store import new_data_store\nfrom esa_climate_toolbox.core import get_op\nfrom esa_climate_toolbox.core import list_ecv_datasets\nfrom esa_climate_toolbox.core import get_store\nfrom esa_climate_toolbox.core import list_datasets\nfrom esa_climate_toolbox.ops import plot\nimport xarray as xr\nimport matplotlib.pyplot as plt\nimport warnings\nwarnings.filterwarnings(\"ignore\") # Suppressing warnings to keep notebook output clean\n%matplotlib inline\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/landcover-cci#id-1-import-necessary-packages","position":5},{"hierarchy":{"lvl1":"Getting Started with Land Cover CCI Data","lvl2":"Step 2: Connect to the ESA CCI Data Store"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/landcover-cci#step-2-connect-to-the-esa-cci-data-store","position":6},{"hierarchy":{"lvl1":"Getting Started with Land Cover CCI Data","lvl2":"Step 2: Connect to the ESA CCI Data Store"},"content":"The ESA Climate Toolbox provides direct access to the ESA Climate Data Store, which hosts harmonized satellite-based climate data records produced under the ESA Climate Change Initiative (CCI).\n\nIn this step, we establish a connection to the data store so we can browse and open datasets. This connection allows us to access data without having to download files manually ‚Äî a convenient way to explore and analyze large geospatial datasets in cloud-friendly formats such as Zarr or Kerchunk.\n\nThe data store includes a wide range of essential climate variables (ECVs), such as aerosols, land surface temperature, sea level, and soil moisture.\n\nüìò Learn more about available datasets:üîó \n\nESA Climate Data Toolbox ‚Äì Quick Start Guide\n\ncci_store = new_data_store(\"esa-cci\")\n# List all available data sets of an ECV\n# list_ecv_datasets(\"LC\")\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/landcover-cci#step-2-connect-to-the-esa-cci-data-store","position":7},{"hierarchy":{"lvl1":"Getting Started with Land Cover CCI Data","lvl2":"Step 3: Define the Dataset ID"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/landcover-cci#step-3-define-the-dataset-id","position":8},{"hierarchy":{"lvl1":"Getting Started with Land Cover CCI Data","lvl2":"Step 3: Define the Dataset ID"},"content":"To work with a specific ESA CCI dataset, we need to specify its dataset ID. This unique identifier tells the toolbox which variable and product we want to access.\n\nIn this example, we are using a dataset from the Land Cover CCI project that provides annual Level 4 global land cover maps derived from multiple satellite sensors. The main variable in this dataset is lccs_class, which classifies the land surface according to the UN Land Cover Classification System (LCCS). This information is essential for applications in climate modelling, land use planning, biodiversity monitoring, and many other environmental studies.\n\nüìò A full list of dataset IDs can be retrieved from the store or found in the \n\nESA CCI Climate Toolbox documentation.\n\nWe will use the following dataset ID:\n\ndata_id = 'esacci.LC.yr.L4.LCCS.multi-sensor.multi-platform.Map.2-0-7.r1'\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/landcover-cci#step-3-define-the-dataset-id","position":9},{"hierarchy":{"lvl1":"Getting Started with Land Cover CCI Data","lvl2":"Step 4: Describe Dataset (Check Available Variables and Metadata)"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/landcover-cci#step-4-describe-dataset-check-available-variables-and-metadata","position":10},{"hierarchy":{"lvl1":"Getting Started with Land Cover CCI Data","lvl2":"Step 4: Describe Dataset (Check Available Variables and Metadata)"},"content":"Before loading the full dataset, it‚Äôs helpful to inspect the metadata to understand its structure. This includes:\n\nAvailable variables (e.g., lccs_class, uncertainty estimates)\n\nTemporal and spatial coverage\n\nData format and structure\n\nThis step ensures we know what the dataset contains and how to work with it. It also helps confirm that the variable we want to plot or analyze is actually included.\n\nüõ†Ô∏è Tip: You can use the description to verify variable names, dimensions (e.g., lat, lon, time), and time coverage.\n\nüìò More on dataset structure:üîó \n\nESA Climate Toolbox ‚Äì Data Access\n\ncci_store.describe_data(data_id)\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/landcover-cci#step-4-describe-dataset-check-available-variables-and-metadata","position":11},{"hierarchy":{"lvl1":"Getting Started with Land Cover CCI Data","lvl2":"Step 5: Check Open Parameters for the Dataset"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/landcover-cci#step-5-check-open-parameters-for-the-dataset","position":12},{"hierarchy":{"lvl1":"Getting Started with Land Cover CCI Data","lvl2":"Step 5: Check Open Parameters for the Dataset"},"content":"Before opening the dataset, we can inspect which parameters are supported by the Zarr opener (e.g., time_range, bbox, variable_names). This step helps ensure that we pass valid arguments when loading data and avoid errors.\n\nThe command below lists all expected input parameters and their allowed values for the selected dataset.\n\ncci_store.get_open_data_params_schema(data_id=data_id, opener_id='dataset:zarr:cciodp')\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/landcover-cci#step-5-check-open-parameters-for-the-dataset","position":13},{"hierarchy":{"lvl1":"Getting Started with Land Cover CCI Data","lvl2":"Step 6: Define Region, Time Range, and Variables of Interest"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/landcover-cci#step-6-define-region-time-range-and-variables-of-interest","position":14},{"hierarchy":{"lvl1":"Getting Started with Land Cover CCI Data","lvl2":"Step 6: Define Region, Time Range, and Variables of Interest"},"content":"Before opening the dataset, we define a few key parameters:\n\nTime range: the date(s) we want to load\n\nVariables: which data variable(s) to retrieve\n\n(Optional) Bounding box: spatial region of interest ‚Äî here we skip it to load the global dataset\n\nvariables = ['lccs_class']  # Variable to retrieve\nstart_date = '2015-01-01'    # Start and end date (same for a single timestep)\nend_date = '2015-01-01'\n# bbox = (-10.0, 35.0, 30.0, 60.0)  # Optional: restrict to a region like Europe\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/landcover-cci#step-6-define-region-time-range-and-variables-of-interest","position":15},{"hierarchy":{"lvl1":"Getting Started with Land Cover CCI Data","lvl2":"Step 7: Open the Dataset"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/landcover-cci#step-7-open-the-dataset","position":16},{"hierarchy":{"lvl1":"Getting Started with Land Cover CCI Data","lvl2":"Step 7: Open the Dataset"},"content":"Now we open the dataset using the selected parameters.The ESA Climate Toolbox will download only the necessary data (e.g., variable and time range).\nYou can always adjust the time range or variables to explore different slices of the dataset.\n\nland_cover_ds = cci_store.open_data(\n    data_id=data_id,\n    variable_names=variables,\n    time_range=[start_date, end_date]\n    # bbox=bbox  # Uncomment if regional selection is needed\n)\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/landcover-cci#step-7-open-the-dataset","position":17},{"hierarchy":{"lvl1":"Getting Started with Land Cover CCI Data","lvl2":"Step 8: Display Dataset Structure"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/landcover-cci#step-8-display-dataset-structure","position":18},{"hierarchy":{"lvl1":"Getting Started with Land Cover CCI Data","lvl2":"Step 8: Display Dataset Structure"},"content":"We print a summary of the opened dataset to inspect its structure, dimensions, variables, and metadata.This helps verify that the data was loaded correctly and shows what is available for analysis and visualization.\nThis step is useful to understand what the dataset contains before working with it further.\n\nprint(\"\\nOpened Dataset:\\n\", land_cover_ds)\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/landcover-cci#step-8-display-dataset-structure","position":19},{"hierarchy":{"lvl1":"Getting Started with Land Cover CCI Data","lvl2":"Step 9: Visualize Results"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/landcover-cci#step-9-visualize-results","position":20},{"hierarchy":{"lvl1":"Getting Started with Land Cover CCI Data","lvl2":"Step 9: Visualize Results"},"content":"We now create a simple map plot of the selected variable.This allows us to explore the spatial patterns of the data ‚Äî in this case, the Land Cover Classification for the selected day.\nFor more interactive and advanced visualizations, check out the \n\nESA Climate Toolbox or the \n\nToolbox documentation.\n\nimport matplotlib.pyplot as plt\nimport cartopy.crs as ccrs\nfrom matplotlib.colors import ListedColormap, BoundaryNorm\n\n# Define some example LCCS classes (you can expand as needed)\nclass_ids = [10, 20, 30, 40, 50, 60, 70, 80, 90, 100]\nclass_names = [\n    \"Cropland\", \"Forest (Evergreen)\", \"Forest (Deciduous)\", \"Shrubland\",\n    \"Grassland\", \"Urban\", \"Bare\", \"Snow/Ice\", \"Water\", \"Wetlands\"\n]\ncolors = [\n    \"#ffff64\", \"#1c701c\", \"#60b760\", \"#d0d000\",\n    \"#c0dc78\", \"#a02020\", \"#f0f0f0\", \"#ffffff\",\n    \"#4a90e2\", \"#70a0a0\"\n]\n\n# Create colormap and normalization\ncmap = ListedColormap(colors)\nnorm = BoundaryNorm([v - 0.5 for v in class_ids] + [class_ids[-1] + 0.5], cmap.N)\n\n# Reduce dimensions drastically ‚Äî just Central Europe for testing\nsmall_subset = land_cover_ds[\"lccs_class\"].isel(time=0).sel(\n    lat=slice(55, 45),\n    lon=slice(5, 15)\n)\n\n# Trigger loading only the small area\nsmall_subset_loaded = small_subset.load()\n\n# Get date for the title\ntime_str = land_cover_ds['time'].isel(time=0).dt.strftime('%d %B %Y').item()\n\n# Plot\nplt.figure(figsize=(10, 6))\nax = plt.axes(projection=ccrs.PlateCarree())\nimg = small_subset_loaded.plot(\n    ax=ax,\n    cmap=cmap,\n    norm=norm,\n    transform=ccrs.PlateCarree(),\n    add_colorbar=False\n)\nax.coastlines()\nax.set_title(\"Land Cover Classification ‚Äì \" + time_str)\n\n# Add custom legend\nfrom matplotlib.patches import Patch\nlegend_handles = [Patch(color=colors[i], label=class_names[i]) for i in range(len(class_ids))]\nplt.legend(handles=legend_handles, bbox_to_anchor=(1.05, 1), loc=\"upper left\")\n\nplt.tight_layout()\nplt.show()","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/landcover-cci#step-9-visualize-results","position":21},{"hierarchy":{"lvl1":"Getting Started with Ocean Colour CCI Data"},"type":"lvl1","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/oceancolour-cci","position":0},{"hierarchy":{"lvl1":"Getting Started with Ocean Colour CCI Data"},"content":"\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/oceancolour-cci","position":1},{"hierarchy":{"lvl1":"Getting Started with Ocean Colour CCI Data"},"type":"lvl1","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/oceancolour-cci#getting-started-with-ocean-colour-cci-data","position":2},{"hierarchy":{"lvl1":"Getting Started with Ocean Colour CCI Data"},"content":"\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/oceancolour-cci#getting-started-with-ocean-colour-cci-data","position":3},{"hierarchy":{"lvl1":"Getting Started with Ocean Colour CCI Data","lvl2":"1. Import Necessary Packages"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/oceancolour-cci#id-1-import-necessary-packages","position":4},{"hierarchy":{"lvl1":"Getting Started with Ocean Colour CCI Data","lvl2":"1. Import Necessary Packages"},"content":"In this section, we import the required Python packages to work with ESA Climate Change Initiative (CCI) data. Most notably, we use the \n\nESA Climate Toolbox which simplifies access, manipulation, and visualization of CCI datasets in Python.\n\nThese packages allow us to:\n\nAccess satellite-based climate data records from ESA.\n\nHandle geospatial and temporal dimensions efficiently.\n\nVisualize data with intuitive plotting tools.\n\nüìö For a broader introduction to the toolbox and how to install it, visit:üîó \n\nESA CCI Climate Toolbox Quick Startüîó \n\nESA Climate Data Toolbox Website\n\nfrom xcube.core.store import new_data_store\nfrom esa_climate_toolbox.core import get_op\nfrom esa_climate_toolbox.core import list_ecv_datasets\nfrom esa_climate_toolbox.core import get_store\nfrom esa_climate_toolbox.core import list_datasets\nfrom esa_climate_toolbox.ops import plot\nimport xarray as xr\nimport matplotlib.pyplot as plt\nimport warnings\nwarnings.filterwarnings(\"ignore\") # Suppressing warnings to keep notebook output clean\n%matplotlib inline\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/oceancolour-cci#id-1-import-necessary-packages","position":5},{"hierarchy":{"lvl1":"Getting Started with Ocean Colour CCI Data","lvl2":"Step 2: Connect to the ESA CCI Data Store"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/oceancolour-cci#step-2-connect-to-the-esa-cci-data-store","position":6},{"hierarchy":{"lvl1":"Getting Started with Ocean Colour CCI Data","lvl2":"Step 2: Connect to the ESA CCI Data Store"},"content":"The ESA Climate Toolbox provides direct access to the ESA Climate Data Store, which hosts harmonized satellite-based climate data records produced under the ESA Climate Change Initiative (CCI).\n\nIn this step, we establish a connection to the data store so we can browse and open datasets. This connection allows us to access data without having to download files manually ‚Äî a convenient way to explore and analyze large geospatial datasets in cloud-friendly formats such as Zarr or Kerchunk.\n\nThe data store includes a wide range of essential climate variables (ECVs), such as aerosols, land surface temperature, sea level, and soil moisture.\n\nüìò Learn more about available datasets:üîó \n\nESA Climate Data Toolbox ‚Äì Quick Start Guide\n\ncci_store = new_data_store(\"esa-cci\")\n# List all available data sets of an ECV\n# list_ecv_datasets(\"OC\")\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/oceancolour-cci#step-2-connect-to-the-esa-cci-data-store","position":7},{"hierarchy":{"lvl1":"Getting Started with Ocean Colour CCI Data","lvl2":"Step 3: Define the Dataset ID"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/oceancolour-cci#step-3-define-the-dataset-id","position":8},{"hierarchy":{"lvl1":"Getting Started with Ocean Colour CCI Data","lvl2":"Step 3: Define the Dataset ID"},"content":"To work with a specific ESA CCI dataset, we need to specify its dataset ID. This unique identifier tells the toolbox which variable and product we want to access.\n\nIn this example, we are using a dataset providing Chlorophyll-a concentration from multiple satellite sensors. Chlorophyll-a is a key indicator of phytoplankton biomass and ocean biological productivity ‚Äî essential for monitoring ocean health and understanding the global carbon cycle.\n\nTo explore other ESA CCI projects (e.g., Soil Moisture, Snow, Sea Level), simply replace the dataset ID and variable name accordingly.\n\nWe will use the following dataset ID:\n\ndata_id = 'esacci.OC.mon.L3S.OC_PRODUCTS.multi-sensor.multi-platform.MERGED.6-0.geographic'\n\nüìò A full list of dataset IDs can be retrieved from the store or found in the \n\nESA CCI Climate Toolbox documentation.\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/oceancolour-cci#step-3-define-the-dataset-id","position":9},{"hierarchy":{"lvl1":"Getting Started with Ocean Colour CCI Data","lvl2":"Step 4: Describe Dataset (Check Available Variables and Metadata)"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/oceancolour-cci#step-4-describe-dataset-check-available-variables-and-metadata","position":10},{"hierarchy":{"lvl1":"Getting Started with Ocean Colour CCI Data","lvl2":"Step 4: Describe Dataset (Check Available Variables and Metadata)"},"content":"Before loading the full dataset, it‚Äôs helpful to inspect the metadata to understand its structure. This includes:\n\nAvailable variables (e.g., chlorophyll-a (chlor_a), uncertainty estimates)\n\nTemporal and spatial coverage\n\nData format and structure\n\nThis step ensures we know what the dataset contains and how to work with it. It also helps confirm that the variable we want to plot or analyze is actually included.\n\nüõ†Ô∏è Tip: You can use the description to verify variable names, dimensions (e.g., lat, lon, time), and time coverage.\n\nüìò More on dataset structure:üîó \n\nESA Climate Toolbox ‚Äì Data Access\n\ncci_store.describe_data(data_id)\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/oceancolour-cci#step-4-describe-dataset-check-available-variables-and-metadata","position":11},{"hierarchy":{"lvl1":"Getting Started with Ocean Colour CCI Data","lvl2":"Step 5: Check Open Parameters for the Dataset"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/oceancolour-cci#step-5-check-open-parameters-for-the-dataset","position":12},{"hierarchy":{"lvl1":"Getting Started with Ocean Colour CCI Data","lvl2":"Step 5: Check Open Parameters for the Dataset"},"content":"Before opening the dataset, we can inspect which parameters are supported by the Zarr opener (e.g., time_range, bbox, variable_names). This step helps ensure that we pass valid arguments when loading data and avoid errors.\n\nThe command below lists all expected input parameters and their allowed values for the selected dataset.\n\ncci_store.get_open_data_params_schema(data_id=data_id, opener_id='dataset:zarr:cciodp')\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/oceancolour-cci#step-5-check-open-parameters-for-the-dataset","position":13},{"hierarchy":{"lvl1":"Getting Started with Ocean Colour CCI Data","lvl2":"Step 6: Define Region, Time Range, and Variables of Interest"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/oceancolour-cci#step-6-define-region-time-range-and-variables-of-interest","position":14},{"hierarchy":{"lvl1":"Getting Started with Ocean Colour CCI Data","lvl2":"Step 6: Define Region, Time Range, and Variables of Interest"},"content":"Before opening the dataset, we define a few key parameters:\n\nTime range: the date(s) we want to load\n\nVariables: which data variable(s) to retrieve\n\n(Optional) Bounding box: spatial region of interest ‚Äî here we skip it to load the global dataset\n\nvariables = ['chlor_a']  # Variable to retrieve\nstart_date = '2022-06-01'    # Start and end date (same for a single timestep)\nend_date = '2022-06-30'\n# bbox = (-10.0, 35.0, 30.0, 60.0)  # Optional: restrict to a region like Europe\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/oceancolour-cci#step-6-define-region-time-range-and-variables-of-interest","position":15},{"hierarchy":{"lvl1":"Getting Started with Ocean Colour CCI Data","lvl2":"Step 7: Open the Dataset"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/oceancolour-cci#step-7-open-the-dataset","position":16},{"hierarchy":{"lvl1":"Getting Started with Ocean Colour CCI Data","lvl2":"Step 7: Open the Dataset"},"content":"Now we open the dataset using the selected parameters.The ESA Climate Toolbox will download only the necessary data (e.g., variable and time range).\nYou can always adjust the time range or variables to explore different slices of the dataset.\n\noc_ds = cci_store.open_data(\n    data_id=data_id,\n    variable_names=variables,\n    time_range=[start_date, end_date]\n    # bbox=bbox  # Uncomment if regional selection is needed\n)\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/oceancolour-cci#step-7-open-the-dataset","position":17},{"hierarchy":{"lvl1":"Getting Started with Ocean Colour CCI Data","lvl2":"Step 8: Display Dataset Structure"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/oceancolour-cci#step-8-display-dataset-structure","position":18},{"hierarchy":{"lvl1":"Getting Started with Ocean Colour CCI Data","lvl2":"Step 8: Display Dataset Structure"},"content":"We print a summary of the opened dataset to inspect its structure, dimensions, variables, and metadata.This helps verify that the data was loaded correctly and shows what is available for analysis and visualization.\nThis step is useful to understand what the dataset contains before working with it further.\n\nprint(\"\\nOpened Dataset:\\n\", oc_ds)\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/oceancolour-cci#step-8-display-dataset-structure","position":19},{"hierarchy":{"lvl1":"Getting Started with Ocean Colour CCI Data","lvl2":"Step 9: Visualize Results"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/oceancolour-cci#step-9-visualize-results","position":20},{"hierarchy":{"lvl1":"Getting Started with Ocean Colour CCI Data","lvl2":"Step 9: Visualize Results"},"content":"We now create a simple map plot of the selected variable.This allows us to explore the spatial patterns of the data ‚Äî in this case, the chlorophyll-a, for the selected day.\nFor more interactive and advanced visualizations, check out the \n\nESA Climate Toolbox or the \n\nToolbox documentation.\n\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport cartopy.crs as ccrs\n\n# Extract and load the chlorophyll-a data\nchlor_a = oc_ds[\"chlor_a\"].isel(time=0).squeeze().load()\nlat = oc_ds[\"lat\"].values\nlon = oc_ds[\"lon\"].values\n\n# Get date for the title\ntime_str = oc_ds['time'].isel(time=0).dt.strftime('%d %B %Y').item()\n\n# Mask invalid or zero/negative values for better visualization\nchlor_a = chlor_a.where(chlor_a > 0)\n\n# Plotting\nfig = plt.figure(figsize=(12, 5))\nax = plt.axes(projection=ccrs.PlateCarree())\n\nmesh = ax.pcolormesh(\n    lon, lat, np.log10(chlor_a),\n    cmap=\"viridis\", vmin=-2, vmax=1  # log10 scale of chlorophyll-a in mg/m¬≥\n)\nax.coastlines()\nplt.colorbar(mesh, ax=ax, label=\"log10(Chlorophyll-a) [log10(mg/m¬≥)]\")\nplt.title(\"Chlorophyll-a Concentration - \" + time_str)\nplt.tight_layout()\nplt.show()","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/oceancolour-cci#step-9-visualize-results","position":21},{"hierarchy":{"lvl1":"Getting Started with Ozone CCI Data"},"type":"lvl1","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/ozone-cci","position":0},{"hierarchy":{"lvl1":"Getting Started with Ozone CCI Data"},"content":"\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/ozone-cci","position":1},{"hierarchy":{"lvl1":"Getting Started with Ozone CCI Data"},"type":"lvl1","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/ozone-cci#getting-started-with-ozone-cci-data","position":2},{"hierarchy":{"lvl1":"Getting Started with Ozone CCI Data"},"content":"\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/ozone-cci#getting-started-with-ozone-cci-data","position":3},{"hierarchy":{"lvl1":"Getting Started with Ozone CCI Data","lvl2":"1. Import Necessary Packages"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/ozone-cci#id-1-import-necessary-packages","position":4},{"hierarchy":{"lvl1":"Getting Started with Ozone CCI Data","lvl2":"1. Import Necessary Packages"},"content":"In this section, we import the required Python packages to work with ESA Climate Change Initiative (CCI) data. Most notably, we use the \n\nESA Climate Toolbox which simplifies access, manipulation, and visualization of CCI datasets in Python.\n\nThese packages allow us to:\n\nAccess satellite-based climate data records from ESA.\n\nHandle geospatial and temporal dimensions efficiently.\n\nVisualize data with intuitive plotting tools.\n\nüìö For a broader introduction to the toolbox and how to install it, visit:üîó \n\nESA CCI Climate Toolbox Quick Startüîó \n\nESA Climate Data Toolbox Website\n\nfrom xcube.core.store import new_data_store\nfrom esa_climate_toolbox.core import get_op\nfrom esa_climate_toolbox.core import list_ecv_datasets\nfrom esa_climate_toolbox.core import get_store\nfrom esa_climate_toolbox.core import list_datasets\nfrom esa_climate_toolbox.ops import plot\nimport xarray as xr\nimport matplotlib.pyplot as plt\nimport warnings\nwarnings.filterwarnings(\"ignore\") # Suppressing warnings to keep notebook output clean\n%matplotlib inline\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/ozone-cci#id-1-import-necessary-packages","position":5},{"hierarchy":{"lvl1":"Getting Started with Ozone CCI Data","lvl2":"Step 2: Connect to the ESA CCI Data Store"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/ozone-cci#step-2-connect-to-the-esa-cci-data-store","position":6},{"hierarchy":{"lvl1":"Getting Started with Ozone CCI Data","lvl2":"Step 2: Connect to the ESA CCI Data Store"},"content":"The ESA Climate Toolbox provides direct access to the ESA Climate Data Store, which hosts harmonized satellite-based climate data records produced under the ESA Climate Change Initiative (CCI).\n\nIn this step, we establish a connection to the data store so we can browse and open datasets. This connection allows us to access data without having to download files manually ‚Äî a convenient way to explore and analyze large geospatial datasets in cloud-friendly formats such as Zarr or Kerchunk.\n\nThe data store includes a wide range of essential climate variables (ECVs), such as aerosols, land surface temperature, sea level, and soil moisture.\n\nüìò Learn more about available datasets:üîó \n\nESA Climate Data Toolbox ‚Äì Quick Start Guide\n\ncci_store = new_data_store(\"esa-cci\")\n# List all available data sets of an ECV\n# list_ecv_datasets(\"Ozone\")\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/ozone-cci#step-2-connect-to-the-esa-cci-data-store","position":7},{"hierarchy":{"lvl1":"Getting Started with Ozone CCI Data","lvl2":"Step 3: Define the Dataset ID"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/ozone-cci#step-3-define-the-dataset-id","position":8},{"hierarchy":{"lvl1":"Getting Started with Ozone CCI Data","lvl2":"Step 3: Define the Dataset ID"},"content":"To work with a specific ESA CCI dataset, we need to specify its dataset ID. This unique identifier tells the toolbox which variable and product we want to access.\n\nIn this example, we are using a dataset from the Ozone CCI project that provides Level 3S daily total column ozone data, derived from multiple satellite sensors (e.g., GOME, SCIAMACHY, GOME-2). The main variable of interest is:\n\natmosphere_mole_content_of_ozone, which represents the total column amount of ozone in the atmosphere, measured in mol/m¬≤.\n\nThis variable is important for monitoring the ozone layer, tracking ozone depletion, and understanding its role in protecting life on Earth from harmful ultraviolet radiation.\n\nFor other ESA CCI projects (e.g., Greenhouse Gases, Fire, Soil Moisture), simply replace the dataset ID accordingly.\nüìò A full list of dataset IDs can be retrieved from the store or found in the \n\nESA CCI Climate Toolbox documentation.\n\nWe will use the following dataset ID:\n\ndata_id = 'esacci.OZONE.day.L3S.TC.multi-sensor.multi-platform.MERGED.fv0100.r1'\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/ozone-cci#step-3-define-the-dataset-id","position":9},{"hierarchy":{"lvl1":"Getting Started with Ozone CCI Data","lvl2":"Step 4: Describe Dataset (Check Available Variables and Metadata)"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/ozone-cci#step-4-describe-dataset-check-available-variables-and-metadata","position":10},{"hierarchy":{"lvl1":"Getting Started with Ozone CCI Data","lvl2":"Step 4: Describe Dataset (Check Available Variables and Metadata)"},"content":"Before loading the full dataset, it‚Äôs helpful to inspect the metadata to understand its structure. This includes:\n\nAvailable variables (e.g., AOD, uncertainty estimates)\n\nTemporal and spatial coverage\n\nData format and structure\n\nThis step ensures we know what the dataset contains and how to work with it. It also helps confirm that the variable we want to plot or analyze is actually included.\n\nüõ†Ô∏è Tip: You can use the description to verify variable names, dimensions (e.g., lat, lon, time), and time coverage.\n\nüìò More on dataset structure:üîó \n\nESA Climate Toolbox ‚Äì Data Access\n\ncci_store.describe_data(data_id)\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/ozone-cci#step-4-describe-dataset-check-available-variables-and-metadata","position":11},{"hierarchy":{"lvl1":"Getting Started with Ozone CCI Data","lvl2":"Step 5: Check Open Parameters for the Dataset"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/ozone-cci#step-5-check-open-parameters-for-the-dataset","position":12},{"hierarchy":{"lvl1":"Getting Started with Ozone CCI Data","lvl2":"Step 5: Check Open Parameters for the Dataset"},"content":"Before opening the dataset, we can inspect which parameters are supported by the Zarr opener (e.g., time_range, bbox, variable_names). This step helps ensure that we pass valid arguments when loading data and avoid errors.\n\nThe command below lists all expected input parameters and their allowed values for the selected dataset.\n\ncci_store.get_open_data_params_schema(data_id=data_id, opener_id='dataset:zarr:cciodp')\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/ozone-cci#step-5-check-open-parameters-for-the-dataset","position":13},{"hierarchy":{"lvl1":"Getting Started with Ozone CCI Data","lvl2":"Step 6: Define Region, Time Range, and Variables of Interest"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/ozone-cci#step-6-define-region-time-range-and-variables-of-interest","position":14},{"hierarchy":{"lvl1":"Getting Started with Ozone CCI Data","lvl2":"Step 6: Define Region, Time Range, and Variables of Interest"},"content":"Before opening the dataset, we define a few key parameters:\n\nTime range: the date(s) we want to load\n\nVariables: which data variable(s) to retrieve\n\n(Optional) Bounding box: spatial region of interest ‚Äî here we skip it to load the global dataset\n\nvariables = ['atmosphere_mole_content_of_ozone']  # Variable to retrieve\nstart_date = '2011-06-01'    # Start and end date (same for a single timestep)\nend_date = '2011-06-29'\n# bbox = (-10.0, 35.0, 30.0, 60.0)  # Optional: restrict to a region like Europe\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/ozone-cci#step-6-define-region-time-range-and-variables-of-interest","position":15},{"hierarchy":{"lvl1":"Getting Started with Ozone CCI Data","lvl2":"Step 7: Open the Dataset"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/ozone-cci#step-7-open-the-dataset","position":16},{"hierarchy":{"lvl1":"Getting Started with Ozone CCI Data","lvl2":"Step 7: Open the Dataset"},"content":"Now we open the dataset using the selected parameters.The ESA Climate Toolbox will download only the necessary data (e.g., variable and time range).\nYou can always adjust the time range or variables to explore different slices of the dataset.\n\nozone_ds = cci_store.open_data(\n    data_id=data_id,\n    variable_names=variables,\n    time_range=[start_date, end_date]\n    # bbox=bbox  # Uncomment if regional selection is needed\n)\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/ozone-cci#step-7-open-the-dataset","position":17},{"hierarchy":{"lvl1":"Getting Started with Ozone CCI Data","lvl2":"Step 8: Display Dataset Structure"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/ozone-cci#step-8-display-dataset-structure","position":18},{"hierarchy":{"lvl1":"Getting Started with Ozone CCI Data","lvl2":"Step 8: Display Dataset Structure"},"content":"We print a summary of the opened dataset to inspect its structure, dimensions, variables, and metadata.This helps verify that the data was loaded correctly and shows what is available for analysis and visualization.\nThis step is useful to understand what the dataset contains before working with it further.\n\nprint(\"\\nOpened Dataset:\\n\", ozone_ds)\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/ozone-cci#step-8-display-dataset-structure","position":19},{"hierarchy":{"lvl1":"Getting Started with Ozone CCI Data","lvl2":"Step 9: Visualize Results"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/ozone-cci#step-9-visualize-results","position":20},{"hierarchy":{"lvl1":"Getting Started with Ozone CCI Data","lvl2":"Step 9: Visualize Results"},"content":"We now create a simple map plot of the selected variable.This allows us to explore the spatial patterns of the data ‚Äî in this case, the total column of ozone for the selected day.\nFor more interactive and advanced visualizations, check out the \n\nESA Climate Toolbox or the \n\nToolbox documentation.\n\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport cartopy.crs as ccrs\n\n# Select and mask values below 0\nozone = ozone_ds[\"atmosphere_mole_content_of_ozone\"].isel(time=0)\nozone_masked = ozone.where(ozone >= 0)\n\n# Get date for the title\ntime_str = land_cover_ds['time'].isel(time=0).dt.strftime('%d %B %Y').item()\n\nplt.figure(figsize=(12, 5))\nax = plt.axes(projection=ccrs.PlateCarree())\nozone_masked.plot(\n    ax=ax,\n    transform=ccrs.PlateCarree(),\n    cmap=\"viridis\",       # Can be changed to \"plasma\", \"cividis\", etc.\n    robust=True,\n    cbar_kwargs={\"label\": \"Total Column Ozone (mol/m¬≤)\"}\n)\n\nax.coastlines()\nax.set_title(f\"Total Column Ozone ‚Äì \" + time_str)\nplt.tight_layout()\nplt.show()","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/ozone-cci#step-9-visualize-results","position":21},{"hierarchy":{"lvl1":"Getting Started with Permafrost CCI Data"},"type":"lvl1","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/permafrost-cci","position":0},{"hierarchy":{"lvl1":"Getting Started with Permafrost CCI Data"},"content":"\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/permafrost-cci","position":1},{"hierarchy":{"lvl1":"Getting Started with Permafrost CCI Data"},"type":"lvl1","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/permafrost-cci#getting-started-with-permafrost-cci-data","position":2},{"hierarchy":{"lvl1":"Getting Started with Permafrost CCI Data"},"content":"\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/permafrost-cci#getting-started-with-permafrost-cci-data","position":3},{"hierarchy":{"lvl1":"Getting Started with Permafrost CCI Data","lvl2":"1. Import Necessary Packages"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/permafrost-cci#id-1-import-necessary-packages","position":4},{"hierarchy":{"lvl1":"Getting Started with Permafrost CCI Data","lvl2":"1. Import Necessary Packages"},"content":"In this section, we import the required Python packages to work with ESA Climate Change Initiative (CCI) data. Most notably, we use the \n\nESA Climate Toolbox which simplifies access, manipulation, and visualization of CCI datasets in Python.\n\nThese packages allow us to:\n\nAccess satellite-based climate data records from ESA.\n\nHandle geospatial and temporal dimensions efficiently.\n\nVisualize data with intuitive plotting tools.\n\nüìö For a broader introduction to the toolbox and how to install it, visit:üîó \n\nESA CCI Climate Toolbox Quick Startüîó \n\nESA Climate Data Toolbox Website\n\nfrom xcube.core.store import new_data_store\nfrom esa_climate_toolbox.core import get_op\nfrom esa_climate_toolbox.core import list_ecv_datasets\nfrom esa_climate_toolbox.core import get_store\nfrom esa_climate_toolbox.core import list_datasets\nfrom esa_climate_toolbox.ops import plot\nimport xarray as xr\nimport matplotlib.pyplot as plt\nimport warnings\nwarnings.filterwarnings(\"ignore\") # Suppressing warnings to keep notebook output clean\n%matplotlib inline\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/permafrost-cci#id-1-import-necessary-packages","position":5},{"hierarchy":{"lvl1":"Getting Started with Permafrost CCI Data","lvl2":"Step 2: Connect to the ESA CCI Data Store"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/permafrost-cci#step-2-connect-to-the-esa-cci-data-store","position":6},{"hierarchy":{"lvl1":"Getting Started with Permafrost CCI Data","lvl2":"Step 2: Connect to the ESA CCI Data Store"},"content":"The ESA Climate Toolbox provides direct access to the ESA Climate Data Store, which hosts harmonized satellite-based climate data records produced under the ESA Climate Change Initiative (CCI).\n\nIn this step, we establish a connection to the data store so we can browse and open datasets. This connection allows us to access data without having to download files manually ‚Äî a convenient way to explore and analyze large geospatial datasets in cloud-friendly formats such as Zarr or Kerchunk.\n\nThe data store includes a wide range of essential climate variables (ECVs), such as aerosols, land surface temperature, sea level, and soil moisture.\n\nüìò Learn more about available datasets:üîó \n\nESA Climate Data Toolbox ‚Äì Quick Start Guide\n\ncci_store = new_data_store(\"esa-cci\")\n# List all available data sets of an ECV\n# list_ecv_datasets(\"Permafrost\")\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/permafrost-cci#step-2-connect-to-the-esa-cci-data-store","position":7},{"hierarchy":{"lvl1":"Getting Started with Permafrost CCI Data","lvl2":"Step 3: Define the Dataset ID"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/permafrost-cci#step-3-define-the-dataset-id","position":8},{"hierarchy":{"lvl1":"Getting Started with Permafrost CCI Data","lvl2":"Step 3: Define the Dataset ID"},"content":"To work with a specific ESA CCI dataset, we need to specify its dataset ID. This unique identifier tells the toolbox which variable and product we want to access.\n\nIn this example, we are using a dataset from the Permafrost CCI project that provides yearly estimates of permafrost extent and ground temperature, derived from a combination of satellite data and land surface modeling. These products are key for monitoring the stability of permafrost regions and understanding their role in the carbon cycle and climate feedback mechanisms.\n\nWe will use the following dataset ID:\n\ndata_id = 'esacci.PERMAFROST.yr.L4.PFR.multi-sensor.multi-platform.ERA5_MODISLST_BIASCORRECTED.04-0.r1'\n\nüìò A full list of dataset IDs can be retrieved from the store or found in the \n\nESA CCI Climate Toolbox documentation.\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/permafrost-cci#step-3-define-the-dataset-id","position":9},{"hierarchy":{"lvl1":"Getting Started with Permafrost CCI Data","lvl2":"Step 4: Describe Dataset (Check Available Variables and Metadata)"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/permafrost-cci#step-4-describe-dataset-check-available-variables-and-metadata","position":10},{"hierarchy":{"lvl1":"Getting Started with Permafrost CCI Data","lvl2":"Step 4: Describe Dataset (Check Available Variables and Metadata)"},"content":"Before loading the full dataset, it‚Äôs helpful to inspect the metadata to understand its structure. This includes:\n\nAvailable variables (e.g., PFR, uncertainty estimates)\n\nTemporal and spatial coverage\n\nData format and structure\n\nThis step ensures we know what the dataset contains and how to work with it. It also helps confirm that the variable we want to plot or analyze is actually included.\n\nüõ†Ô∏è Tip: You can use the description to verify variable names, dimensions (e.g., lat, lon, time), and time coverage.\n\nüìò More on dataset structure:üîó \n\nESA Climate Toolbox ‚Äì Data Access\n\ncci_store.describe_data(data_id)\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/permafrost-cci#step-4-describe-dataset-check-available-variables-and-metadata","position":11},{"hierarchy":{"lvl1":"Getting Started with Permafrost CCI Data","lvl2":"Step 5: Check Open Parameters for the Dataset"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/permafrost-cci#step-5-check-open-parameters-for-the-dataset","position":12},{"hierarchy":{"lvl1":"Getting Started with Permafrost CCI Data","lvl2":"Step 5: Check Open Parameters for the Dataset"},"content":"Before opening the dataset, we can inspect which parameters are supported by the Zarr opener (e.g., time_range, bbox, variable_names). This step helps ensure that we pass valid arguments when loading data and avoid errors.\n\nThe command below lists all expected input parameters and their allowed values for the selected dataset.\n\ncci_store.get_open_data_params_schema(data_id=data_id, opener_id='dataset:zarr:cciodp')\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/permafrost-cci#step-5-check-open-parameters-for-the-dataset","position":13},{"hierarchy":{"lvl1":"Getting Started with Permafrost CCI Data","lvl2":"Step 6: Define Region, Time Range, and Variables of Interest"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/permafrost-cci#step-6-define-region-time-range-and-variables-of-interest","position":14},{"hierarchy":{"lvl1":"Getting Started with Permafrost CCI Data","lvl2":"Step 6: Define Region, Time Range, and Variables of Interest"},"content":"Before opening the dataset, we define a few key parameters:\n\nTime range: the date(s) we want to load\n\nVariables: which data variable(s) to retrieve\n\n(Optional) Bounding box: spatial region of interest ‚Äî here we skip it to load the global dataset\n\nvariables = ['PFR']  # Variable to retrieve\nstart_date = '2001-01-01'    # Start and end date (same for a single timestep)\nend_date = '2001-12-31'\n# bbox = (-10.0, 35.0, 30.0, 60.0)  # Optional: restrict to a region like Europe / no option for this dataset\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/permafrost-cci#step-6-define-region-time-range-and-variables-of-interest","position":15},{"hierarchy":{"lvl1":"Getting Started with Permafrost CCI Data","lvl2":"Step 7: Open the Dataset"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/permafrost-cci#step-7-open-the-dataset","position":16},{"hierarchy":{"lvl1":"Getting Started with Permafrost CCI Data","lvl2":"Step 7: Open the Dataset"},"content":"Now we open the dataset using the selected parameters.The ESA Climate Toolbox will download only the necessary data (e.g., variable and time range).\nYou can always adjust the time range or variables to explore different slices of the dataset.\n\npfr_ds = cci_store.open_data(\n    data_id=data_id,\n    variable_names=variables,\n    time_range=[start_date, end_date]\n)\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/permafrost-cci#step-7-open-the-dataset","position":17},{"hierarchy":{"lvl1":"Getting Started with Permafrost CCI Data","lvl2":"Step 8: Display Dataset Structure"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/permafrost-cci#step-8-display-dataset-structure","position":18},{"hierarchy":{"lvl1":"Getting Started with Permafrost CCI Data","lvl2":"Step 8: Display Dataset Structure"},"content":"We print a summary of the opened dataset to inspect its structure, dimensions, variables, and metadata.This helps verify that the data was loaded correctly and shows what is available for analysis and visualization.\nThis step is useful to understand what the dataset contains before working with it further.\n\nprint(\"\\nOpened Dataset:\\n\", pfr_ds)\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/permafrost-cci#step-8-display-dataset-structure","position":19},{"hierarchy":{"lvl1":"Getting Started with Permafrost CCI Data","lvl2":"Step 9: Visualize Results"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/permafrost-cci#step-9-visualize-results","position":20},{"hierarchy":{"lvl1":"Getting Started with Permafrost CCI Data","lvl2":"Step 9: Visualize Results"},"content":"We now create a simple map plot of the selected variable.This allows us to explore the spatial patterns of the data ‚Äî in this case, the Permafrost Fraction (PFR) for the selected day.\nFor more interactive and advanced visualizations, check out the \n\nESA Climate Toolbox or the \n\nToolbox documentation.\n\nimport matplotlib.pyplot as plt\nimport cartopy.crs as ccrs\n\n# Define the region of interest ‚Äî here: Siberia (change as needed)\nlat_min, lat_max = 60, 75\nlon_min, lon_max = 90, 150\n\n# Subset the data *before* loading\npfr_subset = pfr_ds[\"PFR\"].isel(time=0).sel(\n    lat=slice(lat_min, lat_max),\n    lon=slice(lon_min, lon_max)\n).load()\n\n# Get date for the title\ntime_str = pfr_ds['time'].isel(time=0).dt.strftime('%d %B %Y').item()\n\n# Get the coordinates\nlat = pfr_subset[\"lat\"].values\nlon = pfr_subset[\"lon\"].values\n\n# Plot\nfig = plt.figure(figsize=(10, 6))\nax = plt.axes(projection=ccrs.PlateCarree())\n\nmesh = ax.pcolormesh(\n    lon, lat, pfr_subset,\n    cmap=\"YlGnBu\",\n    transform=ccrs.PlateCarree(),\n    vmin=0, vmax=100\n)\n\nax.coastlines()\nplt.colorbar(mesh, ax=ax, label=\"Permafrost Fraction (%)\", orientation=\"horizontal\")\nplt.title(\"Permafrost Fraction ‚Äì Regional Subset - \" + time_str)\nplt.tight_layout()\nplt.show()","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/permafrost-cci#step-9-visualize-results","position":21},{"hierarchy":{"lvl1":"Getting Started with Sea Surface Salinity CCI Data"},"type":"lvl1","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sss-cci","position":0},{"hierarchy":{"lvl1":"Getting Started with Sea Surface Salinity CCI Data"},"content":"\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sss-cci","position":1},{"hierarchy":{"lvl1":"Getting Started with Sea Surface Salinity CCI Data"},"type":"lvl1","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sss-cci#getting-started-with-sea-surface-salinity-cci-data","position":2},{"hierarchy":{"lvl1":"Getting Started with Sea Surface Salinity CCI Data"},"content":"\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sss-cci#getting-started-with-sea-surface-salinity-cci-data","position":3},{"hierarchy":{"lvl1":"Getting Started with Sea Surface Salinity CCI Data","lvl2":"1. Import Necessary Packages"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sss-cci#id-1-import-necessary-packages","position":4},{"hierarchy":{"lvl1":"Getting Started with Sea Surface Salinity CCI Data","lvl2":"1. Import Necessary Packages"},"content":"In this section, we import the required Python packages to work with ESA Climate Change Initiative (CCI) data. Most notably, we use the \n\nESA Climate Toolbox which simplifies access, manipulation, and visualization of CCI datasets in Python.\n\nThese packages allow us to:\n\nAccess satellite-based climate data records from ESA.\n\nHandle geospatial and temporal dimensions efficiently.\n\nVisualize data with intuitive plotting tools.\n\nüìö For a broader introduction to the toolbox and how to install it, visit:üîó \n\nESA CCI Climate Toolbox Quick Startüîó \n\nESA Climate Data Toolbox Website\n\nfrom xcube.core.store import new_data_store\nfrom esa_climate_toolbox.core import get_op\nfrom esa_climate_toolbox.core import list_ecv_datasets\nfrom esa_climate_toolbox.core import get_store\nfrom esa_climate_toolbox.core import list_datasets\nfrom esa_climate_toolbox.ops import plot\nimport xarray as xr\nimport matplotlib.pyplot as plt\nimport warnings\nwarnings.filterwarnings(\"ignore\") # Suppressing warnings to keep notebook output clean\n%matplotlib inline\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sss-cci#id-1-import-necessary-packages","position":5},{"hierarchy":{"lvl1":"Getting Started with Sea Surface Salinity CCI Data","lvl2":"Step 2: Connect to the ESA CCI Data Store"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sss-cci#step-2-connect-to-the-esa-cci-data-store","position":6},{"hierarchy":{"lvl1":"Getting Started with Sea Surface Salinity CCI Data","lvl2":"Step 2: Connect to the ESA CCI Data Store"},"content":"The ESA Climate Toolbox provides direct access to the ESA Climate Data Store, which hosts harmonized satellite-based climate data records produced under the ESA Climate Change Initiative (CCI).\n\nIn this step, we establish a connection to the data store so we can browse and open datasets. This connection allows us to access data without having to download files manually ‚Äî a convenient way to explore and analyze large geospatial datasets in cloud-friendly formats such as Zarr or Kerchunk.\n\nThe data store includes a wide range of essential climate variables (ECVs), such as aerosols, land surface temperature, sea level, and soil moisture.\n\nüìò Learn more about available datasets:üîó \n\nESA Climate Data Toolbox ‚Äì Quick Start Guide\n\ncci_store = new_data_store(\"esa-cci\")\n# List all available data sets of an ECV\n# list_ecv_datasets(\"SEASURFACESALINITY\")\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sss-cci#step-2-connect-to-the-esa-cci-data-store","position":7},{"hierarchy":{"lvl1":"Getting Started with Sea Surface Salinity CCI Data","lvl2":"Step 3: Define the Dataset ID"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sss-cci#step-3-define-the-dataset-id","position":8},{"hierarchy":{"lvl1":"Getting Started with Sea Surface Salinity CCI Data","lvl2":"Step 3: Define the Dataset ID"},"content":"To work with a specific ESA CCI dataset, we need to specify its dataset ID. This unique identifier tells the toolbox which variable and product we want to access.\n\nIn this example, we are using a dataset providing Sea Surface Salinity (SSS) from multiple sensors. SSS is a key variable for understanding ocean circulation, freshwater fluxes, and the global water cycle. The dataset provides 15-day averaged salinity values at the sea surface level.\n\nTo explore other ESA CCI projects (e.g., Water Vapour, Land Surface Temperature, Soil Moisture), simply replace the dataset ID and variable name accordingly.\n\nWe will use the following dataset ID:\n\ndata_id = 'esacci.SEASURFACESALINITY.15-days.L4.SSS.multi-sensor.multi-platform.MERGED_OI_Monthly_CENTRED_15Day_25km.2-31.r1'\n\nüìò A full list of dataset IDs can be retrieved from the store or found in the \n\nESA CCI Climate Toolbox documentation.\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sss-cci#step-3-define-the-dataset-id","position":9},{"hierarchy":{"lvl1":"Getting Started with Sea Surface Salinity CCI Data","lvl2":"Step 4: Describe Dataset (Check Available Variables and Metadata)"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sss-cci#step-4-describe-dataset-check-available-variables-and-metadata","position":10},{"hierarchy":{"lvl1":"Getting Started with Sea Surface Salinity CCI Data","lvl2":"Step 4: Describe Dataset (Check Available Variables and Metadata)"},"content":"Before loading the full dataset, it‚Äôs helpful to inspect the metadata to understand its structure. This includes:\n\nAvailable variables (e.g., SSS, uncertainty estimates)\n\nTemporal and spatial coverage\n\nData format and structure\n\nThis step ensures we know what the dataset contains and how to work with it. It also helps confirm that the variable we want to plot or analyze is actually included.\n\nüõ†Ô∏è Tip: You can use the description to verify variable names, dimensions (e.g., lat, lon, time), and time coverage.\n\nüìò More on dataset structure:üîó \n\nESA Climate Toolbox ‚Äì Data Access\n\ncci_store.describe_data(data_id)\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sss-cci#step-4-describe-dataset-check-available-variables-and-metadata","position":11},{"hierarchy":{"lvl1":"Getting Started with Sea Surface Salinity CCI Data","lvl2":"Step 5: Check Open Parameters for the Dataset"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sss-cci#step-5-check-open-parameters-for-the-dataset","position":12},{"hierarchy":{"lvl1":"Getting Started with Sea Surface Salinity CCI Data","lvl2":"Step 5: Check Open Parameters for the Dataset"},"content":"Before opening the dataset, we can inspect which parameters are supported by the Zarr opener (e.g., time_range, bbox, variable_names). This step helps ensure that we pass valid arguments when loading data and avoid errors.\n\nThe command below lists all expected input parameters and their allowed values for the selected dataset.\n\ncci_store.get_open_data_params_schema(data_id=data_id, opener_id='dataset:zarr:cciodp')\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sss-cci#step-5-check-open-parameters-for-the-dataset","position":13},{"hierarchy":{"lvl1":"Getting Started with Sea Surface Salinity CCI Data","lvl2":"Step 6: Define Region, Time Range, and Variables of Interest"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sss-cci#step-6-define-region-time-range-and-variables-of-interest","position":14},{"hierarchy":{"lvl1":"Getting Started with Sea Surface Salinity CCI Data","lvl2":"Step 6: Define Region, Time Range, and Variables of Interest"},"content":"Before opening the dataset, we define a few key parameters:\n\nTime range: the date(s) we want to load\n\nVariables: which data variable(s) to retrieve\n\n(Optional) Bounding box: spatial region of interest ‚Äî here we skip it to load the global dataset\n\nvariables = ['sss']  # Variable to retrieve\nstart_date = '2019-06-01'    # Start and end date (same for a single timestep)\nend_date = '2019-06-30'\n# bbox = (-10.0, 35.0, 30.0, 60.0)  # Optional: restrict to a region like Europe\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sss-cci#step-6-define-region-time-range-and-variables-of-interest","position":15},{"hierarchy":{"lvl1":"Getting Started with Sea Surface Salinity CCI Data","lvl2":"Step 7: Open the Dataset"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sss-cci#step-7-open-the-dataset","position":16},{"hierarchy":{"lvl1":"Getting Started with Sea Surface Salinity CCI Data","lvl2":"Step 7: Open the Dataset"},"content":"Now we open the dataset using the selected parameters.The ESA Climate Toolbox will download only the necessary data (e.g., variable and time range).\nYou can always adjust the time range or variables to explore different slices of the dataset.\n\nsss_ds = cci_store.open_data(\n    data_id=data_id,\n    variable_names=variables,\n    time_range=[start_date, end_date]\n    # bbox=bbox  # Uncomment if regional selection is needed\n)\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sss-cci#step-7-open-the-dataset","position":17},{"hierarchy":{"lvl1":"Getting Started with Sea Surface Salinity CCI Data","lvl2":"Step 8: Display Dataset Structure"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sss-cci#step-8-display-dataset-structure","position":18},{"hierarchy":{"lvl1":"Getting Started with Sea Surface Salinity CCI Data","lvl2":"Step 8: Display Dataset Structure"},"content":"We print a summary of the opened dataset to inspect its structure, dimensions, variables, and metadata.This helps verify that the data was loaded correctly and shows what is available for analysis and visualization.\nThis step is useful to understand what the dataset contains before working with it further.\n\nprint(\"\\nOpened Dataset:\\n\", sss_ds)\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sss-cci#step-8-display-dataset-structure","position":19},{"hierarchy":{"lvl1":"Getting Started with Sea Surface Salinity CCI Data","lvl2":"Step 9: Visualize Results"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sss-cci#step-9-visualize-results","position":20},{"hierarchy":{"lvl1":"Getting Started with Sea Surface Salinity CCI Data","lvl2":"Step 9: Visualize Results"},"content":"We now create a simple map plot of the selected variable.This allows us to explore the spatial patterns of the data ‚Äî in this case, the Sea Surface Salinity for the selected day.\nFor more interactive and advanced visualizations, check out the \n\nESA Climate Toolbox or the \n\nToolbox documentation.\n\nimport matplotlib.pyplot as plt\nimport cartopy.crs as ccrs\n\n# Extract one time slice\nsss = sss_ds[\"sss\"].isel(time=0).squeeze()\n\nlon = sss_ds[\"lon\"].values\nlat = sss_ds[\"lat\"].values\n\n# Get date for the title\ntime_str = sss_ds['time'].isel(time=0).dt.strftime('%d %B %Y').item()\n\nfig = plt.figure(figsize=(10, 5))\nax = plt.axes(projection=ccrs.PlateCarree())\n\nmesh = ax.pcolormesh(\n    lon, lat, sss,\n    transform=ccrs.PlateCarree(),\n    cmap=\"viridis\",      # or \"Spectral\", \"plasma\", etc.\n    vmin=30, vmax=40      # Adjust if needed\n)\n\nax.coastlines()\nplt.colorbar(mesh, ax=ax, label=\"Sea Surface Salinity (psu)\")\nplt.title(\"Sea Surface Salinity ‚Äì 15-day Mean - \" + time_str)\nplt.tight_layout()\nplt.show()","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sss-cci#step-9-visualize-results","position":21},{"hierarchy":{"lvl1":"Getting Started with Sea Surface Temperature CCI Data"},"type":"lvl1","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sst-cci","position":0},{"hierarchy":{"lvl1":"Getting Started with Sea Surface Temperature CCI Data"},"content":"\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sst-cci","position":1},{"hierarchy":{"lvl1":"Getting Started with Sea Surface Temperature CCI Data"},"type":"lvl1","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sst-cci#getting-started-with-sea-surface-temperature-cci-data","position":2},{"hierarchy":{"lvl1":"Getting Started with Sea Surface Temperature CCI Data"},"content":"\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sst-cci#getting-started-with-sea-surface-temperature-cci-data","position":3},{"hierarchy":{"lvl1":"Getting Started with Sea Surface Temperature CCI Data","lvl2":"1. Import Necessary Packages"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sst-cci#id-1-import-necessary-packages","position":4},{"hierarchy":{"lvl1":"Getting Started with Sea Surface Temperature CCI Data","lvl2":"1. Import Necessary Packages"},"content":"In this section, we import the required Python packages to work with ESA Climate Change Initiative (CCI) data. Most notably, we use the \n\nESA Climate Toolbox which simplifies access, manipulation, and visualization of CCI datasets in Python.\n\nThese packages allow us to:\n\nAccess satellite-based climate data records from ESA.\n\nHandle geospatial and temporal dimensions efficiently.\n\nVisualize data with intuitive plotting tools.\n\nüìö For a broader introduction to the toolbox and how to install it, visit:üîó \n\nESA CCI Climate Toolbox Quick Startüîó \n\nESA Climate Data Toolbox Website\n\nfrom xcube.core.store import new_data_store\nfrom esa_climate_toolbox.core import get_op\nfrom esa_climate_toolbox.core import list_ecv_datasets\nfrom esa_climate_toolbox.core import get_store\nfrom esa_climate_toolbox.core import list_datasets\nfrom esa_climate_toolbox.ops import plot\nimport xarray as xr\nimport matplotlib.pyplot as plt\nimport warnings\nwarnings.filterwarnings(\"ignore\") # Suppressing warnings to keep notebook output clean\n%matplotlib inline\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sst-cci#id-1-import-necessary-packages","position":5},{"hierarchy":{"lvl1":"Getting Started with Sea Surface Temperature CCI Data","lvl2":"Step 2: Connect to the ESA CCI Data Store"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sst-cci#step-2-connect-to-the-esa-cci-data-store","position":6},{"hierarchy":{"lvl1":"Getting Started with Sea Surface Temperature CCI Data","lvl2":"Step 2: Connect to the ESA CCI Data Store"},"content":"The ESA Climate Toolbox provides direct access to the ESA Climate Data Store, which hosts harmonized satellite-based climate data records produced under the ESA Climate Change Initiative (CCI).\n\nIn this step, we establish a connection to the data store so we can browse and open datasets. This connection allows us to access data without having to download files manually ‚Äî a convenient way to explore and analyze large geospatial datasets in cloud-friendly formats such as Zarr or Kerchunk.\n\nThe data store includes a wide range of essential climate variables (ECVs), such as aerosols, land surface temperature, sea level, and soil moisture.\n\nüìò Learn more about available datasets:üîó \n\nESA Climate Data Toolbox ‚Äì Quick Start Guide\n\ncci_store = new_data_store(\"esa-cci\")\n# List all available data sets of an ECV\n# list_ecv_datasets(\"SST\")\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sst-cci#step-2-connect-to-the-esa-cci-data-store","position":7},{"hierarchy":{"lvl1":"Getting Started with Sea Surface Temperature CCI Data","lvl2":"Step 3: Define the Dataset ID"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sst-cci#step-3-define-the-dataset-id","position":8},{"hierarchy":{"lvl1":"Getting Started with Sea Surface Temperature CCI Data","lvl2":"Step 3: Define the Dataset ID"},"content":"To work with a specific ESA CCI dataset, we need to specify its dataset ID. This unique identifier tells the toolbox which variable and product we want to access.\n\nIn this example, we are using a dataset providing sea surface temperature (SST) from multiple sensors. SST is an essential variable for understanding ocean heat content, air-sea interactions, and climate variability.\n\nTo explore other ESA CCI projects (e.g., Water Vapour, Land Surface Temperature, Soil Moisture), simply replace the dataset ID and variable name accordingly.\n\nWe will use the following dataset ID:\n\ndata_id = 'esacci.SST.day.L4.SSTdepth.multi-sensor.multi-platform.OSTIA.2-1.sst'\n\nüìò A full list of dataset IDs can be retrieved from the store or found in the \n\nESA CCI Climate Toolbox documentation.\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sst-cci#step-3-define-the-dataset-id","position":9},{"hierarchy":{"lvl1":"Getting Started with Sea Surface Temperature CCI Data","lvl2":"Step 4: Describe Dataset (Check Available Variables and Metadata)"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sst-cci#step-4-describe-dataset-check-available-variables-and-metadata","position":10},{"hierarchy":{"lvl1":"Getting Started with Sea Surface Temperature CCI Data","lvl2":"Step 4: Describe Dataset (Check Available Variables and Metadata)"},"content":"Before loading the full dataset, it‚Äôs helpful to inspect the metadata to understand its structure. This includes:\n\nAvailable variables (e.g., SST, uncertainty estimates)\n\nTemporal and spatial coverage\n\nData format and structure\n\nThis step ensures we know what the dataset contains and how to work with it. It also helps confirm that the variable we want to plot or analyze is actually included.\n\nüõ†Ô∏è Tip: You can use the description to verify variable names, dimensions (e.g., lat, lon, time), and time coverage.\n\nüìò More on dataset structure:üîó \n\nESA Climate Toolbox ‚Äì Data Access\n\ncci_store.describe_data(data_id)\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sst-cci#step-4-describe-dataset-check-available-variables-and-metadata","position":11},{"hierarchy":{"lvl1":"Getting Started with Sea Surface Temperature CCI Data","lvl2":"Step 5: Check Open Parameters for the Dataset"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sst-cci#step-5-check-open-parameters-for-the-dataset","position":12},{"hierarchy":{"lvl1":"Getting Started with Sea Surface Temperature CCI Data","lvl2":"Step 5: Check Open Parameters for the Dataset"},"content":"Before opening the dataset, we can inspect which parameters are supported by the Zarr opener (e.g., time_range, bbox, variable_names). This step helps ensure that we pass valid arguments when loading data and avoid errors.\n\nThe command below lists all expected input parameters and their allowed values for the selected dataset.\n\ncci_store.get_open_data_params_schema(data_id=data_id, opener_id='dataset:zarr:cciodp')\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sst-cci#step-5-check-open-parameters-for-the-dataset","position":13},{"hierarchy":{"lvl1":"Getting Started with Sea Surface Temperature CCI Data","lvl2":"Step 6: Define Region, Time Range, and Variables of Interest"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sst-cci#step-6-define-region-time-range-and-variables-of-interest","position":14},{"hierarchy":{"lvl1":"Getting Started with Sea Surface Temperature CCI Data","lvl2":"Step 6: Define Region, Time Range, and Variables of Interest"},"content":"Before opening the dataset, we define a few key parameters:\n\nTime range: the date(s) we want to load\n\nVariables: which data variable(s) to retrieve\n\n(Optional) Bounding box: spatial region of interest ‚Äî here we skip it to load the global dataset\n\nvariables = ['analysed_sst']  # Variable to retrieve\nstart_date = '2016-06-21'    # Start and end date (same for a single timestep)\nend_date = '2016-06-21'\n# bbox = (-10.0, 35.0, 30.0, 60.0)  # Optional: restrict to a region like Europe\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sst-cci#step-6-define-region-time-range-and-variables-of-interest","position":15},{"hierarchy":{"lvl1":"Getting Started with Sea Surface Temperature CCI Data","lvl2":"Step 7: Open the Dataset"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sst-cci#step-7-open-the-dataset","position":16},{"hierarchy":{"lvl1":"Getting Started with Sea Surface Temperature CCI Data","lvl2":"Step 7: Open the Dataset"},"content":"Now we open the dataset using the selected parameters.The ESA Climate Toolbox will download only the necessary data (e.g., variable and time range).\nYou can always adjust the time range or variables to explore different slices of the dataset.\n\nsst_ds = cci_store.open_data(\n    data_id=data_id,\n    variable_names=variables,\n    time_range=[start_date, end_date]\n    # bbox=bbox  # Uncomment if regional selection is needed\n)\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sst-cci#step-7-open-the-dataset","position":17},{"hierarchy":{"lvl1":"Getting Started with Sea Surface Temperature CCI Data","lvl2":"Step 8: Display Dataset Structure"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sst-cci#step-8-display-dataset-structure","position":18},{"hierarchy":{"lvl1":"Getting Started with Sea Surface Temperature CCI Data","lvl2":"Step 8: Display Dataset Structure"},"content":"We print a summary of the opened dataset to inspect its structure, dimensions, variables, and metadata.This helps verify that the data was loaded correctly and shows what is available for analysis and visualization.\nThis step is useful to understand what the dataset contains before working with it further.\n\nprint(\"\\nOpened Dataset:\\n\", sst_ds)\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sst-cci#step-8-display-dataset-structure","position":19},{"hierarchy":{"lvl1":"Getting Started with Sea Surface Temperature CCI Data","lvl2":"Step 9: Visualize Results"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sst-cci#step-9-visualize-results","position":20},{"hierarchy":{"lvl1":"Getting Started with Sea Surface Temperature CCI Data","lvl2":"Step 9: Visualize Results"},"content":"We now create a simple map plot of the selected variable.This allows us to explore the spatial patterns of the data ‚Äî in this case, the Sea Surface Temperature for the selected day.\nFor more interactive and advanced visualizations, check out the \n\nESA Climate Toolbox or the \n\nToolbox documentation.\n\nimport matplotlib.pyplot as plt\nimport cartopy.crs as ccrs\nimport pandas as pd\n\n# Load and extract data\nsst = sst_ds[\"analysed_sst\"].isel(time=0).squeeze()\nlat = sst_ds[\"lat\"].values\nlon = sst_ds[\"lon\"].values\n\n# Get date for the title\ntime_str = sst_ds['time'].isel(time=0).dt.strftime('%d %B %Y').item()\n\n# Plot\nfig = plt.figure(figsize=(12, 6))\nax = plt.axes(projection=ccrs.PlateCarree())\n\nmesh = ax.pcolormesh(\n    lon, lat, sst,\n    transform=ccrs.PlateCarree(),\n    cmap=\"coolwarm\",\n    vmin=273, vmax=310  # Adjusted for SST range in K\n)\n\nax.coastlines()\nplt.colorbar(mesh, ax=ax, label=\"Sea Surface Temperature (K)\")\nplt.title(f\"Sea Surface Temperature ‚Äì {time_str}\")\nplt.tight_layout()\nplt.show()","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sst-cci#step-9-visualize-results","position":21},{"hierarchy":{"lvl1":"Getting Started with Sea Ice CCI Data"},"type":"lvl1","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/seaice-cci","position":0},{"hierarchy":{"lvl1":"Getting Started with Sea Ice CCI Data"},"content":"\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/seaice-cci","position":1},{"hierarchy":{"lvl1":"Getting Started with Sea Ice CCI Data"},"type":"lvl1","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/seaice-cci#getting-started-with-sea-ice-cci-data","position":2},{"hierarchy":{"lvl1":"Getting Started with Sea Ice CCI Data"},"content":"\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/seaice-cci#getting-started-with-sea-ice-cci-data","position":3},{"hierarchy":{"lvl1":"Getting Started with Sea Ice CCI Data","lvl2":"1. Import Necessary Packages"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/seaice-cci#id-1-import-necessary-packages","position":4},{"hierarchy":{"lvl1":"Getting Started with Sea Ice CCI Data","lvl2":"1. Import Necessary Packages"},"content":"In this section, we import the required Python packages to work with ESA Climate Change Initiative (CCI) data. Most notably, we use the \n\nESA Climate Toolbox which simplifies access, manipulation, and visualization of CCI datasets in Python.\n\nThese packages allow us to:\n\nAccess satellite-based climate data records from ESA.\n\nHandle geospatial and temporal dimensions efficiently.\n\nVisualize data with intuitive plotting tools.\n\nüìö For a broader introduction to the toolbox and how to install it, visit:üîó \n\nESA CCI Climate Toolbox Quick Startüîó \n\nESA Climate Data Toolbox Website\n\nfrom xcube.core.store import new_data_store\nfrom esa_climate_toolbox.core import get_op\nfrom esa_climate_toolbox.core import list_ecv_datasets\nfrom esa_climate_toolbox.core import get_store\nfrom esa_climate_toolbox.core import list_datasets\nfrom esa_climate_toolbox.ops import plot\nimport xarray as xr\nimport matplotlib.pyplot as plt\nimport warnings\nwarnings.filterwarnings(\"ignore\") # Suppressing warnings to keep notebook output clean\n%matplotlib inline\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/seaice-cci#id-1-import-necessary-packages","position":5},{"hierarchy":{"lvl1":"Getting Started with Sea Ice CCI Data","lvl2":"Step 2: Connect to the ESA CCI Data Store"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/seaice-cci#step-2-connect-to-the-esa-cci-data-store","position":6},{"hierarchy":{"lvl1":"Getting Started with Sea Ice CCI Data","lvl2":"Step 2: Connect to the ESA CCI Data Store"},"content":"The ESA Climate Toolbox provides direct access to the ESA Climate Data Store, which hosts harmonized satellite-based climate data records produced under the ESA Climate Change Initiative (CCI).\n\nIn this step, we establish a connection to the data store so we can browse and open datasets. This connection allows us to access data without having to download files manually ‚Äî a convenient way to explore and analyze large geospatial datasets in cloud-friendly formats such as Zarr or Kerchunk.\n\nThe data store includes a wide range of essential climate variables (ECVs), such as aerosols, land surface temperature, sea level, and soil moisture.\n\nüìò Learn more about available datasets:üîó \n\nESA Climate Data Toolbox ‚Äì Quick Start Guide\n\ncci_store = new_data_store(\"esa-cci\")\n# List all available data sets of an ECV\n# list_ecv_datasets(\"seaice\")\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/seaice-cci#step-2-connect-to-the-esa-cci-data-store","position":7},{"hierarchy":{"lvl1":"Getting Started with Sea Ice CCI Data","lvl2":"Step 3: Define the Dataset ID"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/seaice-cci#step-3-define-the-dataset-id","position":8},{"hierarchy":{"lvl1":"Getting Started with Sea Ice CCI Data","lvl2":"Step 3: Define the Dataset ID"},"content":"To work with a specific ESA CCI dataset, we need to specify its dataset ID. This unique identifier tells the toolbox which variable and product we want to access.\n\nIn this example, we are using a dataset from the Sea Ice CCI project that provides daily Level 4 sea ice concentration (SICONC) data derived from multiple satellite sensors over the Southern Hemisphere. Sea ice concentration is a key parameter for monitoring polar climate change, seasonal variability, and its interaction with the atmosphere and ocean.\n\nFor other ESA CCI projects (e.g., Ozone, Land Cover, Permafrost), simply replace the dataset ID accordingly.\n\nWe will use the following dataset ID:\n\ndata_id = 'esacci.SEAICE.day.L4.SICONC.multi-sensor.multi-platform.AMSR_25kmEASE2.2-1.SH'\n\nüìò A full list of dataset IDs can be retrieved from the store or found in the \n\nESA CCI Climate Toolbox documentation.\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/seaice-cci#step-3-define-the-dataset-id","position":9},{"hierarchy":{"lvl1":"Getting Started with Sea Ice CCI Data","lvl2":"Step 4: Describe Dataset (Check Available Variables and Metadata)"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/seaice-cci#step-4-describe-dataset-check-available-variables-and-metadata","position":10},{"hierarchy":{"lvl1":"Getting Started with Sea Ice CCI Data","lvl2":"Step 4: Describe Dataset (Check Available Variables and Metadata)"},"content":"Before loading the full dataset, it‚Äôs helpful to inspect the metadata to understand its structure. This includes:\n\nAvailable variables (e.g., sea ice concentration (ice_con), uncertainty estimates)\n\nTemporal and spatial coverage\n\nData format and structure\n\nThis step ensures we know what the dataset contains and how to work with it. It also helps confirm that the variable we want to plot or analyze is actually included.\n\nüõ†Ô∏è Tip: You can use the description to verify variable names, dimensions (e.g., lat, lon, time), and time coverage.\n\nüìò More on dataset structure:üîó \n\nESA Climate Toolbox ‚Äì Data Access\n\ncci_store.describe_data(data_id)\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/seaice-cci#step-4-describe-dataset-check-available-variables-and-metadata","position":11},{"hierarchy":{"lvl1":"Getting Started with Sea Ice CCI Data","lvl2":"Step 5: Check Open Parameters for the Dataset"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/seaice-cci#step-5-check-open-parameters-for-the-dataset","position":12},{"hierarchy":{"lvl1":"Getting Started with Sea Ice CCI Data","lvl2":"Step 5: Check Open Parameters for the Dataset"},"content":"Before opening the dataset, we can inspect which parameters are supported by the Zarr opener (e.g., time_range, bbox, variable_names). This step helps ensure that we pass valid arguments when loading data and avoid errors.\n\nThe command below lists all expected input parameters and their allowed values for the selected dataset.\n\ncci_store.get_open_data_params_schema(data_id=data_id, opener_id='dataset:zarr:cciodp')\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/seaice-cci#step-5-check-open-parameters-for-the-dataset","position":13},{"hierarchy":{"lvl1":"Getting Started with Sea Ice CCI Data","lvl2":"Step 6: Define Region, Time Range, and Variables of Interest"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/seaice-cci#step-6-define-region-time-range-and-variables-of-interest","position":14},{"hierarchy":{"lvl1":"Getting Started with Sea Ice CCI Data","lvl2":"Step 6: Define Region, Time Range, and Variables of Interest"},"content":"Before opening the dataset, we define a few key parameters:\n\nTime range: the date(s) we want to load\n\nVariables: which data variable(s) to retrieve\n\n(Optional) Bounding box: spatial region of interest ‚Äî here we skip it to load the global dataset\n\nvariables = ['ice_conc']  # Variable to retrieve\nstart_date = '2016-09-21'    # Start and end date (same for a single timestep)\nend_date = '2016-09-21'\n# bbox = (-10.0, 35.0, 30.0, 60.0)  # Optional: restrict to a region like Europe\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/seaice-cci#step-6-define-region-time-range-and-variables-of-interest","position":15},{"hierarchy":{"lvl1":"Getting Started with Sea Ice CCI Data","lvl2":"Step 7: Open the Dataset"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/seaice-cci#step-7-open-the-dataset","position":16},{"hierarchy":{"lvl1":"Getting Started with Sea Ice CCI Data","lvl2":"Step 7: Open the Dataset"},"content":"Now we open the dataset using the selected parameters.The ESA Climate Toolbox will download only the necessary data (e.g., variable and time range).\nYou can always adjust the time range or variables to explore different slices of the dataset.\n\nseaice_ds = cci_store.open_data(\n    data_id=data_id,\n    variable_names=variables,\n    time_range=[start_date, end_date]\n    # bbox=bbox  # Uncomment if regional selection is needed\n)\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/seaice-cci#step-7-open-the-dataset","position":17},{"hierarchy":{"lvl1":"Getting Started with Sea Ice CCI Data","lvl2":"Step 8: Display Dataset Structure"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/seaice-cci#step-8-display-dataset-structure","position":18},{"hierarchy":{"lvl1":"Getting Started with Sea Ice CCI Data","lvl2":"Step 8: Display Dataset Structure"},"content":"We print a summary of the opened dataset to inspect its structure, dimensions, variables, and metadata.This helps verify that the data was loaded correctly and shows what is available for analysis and visualization.\nThis step is useful to understand what the dataset contains before working with it further.\n\nprint(\"\\nOpened Dataset:\\n\", seaice_ds)\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/seaice-cci#step-8-display-dataset-structure","position":19},{"hierarchy":{"lvl1":"Getting Started with Sea Ice CCI Data","lvl2":"Step 9: Visualize Results"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/seaice-cci#step-9-visualize-results","position":20},{"hierarchy":{"lvl1":"Getting Started with Sea Ice CCI Data","lvl2":"Step 9: Visualize Results"},"content":"We now create a simple map plot of the selected variable.This allows us to explore the spatial patterns of the data ‚Äî in this case, the Sea Ice Concentration for the selected day.\nFor more interactive and advanced visualizations, check out the \n\nESA Climate Toolbox or the \n\nToolbox documentation.\n\n# Force eager loading by disabling chunks\nseaice_ds_eager = seaice_ds.compute()\n\n# Extract ice concentration\nice_conc = seaice_ds_eager[\"ice_conc\"].isel(time=0).squeeze()\n\n# Extract coordinates\nx = seaice_ds_eager[\"xc\"].values\ny = seaice_ds_eager[\"yc\"].values\n\n# Get date for the title\ntime_str = seaice_ds_eager['time'].isel(time=0).dt.strftime('%d %B %Y').item()\n\n# Plot\nimport matplotlib.pyplot as plt\nimport cartopy.crs as ccrs\n\nfig = plt.figure(figsize=(8, 8))\nax = plt.axes(projection=ccrs.SouthPolarStereo())\n\nmesh = ax.pcolormesh(\n    x, y, ice_conc,\n    transform=ccrs.SouthPolarStereo(),\n    cmap=\"Blues\",\n    vmin=0, vmax=100\n)\n\nax.coastlines()\nplt.colorbar(mesh, ax=ax, orientation='vertical', label=\"Sea Ice Concentration (%)\")\nplt.title(\"Sea Ice Concentration ‚Äì Southern Hemisphere - \" + time_str)\nplt.tight_layout()\nplt.show()","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/seaice-cci#step-9-visualize-results","position":21},{"hierarchy":{"lvl1":"Getting Started with Sea Level CCI Data"},"type":"lvl1","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sealevel-cci","position":0},{"hierarchy":{"lvl1":"Getting Started with Sea Level CCI Data"},"content":"\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sealevel-cci","position":1},{"hierarchy":{"lvl1":"Getting Started with Sea Level CCI Data"},"type":"lvl1","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sealevel-cci#getting-started-with-sea-level-cci-data","position":2},{"hierarchy":{"lvl1":"Getting Started with Sea Level CCI Data"},"content":"\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sealevel-cci#getting-started-with-sea-level-cci-data","position":3},{"hierarchy":{"lvl1":"Getting Started with Sea Level CCI Data","lvl2":"1. Import Necessary Packages"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sealevel-cci#id-1-import-necessary-packages","position":4},{"hierarchy":{"lvl1":"Getting Started with Sea Level CCI Data","lvl2":"1. Import Necessary Packages"},"content":"In this section, we import the required Python packages to work with ESA Climate Change Initiative (CCI) data. Most notably, we use the \n\nESA Climate Toolbox which simplifies access, manipulation, and visualization of CCI datasets in Python.\n\nThese packages allow us to:\n\nAccess satellite-based climate data records from ESA.\n\nHandle geospatial and temporal dimensions efficiently.\n\nVisualize data with intuitive plotting tools.\n\nüìö For a broader introduction to the toolbox and how to install it, visit:üîó \n\nESA CCI Climate Toolbox Quick Startüîó \n\nESA Climate Data Toolbox Website\n\nfrom xcube.core.store import new_data_store\nfrom esa_climate_toolbox.core import get_op\nfrom esa_climate_toolbox.core import list_ecv_datasets\nfrom esa_climate_toolbox.core import get_store\nfrom esa_climate_toolbox.core import list_datasets\nfrom esa_climate_toolbox.ops import plot\nimport xarray as xr\nimport matplotlib.pyplot as plt\nimport warnings\nwarnings.filterwarnings(\"ignore\") # Suppressing warnings to keep notebook output clean\n%matplotlib inline\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sealevel-cci#id-1-import-necessary-packages","position":5},{"hierarchy":{"lvl1":"Getting Started with Sea Level CCI Data","lvl2":"Step 2: Connect to the ESA CCI Data Store"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sealevel-cci#step-2-connect-to-the-esa-cci-data-store","position":6},{"hierarchy":{"lvl1":"Getting Started with Sea Level CCI Data","lvl2":"Step 2: Connect to the ESA CCI Data Store"},"content":"The ESA Climate Toolbox provides direct access to the ESA Climate Data Store, which hosts harmonized satellite-based climate data records produced under the ESA Climate Change Initiative (CCI).\n\nIn this step, we establish a connection to the data store so we can browse and open datasets. This connection allows us to access data without having to download files manually ‚Äî a convenient way to explore and analyze large geospatial datasets in cloud-friendly formats such as Zarr or Kerchunk.\n\nThe data store includes a wide range of essential climate variables (ECVs), such as aerosols, land surface temperature, sea level, and soil moisture.\n\nüìò Learn more about available datasets:üîó \n\nESA Climate Data Toolbox ‚Äì Quick Start Guide\n\ncci_store = new_data_store(\"esa-cci\")\n# List all available data sets of an ECV\n# list_ecv_datasets(\"sealevel\")\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sealevel-cci#step-2-connect-to-the-esa-cci-data-store","position":7},{"hierarchy":{"lvl1":"Getting Started with Sea Level CCI Data","lvl2":"Step 3: Define the Dataset ID"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sealevel-cci#step-3-define-the-dataset-id","position":8},{"hierarchy":{"lvl1":"Getting Started with Sea Level CCI Data","lvl2":"Step 3: Define the Dataset ID"},"content":"To work with a specific ESA CCI dataset, we need to specify its dataset ID. This unique identifier tells the toolbox which variable and product we want to access.\n\nIn this example, we are using a dataset providing Sea Level Anomaly (SLA) from multiple sensors. SLA is an important Essential Climate Variable for understanding changes in global and regional sea level, ocean circulation, and climate change impacts.\n\nTo explore other ESA CCI projects (e.g., SST, LST, Water Vapour), simply replace the dataset ID and variable name accordingly.\n\nWe will use the following dataset ID:\n\ndata_id = 'esacci.SEALEVEL.mon.L4.MSLA.multi-sensor.multi-platform.MERGED.2-0.r1'\n\nüìò A full list of dataset IDs can be retrieved from the store or found in the \n\nESA CCI Climate Toolbox documentation.\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sealevel-cci#step-3-define-the-dataset-id","position":9},{"hierarchy":{"lvl1":"Getting Started with Sea Level CCI Data","lvl2":"Step 4: Describe Dataset (Check Available Variables and Metadata)"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sealevel-cci#step-4-describe-dataset-check-available-variables-and-metadata","position":10},{"hierarchy":{"lvl1":"Getting Started with Sea Level CCI Data","lvl2":"Step 4: Describe Dataset (Check Available Variables and Metadata)"},"content":"Before loading the full dataset, it‚Äôs helpful to inspect the metadata to understand its structure. This includes:\n\nAvailable variables (e.g., SLA, uncertainty estimates)\n\nTemporal and spatial coverage\n\nData format and structure\n\nThis step ensures we know what the dataset contains and how to work with it. It also helps confirm that the variable we want to plot or analyze is actually included.\n\nüõ†Ô∏è Tip: You can use the description to verify variable names, dimensions (e.g., lat, lon, time), and time coverage.\n\nüìò More on dataset structure:üîó \n\nESA Climate Toolbox ‚Äì Data Access\n\ncci_store.describe_data(data_id)\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sealevel-cci#step-4-describe-dataset-check-available-variables-and-metadata","position":11},{"hierarchy":{"lvl1":"Getting Started with Sea Level CCI Data","lvl2":"Step 5: Check Open Parameters for the Dataset"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sealevel-cci#step-5-check-open-parameters-for-the-dataset","position":12},{"hierarchy":{"lvl1":"Getting Started with Sea Level CCI Data","lvl2":"Step 5: Check Open Parameters for the Dataset"},"content":"Before opening the dataset, we can inspect which parameters are supported by the Zarr opener (e.g., time_range, bbox, variable_names). This step helps ensure that we pass valid arguments when loading data and avoid errors.\n\nThe command below lists all expected input parameters and their allowed values for the selected dataset.\n\ncci_store.get_open_data_params_schema(data_id=data_id, opener_id='dataset:zarr:cciodp')\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sealevel-cci#step-5-check-open-parameters-for-the-dataset","position":13},{"hierarchy":{"lvl1":"Getting Started with Sea Level CCI Data","lvl2":"Step 6: Define Region, Time Range, and Variables of Interest"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sealevel-cci#step-6-define-region-time-range-and-variables-of-interest","position":14},{"hierarchy":{"lvl1":"Getting Started with Sea Level CCI Data","lvl2":"Step 6: Define Region, Time Range, and Variables of Interest"},"content":"Before opening the dataset, we define a few key parameters:\n\nTime range: the date(s) we want to load\n\nVariables: which data variable(s) to retrieve\n\n(Optional) Bounding box: spatial region of interest ‚Äî here we skip it to load the global dataset\n\nvariables = ['sla']  # Variable to retrieve\nstart_date = '2015-06-01'    # Start and end date (same for a single timestep)\nend_date = '2015-06-30'\n# bbox = (-10.0, 35.0, 30.0, 60.0)  # Optional: restrict to a region like Europe\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sealevel-cci#step-6-define-region-time-range-and-variables-of-interest","position":15},{"hierarchy":{"lvl1":"Getting Started with Sea Level CCI Data","lvl2":"Step 7: Open the Dataset"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sealevel-cci#step-7-open-the-dataset","position":16},{"hierarchy":{"lvl1":"Getting Started with Sea Level CCI Data","lvl2":"Step 7: Open the Dataset"},"content":"Now we open the dataset using the selected parameters.The ESA Climate Toolbox will download only the necessary data (e.g., variable and time range).\nYou can always adjust the time range or variables to explore different slices of the dataset.\n\nsealevel_ds = cci_store.open_data(\n    data_id=data_id,\n    variable_names=variables,\n    time_range=[start_date, end_date]\n    # bbox=bbox  # Uncomment if regional selection is needed\n)\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sealevel-cci#step-7-open-the-dataset","position":17},{"hierarchy":{"lvl1":"Getting Started with Sea Level CCI Data","lvl2":"Step 8: Display Dataset Structure"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sealevel-cci#step-8-display-dataset-structure","position":18},{"hierarchy":{"lvl1":"Getting Started with Sea Level CCI Data","lvl2":"Step 8: Display Dataset Structure"},"content":"We print a summary of the opened dataset to inspect its structure, dimensions, variables, and metadata.This helps verify that the data was loaded correctly and shows what is available for analysis and visualization.\nThis step is useful to understand what the dataset contains before working with it further.\n\nprint(\"\\nOpened Dataset:\\n\", sealevel_ds)\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sealevel-cci#step-8-display-dataset-structure","position":19},{"hierarchy":{"lvl1":"Getting Started with Sea Level CCI Data","lvl2":"Step 9: Visualize Results"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sealevel-cci#step-9-visualize-results","position":20},{"hierarchy":{"lvl1":"Getting Started with Sea Level CCI Data","lvl2":"Step 9: Visualize Results"},"content":"We now create a simple map plot of the selected variable.This allows us to explore the spatial patterns of the data ‚Äî in this case, the Sea Level Anomaly for the selected day.\nFor more interactive and advanced visualizations, check out the \n\nESA Climate Toolbox or the \n\nToolbox documentation.\n\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport cartopy.crs as ccrs\n\n# Load data\nsla = sealevel_ds[\"sla\"].isel(time=0).squeeze().load()\nlat = sealevel_ds[\"lat\"].values\nlon = sealevel_ds[\"lon\"].values\n\n# Get date for the title\ntime_str = sealevel_ds['time'].isel(time=0).dt.strftime('%d %B %Y').item()\n\n# Create the plot\nfig = plt.figure(figsize=(10, 5))\nax = plt.axes(projection=ccrs.PlateCarree())\n\nmesh = ax.pcolormesh(lon, lat, sla, cmap=\"RdBu_r\", vmin=-0.2, vmax=0.2)\nax.coastlines()\nplt.colorbar(mesh, ax=ax, label=\"Sea Level Anomaly (m)\")\nplt.title(\"Sea Level Anomaly ‚Äì \" + time_str)\nplt.tight_layout()\nplt.show()","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/sealevel-cci#step-9-visualize-results","position":21},{"hierarchy":{"lvl1":"Getting Started with Snow CCI Data"},"type":"lvl1","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/snow-cci","position":0},{"hierarchy":{"lvl1":"Getting Started with Snow CCI Data"},"content":"\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/snow-cci","position":1},{"hierarchy":{"lvl1":"Getting Started with Snow CCI Data"},"type":"lvl1","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/snow-cci#getting-started-with-snow-cci-data","position":2},{"hierarchy":{"lvl1":"Getting Started with Snow CCI Data"},"content":"\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/snow-cci#getting-started-with-snow-cci-data","position":3},{"hierarchy":{"lvl1":"Getting Started with Snow CCI Data","lvl2":"1. Import Necessary Packages"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/snow-cci#id-1-import-necessary-packages","position":4},{"hierarchy":{"lvl1":"Getting Started with Snow CCI Data","lvl2":"1. Import Necessary Packages"},"content":"In this section, we import the required Python packages to work with ESA Climate Change Initiative (CCI) data. Most notably, we use the \n\nESA Climate Toolbox which simplifies access, manipulation, and visualization of CCI datasets in Python.\n\nThese packages allow us to:\n\nAccess satellite-based climate data records from ESA.\n\nHandle geospatial and temporal dimensions efficiently.\n\nVisualize data with intuitive plotting tools.\n\nüìö For a broader introduction to the toolbox and how to install it, visit:üîó \n\nESA CCI Climate Toolbox Quick Startüîó \n\nESA Climate Data Toolbox Website\n\nfrom xcube.core.store import new_data_store\nfrom esa_climate_toolbox.core import get_op\nfrom esa_climate_toolbox.core import list_ecv_datasets\nfrom esa_climate_toolbox.core import get_store\nfrom esa_climate_toolbox.core import list_datasets\nfrom esa_climate_toolbox.ops import plot\nimport xarray as xr\nimport matplotlib.pyplot as plt\nimport warnings\nwarnings.filterwarnings(\"ignore\") # Suppressing warnings to keep notebook output clean\n%matplotlib inline\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/snow-cci#id-1-import-necessary-packages","position":5},{"hierarchy":{"lvl1":"Getting Started with Snow CCI Data","lvl2":"Step 2: Connect to the ESA CCI Data Store"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/snow-cci#step-2-connect-to-the-esa-cci-data-store","position":6},{"hierarchy":{"lvl1":"Getting Started with Snow CCI Data","lvl2":"Step 2: Connect to the ESA CCI Data Store"},"content":"The ESA Climate Toolbox provides direct access to the ESA Climate Data Store, which hosts harmonized satellite-based climate data records produced under the ESA Climate Change Initiative (CCI).\n\nIn this step, we establish a connection to the data store so we can browse and open datasets. This connection allows us to access data without having to download files manually ‚Äî a convenient way to explore and analyze large geospatial datasets in cloud-friendly formats such as Zarr or Kerchunk.\n\nThe data store includes a wide range of essential climate variables (ECVs), such as aerosols, land surface temperature, sea level, and soil moisture.\n\nüìò Learn more about available datasets:üîó \n\nESA Climate Data Toolbox ‚Äì Quick Start Guide\n\ncci_store = new_data_store(\"esa-cci\")\n# List all available data sets of an ECV\n# list_ecv_datasets(\"Snow\")\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/snow-cci#step-2-connect-to-the-esa-cci-data-store","position":7},{"hierarchy":{"lvl1":"Getting Started with Snow CCI Data","lvl2":"Step 3: Define the Dataset ID"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/snow-cci#step-3-define-the-dataset-id","position":8},{"hierarchy":{"lvl1":"Getting Started with Snow CCI Data","lvl2":"Step 3: Define the Dataset ID"},"content":"To work with a specific ESA CCI dataset, we need to specify its dataset ID. This unique identifier tells the toolbox which variable and product we want to access.\n\nIn this example, we are using the Snow Water Equivalent (SWE) product from the ESA Snow CCI project. SWE provides the amount of water contained within the snowpack and is essential for hydrological modeling, water resource management, and climate monitoring.\n\nTo explore other ESA CCI projects (e.g., Land Surface Temperature, Sea Ice, Soil Moisture), simply replace the dataset ID and variable name accordingly.\n\nWe will use the following dataset ID:\n\ndata_id = 'esacci.SNOW.day.L3C.SWE.multi-sensor.multi-platform.MERGED.4-0.r1'\n\nüìò A full list of dataset IDs can be retrieved from the store or found in the \n\nESA CCI Climate Toolbox documentation.\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/snow-cci#step-3-define-the-dataset-id","position":9},{"hierarchy":{"lvl1":"Getting Started with Snow CCI Data","lvl2":"Step 4: Describe Dataset (Check Available Variables and Metadata)"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/snow-cci#step-4-describe-dataset-check-available-variables-and-metadata","position":10},{"hierarchy":{"lvl1":"Getting Started with Snow CCI Data","lvl2":"Step 4: Describe Dataset (Check Available Variables and Metadata)"},"content":"Before loading the full dataset, it‚Äôs helpful to inspect the metadata to understand its structure. This includes:\n\nAvailable variables (e.g., SWE, uncertainty estimates)\n\nTemporal and spatial coverage\n\nData format and structure\n\nThis step ensures we know what the dataset contains and how to work with it. It also helps confirm that the variable we want to plot or analyze is actually included.\n\nüõ†Ô∏è Tip: You can use the description to verify variable names, dimensions (e.g., lat, lon, time), and time coverage.\n\nüìò More on dataset structure:üîó \n\nESA Climate Toolbox ‚Äì Data Access\n\ncci_store.describe_data(data_id)\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/snow-cci#step-4-describe-dataset-check-available-variables-and-metadata","position":11},{"hierarchy":{"lvl1":"Getting Started with Snow CCI Data","lvl2":"Step 5: Check Open Parameters for the Dataset"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/snow-cci#step-5-check-open-parameters-for-the-dataset","position":12},{"hierarchy":{"lvl1":"Getting Started with Snow CCI Data","lvl2":"Step 5: Check Open Parameters for the Dataset"},"content":"Before opening the dataset, we can inspect which parameters are supported by the Zarr opener (e.g., time_range, bbox, variable_names). This step helps ensure that we pass valid arguments when loading data and avoid errors.\n\nThe command below lists all expected input parameters and their allowed values for the selected dataset.\n\ncci_store.get_open_data_params_schema(data_id=data_id, opener_id='dataset:zarr:cciodp')\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/snow-cci#step-5-check-open-parameters-for-the-dataset","position":13},{"hierarchy":{"lvl1":"Getting Started with Snow CCI Data","lvl2":"Step 6: Define Region, Time Range, and Variables of Interest"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/snow-cci#step-6-define-region-time-range-and-variables-of-interest","position":14},{"hierarchy":{"lvl1":"Getting Started with Snow CCI Data","lvl2":"Step 6: Define Region, Time Range, and Variables of Interest"},"content":"Before opening the dataset, we define a few key parameters:\n\nTime range: the date(s) we want to load\n\nVariables: which data variable(s) to retrieve\n\n(Optional) Bounding box: spatial region of interest ‚Äî here we skip it to load the global dataset\n\nvariables = ['swe']  # Variable to retrieve\nstart_date = '2023-03-01'    # Start and end date (same for a single timestep)\nend_date = '2023-03-01'\n# bbox = (-10.0, 35.0, 30.0, 60.0)  # Optional: restrict to a region like Europe\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/snow-cci#step-6-define-region-time-range-and-variables-of-interest","position":15},{"hierarchy":{"lvl1":"Getting Started with Snow CCI Data","lvl2":"Step 7: Open the Dataset"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/snow-cci#step-7-open-the-dataset","position":16},{"hierarchy":{"lvl1":"Getting Started with Snow CCI Data","lvl2":"Step 7: Open the Dataset"},"content":"Now we open the dataset using the selected parameters.The ESA Climate Toolbox will download only the necessary data (e.g., variable and time range).\nYou can always adjust the time range or variables to explore different slices of the dataset.\n\nsnow_ds = cci_store.open_data(\n    data_id=data_id,\n    variable_names=variables,\n    time_range=[start_date, end_date]\n    # bbox=bbox  # Uncomment if regional selection is needed\n)\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/snow-cci#step-7-open-the-dataset","position":17},{"hierarchy":{"lvl1":"Getting Started with Snow CCI Data","lvl2":"Step 8: Display Dataset Structure"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/snow-cci#step-8-display-dataset-structure","position":18},{"hierarchy":{"lvl1":"Getting Started with Snow CCI Data","lvl2":"Step 8: Display Dataset Structure"},"content":"We print a summary of the opened dataset to inspect its structure, dimensions, variables, and metadata.This helps verify that the data was loaded correctly and shows what is available for analysis and visualization.\nThis step is useful to understand what the dataset contains before working with it further.\n\nprint(\"\\nOpened Dataset:\\n\", snow_ds)\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/snow-cci#step-8-display-dataset-structure","position":19},{"hierarchy":{"lvl1":"Getting Started with Snow CCI Data","lvl2":"Step 9: Visualize Results"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/snow-cci#step-9-visualize-results","position":20},{"hierarchy":{"lvl1":"Getting Started with Snow CCI Data","lvl2":"Step 9: Visualize Results"},"content":"We now create a simple map plot of the selected variable.This allows us to explore the spatial patterns of the data ‚Äî in this case, the Snow Water Equivalent (SWE) for the selected day.\nFor more interactive and advanced visualizations, check out the \n\nESA Climate Toolbox or the \n\nToolbox documentation.\n\nimport matplotlib.pyplot as plt\nimport cartopy.crs as ccrs\nimport numpy as np\n\n# Extract data\nsnow_ds_eager = snow_ds.compute()\nswe = snow_ds_eager[\"swe\"].isel(time=0)\n\nlat = snow_ds_eager[\"lat\"].values\nlon = snow_ds_eager[\"lon\"].values\n\n# Get date for the title\ntime_str = snow_ds_eager['time'].isel(time=0).dt.strftime('%d %B %Y').item()\n\n# Create the plot\nfig = plt.figure(figsize=(10, 5))\nax = plt.axes(projection=ccrs.PlateCarree())\n\n# Plot the SWE data\nmesh = ax.pcolormesh(lon, lat, swe, cmap=\"coolwarm\", vmin=0, vmax=np.nanpercentile(swe, 99))\n\nax.coastlines()\nplt.colorbar(mesh, ax=ax, label=\"Snow Water Equivalent (mm)\")\nplt.title(\"ESA CCI Snow Water Equivalent (SWE) ‚Äì \" + time_str)\nplt.tight_layout()\nplt.show()","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/snow-cci#step-9-visualize-results","position":21},{"hierarchy":{"lvl1":"Getting Started with Soil Moisture CCI Data"},"type":"lvl1","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/soilmoisture-cci","position":0},{"hierarchy":{"lvl1":"Getting Started with Soil Moisture CCI Data"},"content":"\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/soilmoisture-cci","position":1},{"hierarchy":{"lvl1":"Getting Started with Soil Moisture CCI Data"},"type":"lvl1","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/soilmoisture-cci#getting-started-with-soil-moisture-cci-data","position":2},{"hierarchy":{"lvl1":"Getting Started with Soil Moisture CCI Data"},"content":"\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/soilmoisture-cci#getting-started-with-soil-moisture-cci-data","position":3},{"hierarchy":{"lvl1":"Getting Started with Soil Moisture CCI Data","lvl2":"1. Import Necessary Packages"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/soilmoisture-cci#id-1-import-necessary-packages","position":4},{"hierarchy":{"lvl1":"Getting Started with Soil Moisture CCI Data","lvl2":"1. Import Necessary Packages"},"content":"In this section, we import the required Python packages to work with ESA Climate Change Initiative (CCI) data. Most notably, we use the \n\nESA Climate Toolbox which simplifies access, manipulation, and visualization of CCI datasets in Python.\n\nThese packages allow us to:\n\nAccess satellite-based climate data records from ESA.\n\nHandle geospatial and temporal dimensions efficiently.\n\nVisualize data with intuitive plotting tools.\n\nüìö For a broader introduction to the toolbox and how to install it, visit:üîó \n\nESA CCI Climate Toolbox Quick Startüîó \n\nESA Climate Data Toolbox Website\n\nfrom xcube.core.store import new_data_store\nfrom esa_climate_toolbox.core import get_op\nfrom esa_climate_toolbox.core import list_ecv_datasets\nfrom esa_climate_toolbox.core import get_store\nfrom esa_climate_toolbox.core import list_datasets\nfrom esa_climate_toolbox.ops import plot\nimport xarray as xr\nimport matplotlib.pyplot as plt\nimport warnings\nwarnings.filterwarnings(\"ignore\") # Suppressing warnings to keep notebook output clean\n%matplotlib inline\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/soilmoisture-cci#id-1-import-necessary-packages","position":5},{"hierarchy":{"lvl1":"Getting Started with Soil Moisture CCI Data","lvl2":"Step 2: Connect to the ESA CCI Data Store"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/soilmoisture-cci#step-2-connect-to-the-esa-cci-data-store","position":6},{"hierarchy":{"lvl1":"Getting Started with Soil Moisture CCI Data","lvl2":"Step 2: Connect to the ESA CCI Data Store"},"content":"The ESA Climate Toolbox provides direct access to the ESA Climate Data Store, which hosts harmonized satellite-based climate data records produced under the ESA Climate Change Initiative (CCI).\n\nIn this step, we establish a connection to the data store so we can browse and open datasets. This connection allows us to access data without having to download files manually ‚Äî a convenient way to explore and analyze large geospatial datasets in cloud-friendly formats such as Zarr or Kerchunk.\n\nThe data store includes a wide range of essential climate variables (ECVs), such as aerosols, land surface temperature, sea level, and soil moisture.\n\nüìò Learn more about available datasets:üîó \n\nESA Climate Data Toolbox ‚Äì Quick Start Guide\n\ncci_store = new_data_store(\"esa-cci\")\n# List all available data sets of an ECV\n# list_ecv_datasets(\"SOILMOISTURE\")\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/soilmoisture-cci#step-2-connect-to-the-esa-cci-data-store","position":7},{"hierarchy":{"lvl1":"Getting Started with Soil Moisture CCI Data","lvl2":"Step 3: Define the Dataset ID"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/soilmoisture-cci#step-3-define-the-dataset-id","position":8},{"hierarchy":{"lvl1":"Getting Started with Soil Moisture CCI Data","lvl2":"Step 3: Define the Dataset ID"},"content":"To work with a specific ESA CCI dataset, we need to specify its dataset ID. This unique identifier tells the toolbox which variable and product we want to access.\n\nIn this example, we are using a dataset providing Soil Moisture (SM) from multiple sensors. Soil moisture is a key climate variable for understanding water availability, land-atmosphere interactions, and drought conditions.\n\nTo explore other ESA CCI projects (e.g., Snow, Sea Level, Water Vapour), simply replace the dataset ID and variable name accordingly.\n\nWe will use the following dataset ID:\n\ndata_id = 'esacci.SOILMOISTURE.day.L3S.SSMV.multi-sensor.multi-platform.PASSIVE.v08-1.r1'\n\nüìò A full list of dataset IDs can be retrieved from the store or found in the \n\nESA CCI Climate Toolbox documentation.\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/soilmoisture-cci#step-3-define-the-dataset-id","position":9},{"hierarchy":{"lvl1":"Getting Started with Soil Moisture CCI Data","lvl2":"Step 4: Describe Dataset (Check Available Variables and Metadata)"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/soilmoisture-cci#step-4-describe-dataset-check-available-variables-and-metadata","position":10},{"hierarchy":{"lvl1":"Getting Started with Soil Moisture CCI Data","lvl2":"Step 4: Describe Dataset (Check Available Variables and Metadata)"},"content":"Before loading the full dataset, it‚Äôs helpful to inspect the metadata to understand its structure. This includes:\n\nAvailable variables (e.g., Soilmoisture (SM), uncertainty estimates)\n\nTemporal and spatial coverage\n\nData format and structure\n\nThis step ensures we know what the dataset contains and how to work with it. It also helps confirm that the variable we want to plot or analyze is actually included.\n\nüõ†Ô∏è Tip: You can use the description to verify variable names, dimensions (e.g., lat, lon, time), and time coverage.\n\nüìò More on dataset structure:üîó \n\nESA Climate Toolbox ‚Äì Data Access\n\ncci_store.describe_data(data_id)\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/soilmoisture-cci#step-4-describe-dataset-check-available-variables-and-metadata","position":11},{"hierarchy":{"lvl1":"Getting Started with Soil Moisture CCI Data","lvl2":"Step 5: Check Open Parameters for the Dataset"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/soilmoisture-cci#step-5-check-open-parameters-for-the-dataset","position":12},{"hierarchy":{"lvl1":"Getting Started with Soil Moisture CCI Data","lvl2":"Step 5: Check Open Parameters for the Dataset"},"content":"Before opening the dataset, we can inspect which parameters are supported by the Zarr opener (e.g., time_range, bbox, variable_names). This step helps ensure that we pass valid arguments when loading data and avoid errors.\n\nThe command below lists all expected input parameters and their allowed values for the selected dataset.\n\ncci_store.get_open_data_params_schema(data_id=data_id, opener_id='dataset:zarr:cciodp')\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/soilmoisture-cci#step-5-check-open-parameters-for-the-dataset","position":13},{"hierarchy":{"lvl1":"Getting Started with Soil Moisture CCI Data","lvl2":"Step 6: Define Region, Time Range, and Variables of Interest"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/soilmoisture-cci#step-6-define-region-time-range-and-variables-of-interest","position":14},{"hierarchy":{"lvl1":"Getting Started with Soil Moisture CCI Data","lvl2":"Step 6: Define Region, Time Range, and Variables of Interest"},"content":"Before opening the dataset, we define a few key parameters:\n\nTime range: the date(s) we want to load\n\nVariables: which data variable(s) to retrieve\n\n(Optional) Bounding box: spatial region of interest ‚Äî here we skip it to load the global dataset\n\nvariables = ['sm']  # Variable to retrieve\nstart_date = '2022-06-21'    # Start and end date (same for a single timestep)\nend_date = '2022-06-21'\n# bbox = (-10.0, 35.0, 30.0, 60.0)  # Optional: restrict to a region like Europe\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/soilmoisture-cci#step-6-define-region-time-range-and-variables-of-interest","position":15},{"hierarchy":{"lvl1":"Getting Started with Soil Moisture CCI Data","lvl2":"Step 7: Open the Dataset"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/soilmoisture-cci#step-7-open-the-dataset","position":16},{"hierarchy":{"lvl1":"Getting Started with Soil Moisture CCI Data","lvl2":"Step 7: Open the Dataset"},"content":"Now we open the dataset using the selected parameters.The ESA Climate Toolbox will download only the necessary data (e.g., variable and time range).\nYou can always adjust the time range or variables to explore different slices of the dataset.\n\nsm_ds = cci_store.open_data(\n    data_id=data_id,\n    variable_names=variables,\n    time_range=[start_date, end_date]\n    # bbox=bbox  # Uncomment if regional selection is needed\n)\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/soilmoisture-cci#step-7-open-the-dataset","position":17},{"hierarchy":{"lvl1":"Getting Started with Soil Moisture CCI Data","lvl2":"Step 8: Display Dataset Structure"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/soilmoisture-cci#step-8-display-dataset-structure","position":18},{"hierarchy":{"lvl1":"Getting Started with Soil Moisture CCI Data","lvl2":"Step 8: Display Dataset Structure"},"content":"We print a summary of the opened dataset to inspect its structure, dimensions, variables, and metadata.This helps verify that the data was loaded correctly and shows what is available for analysis and visualization.\nThis step is useful to understand what the dataset contains before working with it further.\n\nprint(\"\\nOpened Dataset:\\n\", sm_ds)\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/soilmoisture-cci#step-8-display-dataset-structure","position":19},{"hierarchy":{"lvl1":"Getting Started with Soil Moisture CCI Data","lvl2":"Step 9: Visualize Results"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/soilmoisture-cci#step-9-visualize-results","position":20},{"hierarchy":{"lvl1":"Getting Started with Soil Moisture CCI Data","lvl2":"Step 9: Visualize Results"},"content":"We now create a simple map plot of the selected variable.This allows us to explore the spatial patterns of the data ‚Äî in this case, the Soil Moisture for the selected day.\nFor more interactive and advanced visualizations, check out the \n\nESA Climate Toolbox or the \n\nToolbox documentation.\n\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport cartopy.crs as ccrs\n\n# Extract and load the soil moisture data\nsoil_moisture = sm_ds[\"sm\"].isel(time=0).squeeze().load()\nlat = sm_ds[\"lat\"].values\nlon = sm_ds[\"lon\"].values\n\n# Get date for the title\ntime_str = sm_ds['time'].isel(time=0).dt.strftime('%d %B %Y').item()\n\n# Plotting\nfig = plt.figure(figsize=(10, 5))\nax = plt.axes(projection=ccrs.PlateCarree())\n\nmesh = ax.pcolormesh(\n    lon, lat, soil_moisture,\n    cmap=\"BrBG\", vmin=0, vmax=0.6  # Soil moisture values typically range 0‚Äì0.6 m¬≥/m¬≥\n)\nax.coastlines()\nplt.colorbar(mesh, ax=ax, label=\"Soil Moisture (m¬≥/m¬≥)\")\nplt.title(\"Soil Moisture ‚Äì \" + time_str)\nplt.tight_layout()\nplt.show()","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/soilmoisture-cci#step-9-visualize-results","position":21},{"hierarchy":{"lvl1":"Getting Started with Vegetation CCI Data"},"type":"lvl1","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/vegetation-cci","position":0},{"hierarchy":{"lvl1":"Getting Started with Vegetation CCI Data"},"content":"","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/vegetation-cci","position":1},{"hierarchy":{"lvl1":"Getting Started with Vegetation CCI Data","lvl2":"1. Import Necessary Packages"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/vegetation-cci#id-1-import-necessary-packages","position":2},{"hierarchy":{"lvl1":"Getting Started with Vegetation CCI Data","lvl2":"1. Import Necessary Packages"},"content":"In this section, we import the required Python packages to work with ESA Climate Change Initiative (CCI) data. Most notably, we use the \n\nESA Climate Toolbox which simplifies access, manipulation, and visualization of CCI datasets in Python.\n\nThese packages allow us to:\n\nAccess satellite-based climate data records from ESA.\n\nHandle geospatial and temporal dimensions efficiently.\n\nVisualize data with intuitive plotting tools.\n\nüìö For a broader introduction to the toolbox and how to install it, visit:üîó \n\nESA CCI Climate Toolbox Quick Startüîó \n\nESA Climate Data Toolbox Website\n\nfrom xcube.core.store import new_data_store\nfrom esa_climate_toolbox.core import get_op\nfrom esa_climate_toolbox.core import list_ecv_datasets\nfrom esa_climate_toolbox.core import get_store\nfrom esa_climate_toolbox.core import list_datasets\nfrom esa_climate_toolbox.ops import plot\nimport xarray as xr\nimport matplotlib.pyplot as plt\nimport warnings\n%matplotlib inline\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/vegetation-cci#id-1-import-necessary-packages","position":3},{"hierarchy":{"lvl1":"Getting Started with Vegetation CCI Data","lvl2":"Step 2: Connect to the ESA CCI Data Store"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/vegetation-cci#step-2-connect-to-the-esa-cci-data-store","position":4},{"hierarchy":{"lvl1":"Getting Started with Vegetation CCI Data","lvl2":"Step 2: Connect to the ESA CCI Data Store"},"content":"The ESA Climate Toolbox provides direct access to the ESA Climate Data Store, which hosts harmonized satellite-based climate data records produced under the ESA Climate Change Initiative (CCI).\n\nIn this step, we establish a connection to the data store so we can browse and open datasets. This connection allows us to access data without having to download files manually ‚Äî a convenient way to explore and analyze large geospatial datasets in cloud-friendly formats such as Zarr or Kerchunk.\n\nThe data store includes a wide range of essential climate variables (ECVs), such as aerosols, land surface temperature, sea level, and soil moisture.\n\nüìò Learn more about available datasets:üîó \n\nESA Climate Data Toolbox ‚Äì Quick Start Guide\n\ncci_store = new_data_store(\"esa-cci\")\n# List all available data sets of an ECV\n# list_ecv_datasets(\"vegetation\")\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/vegetation-cci#step-2-connect-to-the-esa-cci-data-store","position":5},{"hierarchy":{"lvl1":"Getting Started with Vegetation CCI Data","lvl2":"Step 3: Define the Dataset ID"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/vegetation-cci#step-3-define-the-dataset-id","position":6},{"hierarchy":{"lvl1":"Getting Started with Vegetation CCI Data","lvl2":"Step 3: Define the Dataset ID"},"content":"To work with a specific ESA CCI dataset, we need to specify its dataset ID. This unique identifier tells the toolbox which variable and product we want to access.\n\nIn this example, we are using a dataset providing Leaf Area Index (LAI) from the Vegetation CCI project. LAI is a key biophysical variable that describes vegetation density and plays a crucial role in land surface processes, including evapotranspiration, photosynthesis, and energy exchange.\n\nTo explore other ESA CCI projects (e.g., Soil Moisture, Ocean Colour, Snow), simply replace the dataset ID and variable name accordingly.\n\nWe will use the following dataset ID:\n\ndata_id = 'esacci.VEGETATION.5-days.L3S.VP_PRODUCTS.VEGETATION.multi-platform.MERGED.v1-0.r1'\n\nüìò A full list of dataset IDs can be retrieved from the store or found in the \n\nESA CCI Climate Toolbox documentation.\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/vegetation-cci#step-3-define-the-dataset-id","position":7},{"hierarchy":{"lvl1":"Getting Started with Vegetation CCI Data","lvl2":"Step 4: Describe Dataset (Check Available Variables and Metadata)"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/vegetation-cci#step-4-describe-dataset-check-available-variables-and-metadata","position":8},{"hierarchy":{"lvl1":"Getting Started with Vegetation CCI Data","lvl2":"Step 4: Describe Dataset (Check Available Variables and Metadata)"},"content":"Before loading the full dataset, it‚Äôs helpful to inspect the metadata to understand its structure. This includes:\n\nAvailable variables (e.g., AOD, uncertainty estimates)\n\nTemporal and spatial coverage\n\nData format and structure\n\nThis step ensures we know what the dataset contains and how to work with it. It also helps confirm that the variable we want to plot or analyze is actually included.\n\nüõ†Ô∏è Tip: You can use the description to verify variable names, dimensions (e.g., lat, lon, time), and time coverage.\n\nüìò More on dataset structure:üîó \n\nESA Climate Toolbox ‚Äì Data Access\n\ncci_store.describe_data(data_id)\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/vegetation-cci#step-4-describe-dataset-check-available-variables-and-metadata","position":9},{"hierarchy":{"lvl1":"Getting Started with Vegetation CCI Data","lvl2":"Step 5: Check Open Parameters for the Dataset"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/vegetation-cci#step-5-check-open-parameters-for-the-dataset","position":10},{"hierarchy":{"lvl1":"Getting Started with Vegetation CCI Data","lvl2":"Step 5: Check Open Parameters for the Dataset"},"content":"Before opening the dataset, we can inspect which parameters are supported by the Zarr opener (e.g., time_range, bbox, variable_names). This step helps ensure that we pass valid arguments when loading data and avoid errors.\n\nThe command below lists all expected input parameters and their allowed values for the selected dataset.\n\ncci_store.get_open_data_params_schema(data_id=data_id, opener_id='dataset:zarr:cciodp')\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/vegetation-cci#step-5-check-open-parameters-for-the-dataset","position":11},{"hierarchy":{"lvl1":"Getting Started with Vegetation CCI Data","lvl2":"Step 6: Define Region, Time Range, and Variables of Interest"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/vegetation-cci#step-6-define-region-time-range-and-variables-of-interest","position":12},{"hierarchy":{"lvl1":"Getting Started with Vegetation CCI Data","lvl2":"Step 6: Define Region, Time Range, and Variables of Interest"},"content":"Before opening the dataset, we define a few key parameters:\n\nTime range: the date(s) we want to load\n\nVariables: which data variable(s) to retrieve\n\n(Optional) Bounding box: spatial region of interest ‚Äî here we skip it to load the global dataset\n\nvariables = ['LAI']  # Variable to retrieve\nstart_date = '2019-06-01'    # Start and end date (same for a single timestep)\nend_date = '2019-06-30'\n# bbox = (-180, -57, 180, 75) # Not supported by dataset\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/vegetation-cci#step-6-define-region-time-range-and-variables-of-interest","position":13},{"hierarchy":{"lvl1":"Getting Started with Vegetation CCI Data","lvl2":"Step 7: Open the Dataset"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/vegetation-cci#step-7-open-the-dataset","position":14},{"hierarchy":{"lvl1":"Getting Started with Vegetation CCI Data","lvl2":"Step 7: Open the Dataset"},"content":"Now we open the dataset using the selected parameters.The ESA Climate Toolbox will download only the necessary data (e.g., variable and time range).\nYou can always adjust the time range or variables to explore different slices of the dataset.\n\nvegetation_ds = cci_store.open_data(\n    data_id=data_id,\n    variable_names=variables\n    # time_range=[start_date, end_date]\n    # bbox=bbox  # Uncomment if regional selection is needed\n)\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/vegetation-cci#step-7-open-the-dataset","position":15},{"hierarchy":{"lvl1":"Getting Started with Vegetation CCI Data","lvl2":"Step 8: Display Dataset Structure"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/vegetation-cci#step-8-display-dataset-structure","position":16},{"hierarchy":{"lvl1":"Getting Started with Vegetation CCI Data","lvl2":"Step 8: Display Dataset Structure"},"content":"We print a summary of the opened dataset to inspect its structure, dimensions, variables, and metadata.This helps verify that the data was loaded correctly and shows what is available for analysis and visualization.\nThis step is useful to understand what the dataset contains before working with it further.\n\nprint(\"\\nOpened Dataset:\\n\", vegetation_ds)\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/vegetation-cci#step-8-display-dataset-structure","position":17},{"hierarchy":{"lvl1":"Getting Started with Vegetation CCI Data","lvl2":"Step 9: Visualize Results"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/vegetation-cci#step-9-visualize-results","position":18},{"hierarchy":{"lvl1":"Getting Started with Vegetation CCI Data","lvl2":"Step 9: Visualize Results"},"content":"We now create a simple map plot of the selected variable.This allows us to explore the spatial patterns of the data ‚Äî in this case, the Aerosol Optical Depth (AOD) for the selected day.\nFor more interactive and advanced visualizations, check out the \n\nESA Climate Toolbox or the \n\nToolbox documentation.\n\nimport matplotlib.pyplot as plt\n\nlai = vegetation_ds[\"LAI\"].isel(time=0)\n\n# Plot\nplt.figure(figsize=(10, 5))\nlai.plot(\n    cmap=\"YlGn\",  # reverse blues\n    cbar_kwargs={\"label\": \"LAI\"}\n)\nplt.title(\"LAI (Leaf Area Index)\")\nplt.xlabel(\"Longitude\")\nplt.ylabel(\"Latitude\")\nplt.tight_layout()\nplt.show()","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/vegetation-cci#step-9-visualize-results","position":19},{"hierarchy":{"lvl1":"Getting Started with Water Vapour CCI Data"},"type":"lvl1","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/watervapour-cci","position":0},{"hierarchy":{"lvl1":"Getting Started with Water Vapour CCI Data"},"content":"\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/watervapour-cci","position":1},{"hierarchy":{"lvl1":"Getting Started with Water Vapour CCI Data"},"type":"lvl1","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/watervapour-cci#getting-started-with-water-vapour-cci-data","position":2},{"hierarchy":{"lvl1":"Getting Started with Water Vapour CCI Data"},"content":"\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/watervapour-cci#getting-started-with-water-vapour-cci-data","position":3},{"hierarchy":{"lvl1":"Getting Started with Water Vapour CCI Data","lvl2":"1. Import Necessary Packages"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/watervapour-cci#id-1-import-necessary-packages","position":4},{"hierarchy":{"lvl1":"Getting Started with Water Vapour CCI Data","lvl2":"1. Import Necessary Packages"},"content":"In this section, we import the required Python packages to work with ESA Climate Change Initiative (CCI) data. Most notably, we use the \n\nESA Climate Toolbox which simplifies access, manipulation, and visualization of CCI datasets in Python.\n\nThese packages allow us to:\n\nAccess satellite-based climate data records from ESA.\n\nHandle geospatial and temporal dimensions efficiently.\n\nVisualize data with intuitive plotting tools.\n\nüìö For a broader introduction to the toolbox and how to install it, visit:üîó \n\nESA CCI Climate Toolbox Quick Startüîó \n\nESA Climate Data Toolbox Website\n\nfrom xcube.core.store import new_data_store\nfrom esa_climate_toolbox.core import get_op\nfrom esa_climate_toolbox.core import list_ecv_datasets\nfrom esa_climate_toolbox.core import get_store\nfrom esa_climate_toolbox.core import list_datasets\nfrom esa_climate_toolbox.ops import plot\nimport xarray as xr\nimport matplotlib.pyplot as plt\nimport warnings\nwarnings.filterwarnings(\"ignore\") # Suppressing warnings to keep notebook output clean\n%matplotlib inline\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/watervapour-cci#id-1-import-necessary-packages","position":5},{"hierarchy":{"lvl1":"Getting Started with Water Vapour CCI Data","lvl2":"Step 2: Connect to the ESA CCI Data Store"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/watervapour-cci#step-2-connect-to-the-esa-cci-data-store","position":6},{"hierarchy":{"lvl1":"Getting Started with Water Vapour CCI Data","lvl2":"Step 2: Connect to the ESA CCI Data Store"},"content":"The ESA Climate Toolbox provides direct access to the ESA Climate Data Store, which hosts harmonized satellite-based climate data records produced under the ESA Climate Change Initiative (CCI).\n\nIn this step, we establish a connection to the data store so we can browse and open datasets. This connection allows us to access data without having to download files manually ‚Äî a convenient way to explore and analyze large geospatial datasets in cloud-friendly formats such as Zarr or Kerchunk.\n\nThe data store includes a wide range of essential climate variables (ECVs), such as aerosols, land surface temperature, sea level, and soil moisture.\n\nüìò Learn more about available datasets:üîó \n\nESA Climate Data Toolbox ‚Äì Quick Start Guide\n\ncci_store = new_data_store(\"esa-cci\")\n# List all available data sets of an ECV\n# list_ecv_datasets(\"WATERVAPOUR\")\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/watervapour-cci#step-2-connect-to-the-esa-cci-data-store","position":7},{"hierarchy":{"lvl1":"Getting Started with Water Vapour CCI Data","lvl2":"Step 3: Define the Dataset ID"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/watervapour-cci#step-3-define-the-dataset-id","position":8},{"hierarchy":{"lvl1":"Getting Started with Water Vapour CCI Data","lvl2":"Step 3: Define the Dataset ID"},"content":"To work with a specific ESA CCI dataset, we need to specify its dataset ID. This unique identifier tells the toolbox which variable and product we want to access.\n\nIn this example, we‚Äôre working with the Water Vapour CCI dataset, which provides Total Column Water Vapour (TCWV) ‚Äî the total amount of water vapor in a column of the atmosphere. This variable is key for understanding the hydrological cycle, weather systems, and atmospheric dynamics.\n\nFor other CCI datasets, update the dataset ID and variable name accordingly.\n\nWe will use the following dataset ID:\n\ndata_id = 'esacci.WATERVAPOUR.mon.L3S.TCWV.multi-sensor.multi-platform.TCWV_land_005deg.3-2.r1'\n\nüìò A full list of dataset IDs can be retrieved from the store or found in the \n\nESA CCI Climate Toolbox documentation.\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/watervapour-cci#step-3-define-the-dataset-id","position":9},{"hierarchy":{"lvl1":"Getting Started with Water Vapour CCI Data","lvl2":"Step 4: Describe Dataset (Check Available Variables and Metadata)"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/watervapour-cci#step-4-describe-dataset-check-available-variables-and-metadata","position":10},{"hierarchy":{"lvl1":"Getting Started with Water Vapour CCI Data","lvl2":"Step 4: Describe Dataset (Check Available Variables and Metadata)"},"content":"Before loading the full dataset, it‚Äôs helpful to inspect the metadata to understand its structure. This includes:\n\nAvailable variables (e.g., TCWV, uncertainty estimates)\n\nTemporal and spatial coverage\n\nData format and structure\n\nThis step ensures we know what the dataset contains and how to work with it. It also helps confirm that the variable we want to plot or analyze is actually included.\n\nüõ†Ô∏è Tip: You can use the description to verify variable names, dimensions (e.g., lat, lon, time), and time coverage.\n\nüìò More on dataset structure:üîó \n\nESA Climate Toolbox ‚Äì Data Access\n\ncci_store.describe_data(data_id)\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/watervapour-cci#step-4-describe-dataset-check-available-variables-and-metadata","position":11},{"hierarchy":{"lvl1":"Getting Started with Water Vapour CCI Data","lvl2":"Step 5: Check Open Parameters for the Dataset"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/watervapour-cci#step-5-check-open-parameters-for-the-dataset","position":12},{"hierarchy":{"lvl1":"Getting Started with Water Vapour CCI Data","lvl2":"Step 5: Check Open Parameters for the Dataset"},"content":"Before opening the dataset, we can inspect which parameters are supported by the Zarr opener (e.g., time_range, bbox, variable_names). This step helps ensure that we pass valid arguments when loading data and avoid errors.\n\nThe command below lists all expected input parameters and their allowed values for the selected dataset.\n\ncci_store.get_open_data_params_schema(data_id=data_id, opener_id='dataset:zarr:cciodp')\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/watervapour-cci#step-5-check-open-parameters-for-the-dataset","position":13},{"hierarchy":{"lvl1":"Getting Started with Water Vapour CCI Data","lvl2":"Step 6: Define Region, Time Range, and Variables of Interest"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/watervapour-cci#step-6-define-region-time-range-and-variables-of-interest","position":14},{"hierarchy":{"lvl1":"Getting Started with Water Vapour CCI Data","lvl2":"Step 6: Define Region, Time Range, and Variables of Interest"},"content":"Before opening the dataset, we define a few key parameters:\n\nTime range: the date(s) we want to load\n\nVariables: which data variable(s) to retrieve\n\n(Optional) Bounding box: spatial region of interest ‚Äî here we skip it to load the global dataset\n\nvariables = ['tcwv']  # Variable to retrieve\nstart_date = '2017-06-01'    # Start and end date (same for a single timestep)\nend_date = '2017-06-30'\n# bbox = (-10.0, 35.0, 30.0, 60.0)  # Optional: restrict to a region like Europe\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/watervapour-cci#step-6-define-region-time-range-and-variables-of-interest","position":15},{"hierarchy":{"lvl1":"Getting Started with Water Vapour CCI Data","lvl2":"Step 7: Open the Dataset"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/watervapour-cci#step-7-open-the-dataset","position":16},{"hierarchy":{"lvl1":"Getting Started with Water Vapour CCI Data","lvl2":"Step 7: Open the Dataset"},"content":"Now we open the dataset using the selected parameters.The ESA Climate Toolbox will download only the necessary data (e.g., variable and time range).\nYou can always adjust the time range or variables to explore different slices of the dataset.\n\nwv_ds = cci_store.open_data(\n    data_id=data_id,\n    variable_names=variables,\n    time_range=[start_date, end_date]\n    # bbox=bbox  # Uncomment if regional selection is needed\n)\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/watervapour-cci#step-7-open-the-dataset","position":17},{"hierarchy":{"lvl1":"Getting Started with Water Vapour CCI Data","lvl2":"Step 8: Display Dataset Structure"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/watervapour-cci#step-8-display-dataset-structure","position":18},{"hierarchy":{"lvl1":"Getting Started with Water Vapour CCI Data","lvl2":"Step 8: Display Dataset Structure"},"content":"We print a summary of the opened dataset to inspect its structure, dimensions, variables, and metadata.This helps verify that the data was loaded correctly and shows what is available for analysis and visualization.\nThis step is useful to understand what the dataset contains before working with it further.\n\nprint(\"\\nOpened Dataset:\\n\", wv_ds)\n\n","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/watervapour-cci#step-8-display-dataset-structure","position":19},{"hierarchy":{"lvl1":"Getting Started with Water Vapour CCI Data","lvl2":"Step 9: Visualize Results"},"type":"lvl2","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/watervapour-cci#step-9-visualize-results","position":20},{"hierarchy":{"lvl1":"Getting Started with Water Vapour CCI Data","lvl2":"Step 9: Visualize Results"},"content":"We now create a simple map plot of the selected variable.This allows us to explore the spatial patterns of the data ‚Äî in this case, the Total Column Water Vapour (TCWV) for the selected day.\nFor more interactive and advanced visualizations, check out the \n\nESA Climate Toolbox or the \n\nToolbox documentation.\n\nimport matplotlib.pyplot as plt\nimport cartopy.crs as ccrs\nimport pandas as pd\n\n# Extract and format time\ntime_str = pd.to_datetime(wv_ds[\"time\"].values[0]).strftime(\"%B %Y\")\n\n# Load the variable and coordinates\ntcwv = wv_ds[\"tcwv\"].isel(time=0).squeeze().load()\nlat = wv_ds[\"lat\"].values\nlon = wv_ds[\"lon\"].values\n\n# Create the plot\nfig = plt.figure(figsize=(12, 5))\nax = plt.axes(projection=ccrs.PlateCarree())\n\nmesh = ax.pcolormesh(\n    lon, lat, tcwv,\n    cmap=\"YlGnBu\",\n    transform=ccrs.PlateCarree()\n)\n\nax.coastlines()\nplt.colorbar(mesh, ax=ax, orientation='vertical', label=\"Total Column Water Vapour (kg/m¬≤)\")\nplt.title(f\"Monthly Mean Water Vapour CCI ‚Äì TCWV for {time_str}\")\nplt.tight_layout()\nplt.show()","type":"content","url":"/external-notebooks/esa-cci/cci-notebooks/notebooks/watervapour-cci#step-9-visualize-results","position":21},{"hierarchy":{"lvl1":"ESA Climate Change Competition: Forests in a Changing Climate"},"type":"lvl1","url":"/external-notebooks/esa-cci/ect-training/esa-climate-change-competition/competition-forests-in-a-changing-climate","position":0},{"hierarchy":{"lvl1":"ESA Climate Change Competition: Forests in a Changing Climate"},"content":"\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/esa-climate-change-competition/competition-forests-in-a-changing-climate","position":1},{"hierarchy":{"lvl1":"ESA Climate Change Competition: Forests in a Changing Climate","lvl3":"Welcome to the ESA Climate Change Communication Competition"},"type":"lvl3","url":"/external-notebooks/esa-cci/ect-training/esa-climate-change-competition/competition-forests-in-a-changing-climate#welcome-to-the-esa-climate-change-communication-competition","position":2},{"hierarchy":{"lvl1":"ESA Climate Change Competition: Forests in a Changing Climate","lvl3":"Welcome to the ESA Climate Change Communication Competition"},"content":"","type":"content","url":"/external-notebooks/esa-cci/ect-training/esa-climate-change-competition/competition-forests-in-a-changing-climate#welcome-to-the-esa-climate-change-communication-competition","position":3},{"hierarchy":{"lvl1":"ESA Climate Change Competition: Forests in a Changing Climate","lvl3":"Explore forests in a changing climate with the ESA CCI datasets"},"type":"lvl3","url":"/external-notebooks/esa-cci/ect-training/esa-climate-change-competition/competition-forests-in-a-changing-climate#explore-forests-in-a-changing-climate-with-the-esa-cci-datasets","position":4},{"hierarchy":{"lvl1":"ESA Climate Change Competition: Forests in a Changing Climate","lvl3":"Explore forests in a changing climate with the ESA CCI datasets"},"content":"","type":"content","url":"/external-notebooks/esa-cci/ect-training/esa-climate-change-competition/competition-forests-in-a-changing-climate#explore-forests-in-a-changing-climate-with-the-esa-cci-datasets","position":5},{"hierarchy":{"lvl1":"ESA Climate Change Competition: Forests in a Changing Climate","lvl4":"What You‚Äôll Learn in this Notebook","lvl3":"Explore forests in a changing climate with the ESA CCI datasets"},"type":"lvl4","url":"/external-notebooks/esa-cci/ect-training/esa-climate-change-competition/competition-forests-in-a-changing-climate#what-youll-learn-in-this-notebook","position":6},{"hierarchy":{"lvl1":"ESA Climate Change Competition: Forests in a Changing Climate","lvl4":"What You‚Äôll Learn in this Notebook","lvl3":"Explore forests in a changing climate with the ESA CCI datasets"},"content":"By working through this notebook, you will:\n\nAccess and explore CCI datasets using the ESA Climate Toolbox\n\nCreate regional and temporal subsets of climate variables\n\nVisualize different essential climate variables (ECV)\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/esa-climate-change-competition/competition-forests-in-a-changing-climate#what-youll-learn-in-this-notebook","position":7},{"hierarchy":{"lvl1":"ESA Climate Change Competition: Forests in a Changing Climate","lvl3":"Setup & Connect to ESA CCI"},"type":"lvl3","url":"/external-notebooks/esa-cci/ect-training/esa-climate-change-competition/competition-forests-in-a-changing-climate#setup-connect-to-esa-cci","position":8},{"hierarchy":{"lvl1":"ESA Climate Change Competition: Forests in a Changing Climate","lvl3":"Setup & Connect to ESA CCI"},"content":"In this section, we import the required Python packages to work with ESA Climate Change Initiative (CCI) data. Most notably, we use the \n\nESA Climate Toolbox which simplifies access, manipulation, and visualization of CCI datasets in Python.\n\nThese packages allow us to:\n\nAccess satellite-based climate data records from ESA.\n\nHandle geospatial and temporal dimensions efficiently.\n\nVisualize data with intuitive plotting tools.\n\nüìö For a broader introduction to the toolbox and how to install it, visit: üîó \n\nESA CCI Climate Toolbox Quick Start üîó \n\nESA Climate Data Toolbox Website\n\n# ESA Climate Toolbox imports for accessing and plotting ESA CCI data\nfrom esa_climate_toolbox.core import get_op              # Get predefined operations (e.g., time series, averages)\nfrom esa_climate_toolbox.core import list_ecv_datasets   # List available datasets per ECV (Essential Climate Variable)\nfrom esa_climate_toolbox.core import get_store           # Connect to an ESA data store\nfrom esa_climate_toolbox.core import list_datasets       # List all datasets in a store\nfrom esa_climate_toolbox.ops import plot                 # High-level plotting functions for CCI data\n\n# Used for connecting to remote data sources (e.g., ESA CCI ODP)\nfrom xcube.core.store import new_data_store\n\n# For displaying geographic regions interactively (if desired)\nfrom IPython.display import GeoJSON\nimport shapely.geometry   # Handling geometric objects like bounding boxes\n\n# Core data science libraries\nimport pandas as pd       # For tabular data handling and time manipulation\nimport numpy as np        # For numerical operations\nimport xarray as xr       # For multi-dimensional climate data structures\n\n# Mapping and plotting\nimport matplotlib.pyplot as plt       # Plotting library\nimport cartopy.crs as ccrs            # Cartographic projections for spatial data\n\n# Individual colormap creation\nfrom matplotlib.colors import ListedColormap\n\n# Notebook settings\nimport warnings\nwarnings.filterwarnings(\"ignore\") # Suppressing warnings to keep notebook output clean\n%matplotlib inline\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/esa-climate-change-competition/competition-forests-in-a-changing-climate#setup-connect-to-esa-cci","position":9},{"hierarchy":{"lvl1":"ESA Climate Change Competition: Forests in a Changing Climate","lvl3":"Zooming In - Defining a Region of Interest"},"type":"lvl3","url":"/external-notebooks/esa-cci/ect-training/esa-climate-change-competition/competition-forests-in-a-changing-climate#zooming-in-defining-a-region-of-interest","position":10},{"hierarchy":{"lvl1":"ESA Climate Change Competition: Forests in a Changing Climate","lvl3":"Zooming In - Defining a Region of Interest"},"content":"The challenge is focussing on tropic biomass. Thus, we can define a region of interest that captures parts of the tropical forest, e.g. in the Amazon.\n\nWe can define smaller regions, e.g. north of Bolivia which has experienced some decline in Biomass over the years due to droughts and fires. Another example area is defined around Altamira in Brazil, which experienced a lot deforestation due to agriculture.\n\n# Set bounding box by defining the longitude minimum, latitude minimum, longitude maximum and latitude maximum\n# Example bboxes: \nbbox = (-51.0, -2.8, -50.0, -2) # Altamira region\n\n# bbox = (-63, -15.5, -52, -9) # Larger bounding box -> longer computation time\n \n# Display bounding box for reference\nGeoJSON(shapely.geometry.box(*bbox).__geo_interface__)\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/esa-climate-change-competition/competition-forests-in-a-changing-climate#zooming-in-defining-a-region-of-interest","position":11},{"hierarchy":{"lvl1":"ESA Climate Change Competition: Forests in a Changing Climate","lvl3":"Using the ESA Climate Toolbox"},"type":"lvl3","url":"/external-notebooks/esa-cci/ect-training/esa-climate-change-competition/competition-forests-in-a-changing-climate#using-the-esa-climate-toolbox","position":12},{"hierarchy":{"lvl1":"ESA Climate Change Competition: Forests in a Changing Climate","lvl3":"Using the ESA Climate Toolbox"},"content":"The ESA Climate Toolbox provides direct access to the ESA Climate Data Store, which hosts harmonized satellite-based climate data records produced under the ESA Climate Change Initiative (CCI).\n\nIn this step, we establish a connection to the data store so we can browse and open datasets. This connection allows us to access data without having to download files manually ‚Äî a convenient way to explore and analyze large geospatial datasets in cloud-friendly formats such as Zarr or Kerchunk.\n\nThe data store includes a wide range of essential climate variables (ECVs), such as biomass, land surface temperature, burned areas, and soil moisture.\n\nüìò Learn more about available datasets: üîó \n\nESA Climate Data Toolbox ‚Äì Quick Start Guide\n\nFirst, we explore how to access the biomass data from the ESA Climate Change Initiative (CCI) data store. This includes identifying datasets of interest, understanding their metadata, and preparing for subsequent analysis.\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/esa-climate-change-competition/competition-forests-in-a-changing-climate#using-the-esa-climate-toolbox","position":13},{"hierarchy":{"lvl1":"ESA Climate Change Competition: Forests in a Changing Climate","lvl3":"Explore the Biomass Dataset"},"type":"lvl3","url":"/external-notebooks/esa-cci/ect-training/esa-climate-change-competition/competition-forests-in-a-changing-climate#explore-the-biomass-dataset","position":14},{"hierarchy":{"lvl1":"ESA Climate Change Competition: Forests in a Changing Climate","lvl3":"Explore the Biomass Dataset"},"content":"Identify the biomass datasets which are available for access. The list_ecv_datasets command returns the names of datasets for a given ECV.\n\n# list_ecv_datasets(\"biomass\")\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/esa-climate-change-competition/competition-forests-in-a-changing-climate#explore-the-biomass-dataset","position":15},{"hierarchy":{"lvl1":"ESA Climate Change Competition: Forests in a Changing Climate","lvl4":"Background: zarr & kerchunk & NetCDF format","lvl3":"Explore the Biomass Dataset"},"type":"lvl4","url":"/external-notebooks/esa-cci/ect-training/esa-climate-change-competition/competition-forests-in-a-changing-climate#background-zarr-kerchunk-netcdf-format","position":16},{"hierarchy":{"lvl1":"ESA Climate Change Competition: Forests in a Changing Climate","lvl4":"Background: zarr & kerchunk & NetCDF format","lvl3":"Explore the Biomass Dataset"},"content":"For some data it might be a good idea to use the zarr or kerchunk format, as data loading will be much faster. Several CCI data records are available in these formats as they have some advantages. Zarr is ideal for new datasets that will be frequently accessed, updated, or analyzed and it is suitable for large-scale distributed processing in cloud-native workflows. Kerchunk is best for efficiently accessing legacy data formats (e.g., NetCDF, GRIB) stored in object stores without converting them and useful when data duplication must be avoided. NetCDF, while widely used and highly compatible with scientific tools, is less optimized for cloud-native workflows and accessing large datasets efficiently, making it better suited for smaller-scale, traditional file-based analysis.\n\nFeature\n\nZarr\n\nKerchunk\n\nNetCDF\n\nStorage Format\n\nSelf-contained, new format\n\nWrapper for existing formats\n\nTraditional file-based format\n\nCloud-Native\n\nYes\n\nYes\n\nNo\n\nEfficiency\n\nGood for accessing subsets\n\nGreat for legacy data in object stores\n\nEfficient for small to medium files\n\nCompression\n\nSupports multiple algorithms\n\nDepends on underlying format\n\nLimited to format-specific methods\n\nMetadata Handling\n\nEmbedded metadata\n\nExternal JSON index\n\nEmbedded in file\n\nRead/Write Access\n\nSupports both\n\nRead-only\n\nRead and write\n\nSetup Overhead\n\nNone, works out of the box\n\nRequires pre-generated JSON indices\n\nNone, but slower for large datasets\n\nStorage Duplication\n\nRequires duplicating data\n\nMinimal, uses existing files\n\nMinimal, as data is stored in single files\n\nPerformance\n\nOptimized for chunk-based access\n\nSlight overhead for index lookup\n\nCan be slow for very large files\n\nSelective loading\n\nNot supported, entire dataset must be loaded\n\nNot supported, entire dataset must be loaded\n\nAllows selecting variables and time ranges before loading\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/esa-climate-change-competition/competition-forests-in-a-changing-climate#background-zarr-kerchunk-netcdf-format","position":17},{"hierarchy":{"lvl1":"ESA Climate Change Competition: Forests in a Changing Climate","lvl3":"Load & Visualise the Biomass Data"},"type":"lvl3","url":"/external-notebooks/esa-cci/ect-training/esa-climate-change-competition/competition-forests-in-a-changing-climate#load-visualise-the-biomass-data","position":18},{"hierarchy":{"lvl1":"ESA Climate Change Competition: Forests in a Changing Climate","lvl3":"Load & Visualise the Biomass Data"},"content":"","type":"content","url":"/external-notebooks/esa-cci/ect-training/esa-climate-change-competition/competition-forests-in-a-changing-climate#load-visualise-the-biomass-data","position":19},{"hierarchy":{"lvl1":"ESA Climate Change Competition: Forests in a Changing Climate","lvl4":"Define the Dataset ID","lvl3":"Load & Visualise the Biomass Data"},"type":"lvl4","url":"/external-notebooks/esa-cci/ect-training/esa-climate-change-competition/competition-forests-in-a-changing-climate#define-the-dataset-id","position":20},{"hierarchy":{"lvl1":"ESA Climate Change Competition: Forests in a Changing Climate","lvl4":"Define the Dataset ID","lvl3":"Load & Visualise the Biomass Data"},"content":"To work with a specific ESA CCI dataset, we need to specify its dataset ID. This unique identifier tells the toolbox which variable and product we want to access.\n\nIn this section, we are using a the biomass zarr file. The latest biomass zarr file is only available unti 2020, however, the file will soon be updated.\n\nYou can find the variables of the products under data_vars. For the biomass, we will use the variable agb which is the abbreviation for above-ground biomass.\n\nFirst, we define the dataset ID and the store from which we retrieve the data (for the biomass zarr file it is esa-cci-zarr, if you choose to call the netcdf file, use the esa-ccistore). With the command describe_data, we can have a look at the structure of the file, such as time, dimension and the variable stored within.\n\n# Uncomment the next line, if you want to use the cci store to call a netcdf file\n# cci_store = new_data_store(\"esa-cci\")\n\n# Defining the esa cci zarr store\ncci_zarr_store = new_data_store(\"esa-cci-zarr\")\n\n# Defining the data id (see list above from the command list_ecv_datasets\ndata_id = 'ESACCI-BIOMASS-L4-AGB-MERGED-100m-2010-2020-fv4.0.zarr'\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/esa-climate-change-competition/competition-forests-in-a-changing-climate#define-the-dataset-id","position":21},{"hierarchy":{"lvl1":"ESA Climate Change Competition: Forests in a Changing Climate","lvl4":"Describe the Dataset (Check Available Variables and Metadata)","lvl3":"Load & Visualise the Biomass Data"},"type":"lvl4","url":"/external-notebooks/esa-cci/ect-training/esa-climate-change-competition/competition-forests-in-a-changing-climate#describe-the-dataset-check-available-variables-and-metadata","position":22},{"hierarchy":{"lvl1":"ESA Climate Change Competition: Forests in a Changing Climate","lvl4":"Describe the Dataset (Check Available Variables and Metadata)","lvl3":"Load & Visualise the Biomass Data"},"content":"Before loading the full dataset, it‚Äôs helpful to inspect the metadata to understand its structure. This includes:\n\nAvailable variables (e.g., above ground biomass (agb), uncertainty estimates)\n\nTemporal and spatial coverage\n\nData format and structure\n\nThis step ensures we know what the dataset contains and how to work with it. It also helps confirm that the variable we want to plot or analyze is actually included.\n\nüõ†Ô∏è Tip: You can use the description to verify variable names, dimensions (e.g., lat, lon, time), and time coverage.\n\nüìò More on dataset structure: üîó \n\nESA Climate Toolbox ‚Äì Data Access\n\n# Uncomment the next line if you are using the netcdf file\n# cci_store.describe_data(data_id)\n\n# Checking the data structure of the chosen file\ncci_zarr_store.describe_data(data_id)\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/esa-climate-change-competition/competition-forests-in-a-changing-climate#describe-the-dataset-check-available-variables-and-metadata","position":23},{"hierarchy":{"lvl1":"ESA Climate Change Competition: Forests in a Changing Climate","lvl4":"Open the Dataset","lvl3":"Load & Visualise the Biomass Data"},"type":"lvl4","url":"/external-notebooks/esa-cci/ect-training/esa-climate-change-competition/competition-forests-in-a-changing-climate#open-the-dataset","position":24},{"hierarchy":{"lvl1":"ESA Climate Change Competition: Forests in a Changing Climate","lvl4":"Open the Dataset","lvl3":"Load & Visualise the Biomass Data"},"content":"Now we open the dataset using the zarr. When using the zarr format, the whole dataset is loaded. We will later use the cci-store where we can define the variables and time range we are interested in. For now, let‚Äôs load the entire dataset:\n\nbiomass_ds = cci_zarr_store.open_data(\n    data_id=data_id\n)\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/esa-climate-change-competition/competition-forests-in-a-changing-climate#open-the-dataset","position":25},{"hierarchy":{"lvl1":"ESA Climate Change Competition: Forests in a Changing Climate","lvl4":"Create a Spacial Subset of the Dataset:","lvl3":"Load & Visualise the Biomass Data"},"type":"lvl4","url":"/external-notebooks/esa-cci/ect-training/esa-climate-change-competition/competition-forests-in-a-changing-climate#create-a-spacial-subset-of-the-dataset","position":26},{"hierarchy":{"lvl1":"ESA Climate Change Competition: Forests in a Changing Climate","lvl4":"Create a Spacial Subset of the Dataset:","lvl3":"Load & Visualise the Biomass Data"},"content":"To focus our analysis on the defined region above, we extract a spatial subset from the global dataset. Using the bounding box we defined earlier, the function subset_spatial filters the dataset to include only the relevant area. This helps reduce data volume and enables more targeted visualizations and calculations in the following steps.\n\nIf you would like to retrieve a list of all available operation tools, you can execute:\n\nfrom esa_climate_toolbox.core import list_operations\n\nlist_operations()\n\nsubset_spatial_op = get_op('subset_spatial')\nbiomass_sub = subset_spatial_op(ds=biomass_ds, region=bbox)\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/esa-climate-change-competition/competition-forests-in-a-changing-climate#create-a-spacial-subset-of-the-dataset","position":27},{"hierarchy":{"lvl1":"ESA Climate Change Competition: Forests in a Changing Climate","lvl4":"Visualize the Results","lvl3":"Load & Visualise the Biomass Data"},"type":"lvl4","url":"/external-notebooks/esa-cci/ect-training/esa-climate-change-competition/competition-forests-in-a-changing-climate#visualize-the-results","position":28},{"hierarchy":{"lvl1":"ESA Climate Change Competition: Forests in a Changing Climate","lvl4":"Visualize the Results","lvl3":"Load & Visualise the Biomass Data"},"content":"We now create a simple map plot of the spatial subset and loop it across the years.\nThis allows us to explore the spatial patterns of the biomass.\n\nFor more interactive and advanced visualizations, check out the \n\nESA Climate Toolbox or the \n\nToolbox documentation.\n\nimport os\nscript_dir = os.getcwd()  # Gets current working directory\npng_dir = os.path.join(script_dir, 'Biomass/')\n# Create directory if it doesn't exist\nos.makedirs(png_dir, exist_ok=True)\n\n# Define years to loop through\nyears = range(2018, 2021)  # you can adapt the range here according to data availability; if you want to include 2020, you need to end the range at 2021\n\nfor year in years:\n    print(f\"Processing year {year}...\")\n    \n    # Create timestep for biomass (yearly data)\n    timestep = f'{year}-01-01'\n    \n    # Load and extract the biomass data\n    biomass = biomass_sub[\"agb\"].sel(time=timestep, method='nearest').compute()\n    time_str = biomass_sub['time'].sel(time=timestep, method='nearest').dt.strftime('%Y').item()\n    lat = biomass_sub[\"lat\"]\n    lon = biomass_sub[\"lon\"]\n    \n    fig = plt.figure(figsize=(12, 6))\n    \n    # Create two axes with the same projection\n    ax = plt.axes(projection=ccrs.PlateCarree())\n  \n    # Plot biomass, mask the data and only use positive values\n    masked_biomass = np.ma.masked_where(biomass <= 0, biomass)\n    mesh_biomass = ax.pcolormesh(\n        lon, lat, masked_biomass,\n        cmap=\"YlGn\", shading=\"auto\",\n        norm=plt.matplotlib.colors.LogNorm(vmin=1, vmax=np.nanpercentile(biomass, 99)) # avoid outliers to darken the colormap unneccessarily by using np.nanpercentile\n    )\n    # Hide grid lines \n    ax.grid(False)\n     # Add year label in upper-right corner\n    ax.text(\n        -50.9,-2.75, # define location for the text\n        str(year),\n        color='white',\n        fontsize=28,\n        fontweight='bold',\n        transform=ccrs.PlateCarree()\n    ) \n    # Save with year in filename\n    plt.savefig(os.path.join(png_dir, f'Biomass_{year}.png'), bbox_inches='tight')\n    plt.show() # show the plot below the cell\n    plt.close()  # Close figure to free memory\n    \n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/esa-climate-change-competition/competition-forests-in-a-changing-climate#visualize-the-results","position":29},{"hierarchy":{"lvl1":"ESA Climate Change Competition: Forests in a Changing Climate","lvl4":"Create a Gif from the Pictures","lvl3":"Load & Visualise the Biomass Data"},"type":"lvl4","url":"/external-notebooks/esa-cci/ect-training/esa-climate-change-competition/competition-forests-in-a-changing-climate#create-a-gif-from-the-pictures","position":30},{"hierarchy":{"lvl1":"ESA Climate Change Competition: Forests in a Changing Climate","lvl4":"Create a Gif from the Pictures","lvl3":"Load & Visualise the Biomass Data"},"content":"Next, we show you how to create a small animation from the produced pictures and save it as gif. This obviously only makes sense if you have produced several plots and saved them in one folder.\n\nfrom PIL import Image\nimport os\npng_dir = './Biomass/'\n\nimages = []\nfor filename in sorted(os.listdir(png_dir)):\n    if filename.endswith('.png'):\n        img = Image.open(os.path.join(png_dir, filename))\n        images.append(img)\n\nimages[0].save(\n    './biomass.gif',\n    save_all=True,\n    append_images=images[1:],\n    duration=500,  # milliseconds per frame adjust for your purpose\n    loop=0\n)\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/esa-climate-change-competition/competition-forests-in-a-changing-climate#create-a-gif-from-the-pictures","position":31},{"hierarchy":{"lvl1":"ESA Climate Change Competition: Forests in a Changing Climate","lvl2":"Land Cover"},"type":"lvl2","url":"/external-notebooks/esa-cci/ect-training/esa-climate-change-competition/competition-forests-in-a-changing-climate#land-cover","position":32},{"hierarchy":{"lvl1":"ESA Climate Change Competition: Forests in a Changing Climate","lvl2":"Land Cover"},"content":"","type":"content","url":"/external-notebooks/esa-cci/ect-training/esa-climate-change-competition/competition-forests-in-a-changing-climate#land-cover","position":33},{"hierarchy":{"lvl1":"ESA Climate Change Competition: Forests in a Changing Climate","lvl3":"Load and Visualise the Land Cover Dataset","lvl2":"Land Cover"},"type":"lvl3","url":"/external-notebooks/esa-cci/ect-training/esa-climate-change-competition/competition-forests-in-a-changing-climate#load-and-visualise-the-land-cover-dataset","position":34},{"hierarchy":{"lvl1":"ESA Climate Change Competition: Forests in a Changing Climate","lvl3":"Load and Visualise the Land Cover Dataset","lvl2":"Land Cover"},"content":"Next, we are loading the land cover dataset. The procedure is the same as for the biomass data.\n\nThe land cover classes and their colours are defined below and can be found in the üîó \n\nProduct User Guide.","type":"content","url":"/external-notebooks/esa-cci/ect-training/esa-climate-change-competition/competition-forests-in-a-changing-climate#load-and-visualise-the-land-cover-dataset","position":35},{"hierarchy":{"lvl1":"ESA Climate Change Competition: Forests in a Changing Climate","lvl4":"Land Cover Classification System (LCCS) - the CCI-Land Cover legend","lvl3":"Load and Visualise the Land Cover Dataset","lvl2":"Land Cover"},"type":"lvl4","url":"/external-notebooks/esa-cci/ect-training/esa-climate-change-competition/competition-forests-in-a-changing-climate#land-cover-classification-system-lccs-the-cci-land-cover-legend","position":36},{"hierarchy":{"lvl1":"ESA Climate Change Competition: Forests in a Changing Climate","lvl4":"Land Cover Classification System (LCCS) - the CCI-Land Cover legend","lvl3":"Load and Visualise the Land Cover Dataset","lvl2":"Land Cover"},"content":"VALUE\n\nLCCS LABEL\n\n10\n\nRainfed shrub crops // Rainfed tree crops // Rainfed herbaceous crops\n\n11\n\nRainfed herbaceous crops\n\n12\n\nRainfed shrub crops // Rainfed tree crops\n\n20\n\nIrrigated tree crops // Irrigated shrub crops // Irrigated herbaceous crops // Post-flooding cultivation of herbaceous crops\n\n30\n\nCultivated and managed terrestrial areas / Natural and semi-natural primarily terrestrial vegetation\n\n40\n\nNatural and semi-natural primarily terrestrial vegetation / Cultivated and managed terrestrial areas\n\n50\n\nBroadleaved evergreen closed to open trees // Broadleaved semi-deciduous closed to open trees\n\n60\n\nBroadleaved deciduous closed to open trees\n\n61\n\nBroadleaved deciduous closed (100-40%) trees\n\n62\n\nBroadleaved deciduous open (40-(20-10)%) trees\n\n70\n\nNeedleleaved evergreen closed to open trees\n\n71\n\nNeedleleaved evergreen closed (100-40%) trees\n\n72\n\nNeedleleaved evergreen open (40-(20-10)%) trees\n\n80\n\nNeedleleaved deciduous closed to open trees\n\n81\n\nNeedleleaved deciduous closed (100-40%) trees\n\n82\n\nNeedleleaved deciduous open (40-(20-10)%) trees\n\n90\n\nBroadleaved closed to open trees / Needleleaved closed to open trees\n\n100\n\nClosed to open trees / Closed to open shrubland (thicket) // Herbaceous closed to open vegetation\n\n110\n\nHerbaceous closed to open vegetation // Closed to open trees / Closed to open shrubland (thicket)\n\n120\n\nBroadleaved closed to open shrubland (thicket)\n\n121\n\nBroadleaved Evergreen Closed to Open Thicket // Needleleaved Evergreen Closed to Open Thicket\n\n122\n\nBroadleaved Deciduous Closed to Open Thicket // Needleleaved Deciduous Closed to Open Thicket\n\n130\n\nHerbaceous closed to very open vegetation 21453 A2A20\n\n140\n\nClosed to open lichens/mosses\n\n150\n\nSparse trees // Herbaceous sparse vegetation // Sparse shrubs\n\n151\n\nSparse Trees\n\n152\n\nSparse Shrubs\n\n153\n\nHerbaceous Sparse Vegetation\n\n160\n\nClosed to open (100-40%) broadleaved trees on temporarily flooded land, water quality: fresh water // Closed to open (100-40%) broadleaved trees on permanently flooded land, water quality: fresh water\n\n170\n\nClosed to open (100-40%) broadleaved trees on permanently flooded land (with daily variations), water quality: saline water // Closed to open (100-40%) broadleaved trees on permanently flooded land (with daily variations), water quality: brackish water // Closed to open (100-40%) semi-deciduous shrubland on permanently flooded land (with daily variations), water quality: saline water // Closed to open (100-40%) semi-deciduous shrubland on permanently flooded land (with daily variations), water quality: brackish water\n\n180\n\nClosed to open shrubs on permanently flooded land // Closed to open herbaceous vegetation on permanently flooded land // Closed to open shrubs on temporarily flooded land // Closed to open herbaceous vegetation on temporarily flooded land // Closed to open shrubs on waterlogged soil // Closed to open herbaceous vegetation on waterlogged soil (Water quality: fresh, brackish or saline water)\n\n190\n\nArtificial surfaces and associated areas\n\n200\n\nBare areas\n\n201\n\nConsolidated Material(s)\n\n202\n\nUnconsolidated Material(s)\n\n210\n\nNatural water bodies // Artificial water bodies\n\n220\n\nArtificial perennial snow // Artificial perennial ice // Perennial snow // Perennial ice\n\nNext, we define the class IDs, their names and the correct colours for the plotting.\n\n# Define the LCCS colours according to their ID and names\nclass_ids = [\n    10, 11, 12, 20, 30, 40,           # Cultivated areas\n    50, 60, 61, 62,                  # Broadleaved trees\n    70, 71, 72,                      # Needleleaved evergreen trees\n    80, 81, 82,                      # Needleleaved deciduous trees\n    90, 100, 110,                    # Mixed vegetation\n    120, 121, 122,                   # Shrubland\n    130, 140,                        # Herbaceous and lichens/mosses\n    150, 151, 152, 153,              # Sparse vegetation\n    160, 170, 180,                   # Aquatic vegetation\n    190,                             # Artificial surfaces\n    200, 201, 202,                   # Bare areas\n    210, 220                         # Water bodies, snow and ice\n]\nclass_names = [\n    \"Rainfed crops\",                                   # 10\n    \"Rainfed herbaceous crops\",                        # 11\n    \"Rainfed shrub/tree crops\",                        # 12\n    \"Irrigated crops\",                                 # 20\n    \"Cropland/Natural vegetation mosaic\",              # 30\n    \"Natural vegetation/Cropland mosaic\",              # 40\n    \"Broadleaved evergreen/semi-deciduous trees\",      # 50\n    \"Broadleaved deciduous trees\",                     # 60\n    \"Broadleaved deciduous closed trees\",              # 61\n    \"Broadleaved deciduous open trees\",                # 62\n    \"Needleleaved evergreen trees\",                    # 70\n    \"Needleleaved evergreen closed trees\",             # 71\n    \"Needleleaved evergreen open trees\",               # 72\n    \"Needleleaved deciduous trees\",                    # 80\n    \"Needleleaved deciduous closed trees\",             # 81\n    \"Needleleaved deciduous open trees\",               # 82\n    \"Mixed broadleaved/needleleaved trees\",            # 90\n    \"Mixed trees/shrubland/herbaceous\",                # 100\n    \"Herbaceous/trees/shrubland\",                      # 110\n    \"Shrubland\",                                       # 120\n    \"Evergreen shrubland\",                             # 121\n    \"Deciduous shrubland\",                             # 122\n    \"Grassland\",                                       # 130\n    \"Lichens and mosses\",                              # 140\n    \"Sparse vegetation\",                               # 150\n    \"Sparse trees\",                                    # 151\n    \"Sparse shrubs\",                                   # 152\n    \"Sparse herbaceous\",                               # 153\n    \"Flooded trees (fresh water)\",                     # 160\n    \"Flooded trees (saline/brackish water)\",           # 170\n    \"Flooded shrubs/herbaceous\",                       # 180\n    \"Urban areas\",                                     # 190\n    \"Bare areas\",                                      # 200\n    \"Consolidated bare areas\",                         # 201\n    \"Unconsolidated bare areas\",                       # 202\n    \"Water bodies\",                                    # 210\n    \"Snow and ice\"                                     # 220\n]\n\ncolors = [\n    \"#ffff64\", \"#90ee90\", \"#228b22\", \"#ffd700\",        # Crops (10-12, 20)\n    \"#daa520\", \"#b8860b\",                              # Crop mosaics (30, 40)\n    \"#006400\", \"#228b22\", \"#32cd32\", \"#7cfc00\",        # Broadleaved trees (50, 60-62)\n    \"#2f4f4f\", \"#708090\", \"#778899\",                   # Needleleaved evergreen (70-72)\n    \"#8b4513\", \"#a0522d\", \"#cd853f\",                   # Needleleaved deciduous (80-82)\n    \"#556b2f\", \"#6b8e23\", \"#9acd32\",                   # Mixed/shrubland (90, 100, 110)\n    \"#d2691e\", \"#ff8c00\", \"#ffa500\",                   # Shrubland (120-122)\n    \"#adff2f\", \"#bdb76b\",                              # Grassland, lichens (130, 140)\n    \"#f5deb3\", \"#deb887\", \"#d2b48c\", \"#bc8f8f\",        # Sparse vegetation (150-153)\n    \"#4682b4\", \"#5f9ea0\", \"#20b2aa\",                   # Wetlands (160, 170, 180)\n    \"#dc143c\",                                         # Urban (190)\n    \"#f5f5dc\", \"#fff8dc\", \"#faebd7\",                   # Bare areas (200-202)\n    \"#4169e1\", \"#ffffff\"                               # Water, snow/ice (210, 220)\n]\n\n\nNow let's load the dataset and build the subset for the defined bbox.\n\n# Land Cover data ID\ndata_id = 'ESACCI-LC-L4-LCCS-Map-300m-P1Y-1992-2015-v2.0.7b.zarr' \n\nlc_ds = cci_zarr_store.open_data(\n    data_id = data_id\n)\n# Building the subset \nsubset_spatial_op = get_op('subset_spatial')\nlc_sub = subset_spatial_op(ds=lc_ds, region=bbox)\n\n# Define years to loop through\nyears = range(2018, 2021)  # adapt as needed\ncmap = ListedColormap(colors)\n\nfor year in years:\n    print(f\"Processing year {year}...\")\n    \n    # Create timestep for biomass (yearly data)\n    timestep = f'{year}-01-01'\n    \n    # Load and extract the biomass data\n    lc = lc_sub[\"lccs_class\"].sel(time=timestep, method='nearest').compute()\n    time_str = lc_sub['time'].sel(time=timestep, method='nearest').dt.strftime('%Y').item()\n    lat = lc_sub[\"lat\"]\n    lon = lc_sub[\"lon\"]\n    \n    fig = plt.figure(figsize=(12, 6))\n    \n    # Create two axes with the same projection\n    ax = plt.axes(projection=ccrs.PlateCarree())\n  \n    # Plot lc on first axis\n    mesh_biomass = ax.pcolormesh(\n        lon, lat, lc,\n        cmap=cmap, shading=\"auto\",\n    )\n    # Hide grid lines\n    ax.grid(False)\n     # Add year label in upper-right corner\n    # Add year label in upper-right corner\n    ax.text(\n        -50.9,-2.75, # define location for the text\n        str(year),\n        color='white',\n        fontsize=28,\n        fontweight='bold',\n        transform=ccrs.PlateCarree()\n    )  \n    \n    # Add custom legend\n    from matplotlib.patches import Patch\n    # Find the unique land cover classes in the current plotted area to reduce the legend entries\n    visible_classes = np.unique(lc.values)\n\n    # Build legend only for classes present in the plot\n    legend_handles = [\n        Patch(color=colors[class_ids.index(cid)], label=class_names[class_ids.index(cid)])\n        for cid in visible_classes if cid in class_ids\n    ]\n    \n    #ax.legend(handles=legend_handles, bbox_to_anchor=(1, 1), loc=\"upper right\", ncol=2,fontsize=8)\n    plt.show()\n        \n    # Save with year in filename\n    #plt.savefig(f'./LandCover_{year}.png', bbox_inches='tight')\n    #plt.close()  # Close figure to free memory\n   \n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/esa-climate-change-competition/competition-forests-in-a-changing-climate#land-cover-classification-system-lccs-the-cci-land-cover-legend","position":37},{"hierarchy":{"lvl1":"ESA Climate Change Competition: Forests in a Changing Climate","lvl3":"Load Other Essential Climate Variables","lvl2":"Land Cover"},"type":"lvl3","url":"/external-notebooks/esa-cci/ect-training/esa-climate-change-competition/competition-forests-in-a-changing-climate#load-other-essential-climate-variables","position":38},{"hierarchy":{"lvl1":"ESA Climate Change Competition: Forests in a Changing Climate","lvl3":"Load Other Essential Climate Variables","lvl2":"Land Cover"},"content":"Below is a list of datafiles you can use for other ECVs which might be of interest when looking at biomass loss. If you need inspiration or tipps on how to visualise the parameters, you can have a look at the individual Jupyter Notebooks for each ECV either in the Example Explorer or on üîó \n\nGitHub.","type":"content","url":"/external-notebooks/esa-cci/ect-training/esa-climate-change-competition/competition-forests-in-a-changing-climate#load-other-essential-climate-variables","position":39},{"hierarchy":{"lvl1":"ESA Climate Change Competition: Forests in a Changing Climate","lvl4":"Fire","lvl3":"Load Other Essential Climate Variables","lvl2":"Land Cover"},"type":"lvl4","url":"/external-notebooks/esa-cci/ect-training/esa-climate-change-competition/competition-forests-in-a-changing-climate#fire","position":40},{"hierarchy":{"lvl1":"ESA Climate Change Competition: Forests in a Changing Climate","lvl4":"Fire","lvl3":"Load Other Essential Climate Variables","lvl2":"Land Cover"},"content":"data_id = 'ESACCI-L4_FIRE-BA-MODIS-2001-2022-fv5.1.zarr'","type":"content","url":"/external-notebooks/esa-cci/ect-training/esa-climate-change-competition/competition-forests-in-a-changing-climate#fire","position":41},{"hierarchy":{"lvl1":"ESA Climate Change Competition: Forests in a Changing Climate","lvl4":"Clouds","lvl3":"Load Other Essential Climate Variables","lvl2":"Land Cover"},"type":"lvl4","url":"/external-notebooks/esa-cci/ect-training/esa-climate-change-competition/competition-forests-in-a-changing-climate#clouds","position":42},{"hierarchy":{"lvl1":"ESA Climate Change Competition: Forests in a Changing Climate","lvl4":"Clouds","lvl3":"Load Other Essential Climate Variables","lvl2":"Land Cover"},"content":"data_id = 'ESACCI-L3C_CLOUD-CLD_PRODUCTS-AVHRR_NOAA-1982-2016-fv3.0.zarr'","type":"content","url":"/external-notebooks/esa-cci/ect-training/esa-climate-change-competition/competition-forests-in-a-changing-climate#clouds","position":43},{"hierarchy":{"lvl1":"ESA Climate Change Competition: Forests in a Changing Climate","lvl4":"Land Surface Temperature (LST)","lvl3":"Load Other Essential Climate Variables","lvl2":"Land Cover"},"type":"lvl4","url":"/external-notebooks/esa-cci/ect-training/esa-climate-change-competition/competition-forests-in-a-changing-climate#land-surface-temperature-lst","position":44},{"hierarchy":{"lvl1":"ESA Climate Change Competition: Forests in a Changing Climate","lvl4":"Land Surface Temperature (LST)","lvl3":"Load Other Essential Climate Variables","lvl2":"Land Cover"},"content":"data_id = 'ESACCI-LST-L3S-LST-IRCDR_-0.01deg_1MONTHLY_DAY-1995-2020-fv3.00.zarr'","type":"content","url":"/external-notebooks/esa-cci/ect-training/esa-climate-change-competition/competition-forests-in-a-changing-climate#land-surface-temperature-lst","position":45},{"hierarchy":{"lvl1":"ESA Climate Change Competition: Forests in a Changing Climate","lvl4":"Greenhouse Gases (GHG) - CO2","lvl3":"Load Other Essential Climate Variables","lvl2":"Land Cover"},"type":"lvl4","url":"/external-notebooks/esa-cci/ect-training/esa-climate-change-competition/competition-forests-in-a-changing-climate#greenhouse-gases-ghg-co2","position":46},{"hierarchy":{"lvl1":"ESA Climate Change Competition: Forests in a Changing Climate","lvl4":"Greenhouse Gases (GHG) - CO2","lvl3":"Load Other Essential Climate Variables","lvl2":"Land Cover"},"content":"data_id = 'ESACCI-GHG-L2-CO2-SCIAMACHY-WFMD-2002-2012-fv1.zarr'","type":"content","url":"/external-notebooks/esa-cci/ect-training/esa-climate-change-competition/competition-forests-in-a-changing-climate#greenhouse-gases-ghg-co2","position":47},{"hierarchy":{"lvl1":"ESA Climate Change Competition: Forests in a Changing Climate","lvl4":"Water Vapour","lvl3":"Load Other Essential Climate Variables","lvl2":"Land Cover"},"type":"lvl4","url":"/external-notebooks/esa-cci/ect-training/esa-climate-change-competition/competition-forests-in-a-changing-climate#water-vapour","position":48},{"hierarchy":{"lvl1":"ESA Climate Change Competition: Forests in a Changing Climate","lvl4":"Water Vapour","lvl3":"Load Other Essential Climate Variables","lvl2":"Land Cover"},"content":"data_id = 'ESACCI-WATERVAPOUR-L3C-TCWV-meris-005deg-2002-2017-fv3.2.zarr'","type":"content","url":"/external-notebooks/esa-cci/ect-training/esa-climate-change-competition/competition-forests-in-a-changing-climate#water-vapour","position":49},{"hierarchy":{"lvl1":"ect-training"},"type":"lvl1","url":"/external-notebooks/esa-cci/ect-training/readme","position":0},{"hierarchy":{"lvl1":"ect-training"},"content":"Material for training with the ESA CCI Toolbox","type":"content","url":"/external-notebooks/esa-cci/ect-training/readme","position":1},{"hierarchy":{"lvl1":"Adaptation Futures Conference (AF2025) Training - Illustrating Climate Risk Exposure with CCI Data"},"type":"lvl1","url":"/external-notebooks/esa-cci/ect-training/adaptation-futures-nz-10-2025/adaptation-futures-climate-risk-exposure-10-2025","position":0},{"hierarchy":{"lvl1":"Adaptation Futures Conference (AF2025) Training - Illustrating Climate Risk Exposure with CCI Data"},"content":"\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/adaptation-futures-nz-10-2025/adaptation-futures-climate-risk-exposure-10-2025","position":1},{"hierarchy":{"lvl1":"Adaptation Futures Conference (AF2025) Training - Illustrating Climate Risk Exposure with CCI Data","lvl2":"1. Introduction:"},"type":"lvl2","url":"/external-notebooks/esa-cci/ect-training/adaptation-futures-nz-10-2025/adaptation-futures-climate-risk-exposure-10-2025#id-1-introduction","position":2},{"hierarchy":{"lvl1":"Adaptation Futures Conference (AF2025) Training - Illustrating Climate Risk Exposure with CCI Data","lvl2":"1. Introduction:"},"content":"In this beginner-friendly notebook, we will use real satellite-based Essential Climate Variables (ECVs) data from the \n\nESA Climate Change Initiative (CCI) to explore recent climate trends. We will also look at how to combine population dataset with ECVs to have a first-order estimation of risk exposure caused by extreme weather events.\n\nThis notebook is designed for participants with no prior experience in Python or climate data analysis. You will learn:\n\nHow to access CCI ECVs using the CCI Toolbox python Package\n\nHow to navigate and subset climate data using Xarray\n\nHow to compute basic plots using Matplotlib\n\nHow to save a figure you generated\n\nHow to map and interpret ECVs changes over time and space\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/adaptation-futures-nz-10-2025/adaptation-futures-climate-risk-exposure-10-2025#id-1-introduction","position":3},{"hierarchy":{"lvl1":"Adaptation Futures Conference (AF2025) Training - Illustrating Climate Risk Exposure with CCI Data","lvl2":"Step 1. Setup & Imports"},"type":"lvl2","url":"/external-notebooks/esa-cci/ect-training/adaptation-futures-nz-10-2025/adaptation-futures-climate-risk-exposure-10-2025#step-1-setup-imports","position":4},{"hierarchy":{"lvl1":"Adaptation Futures Conference (AF2025) Training - Illustrating Climate Risk Exposure with CCI Data","lvl2":"Step 1. Setup & Imports"},"content":"Before we start working with the data, we need to import a few Python libraries. These libraries provide useful tools for working with satellite data, performing simple calculations, and creating visualizations.\n\nDon‚Äôt worry if you‚Äôre not familiar with these yet ‚Äî we will explain what you need as we go.\n\n# ESA Climate Toolbox imports for accessing and plotting ESA CCI data\nfrom esa_climate_toolbox.core import get_op              # Get predefined operations (e.g., time series, averages)\nfrom esa_climate_toolbox.core import list_ecv_datasets   # List available datasets per ECV (Essential Climate Variable)\nfrom esa_climate_toolbox.core import get_store           # Connect to an ESA data store\nfrom esa_climate_toolbox.core import list_datasets       # List all datasets in a store\nfrom esa_climate_toolbox.core import search\nfrom esa_climate_toolbox.ops import plot                 # High-level plotting functions for CCI data\n\n# Used for connecting to remote data sources (e.g., ESA CCI ODP)\nfrom xcube.core.store import new_data_store\n\n# For displaying geographic regions interactively (if desired)\nfrom IPython.display import GeoJSON\nimport shapely.geometry   # Handling geometric objects like bounding boxes\n\n# Core data science libraries\nimport pandas as pd       # For tabular data handling and time manipulation\nimport numpy as np        # For numerical operations\nimport xarray as xr       # For multi-dimensional climate data structures\n\n# Mapping and plotting\nimport matplotlib.pyplot as plt       # Plotting library\nfrom matplotlib.colors import TwoSlopeNorm\nimport cartopy.crs as ccrs            # Cartographic projections for spatial data\nimport cartopy.feature as cfeature\nimport rasterio                       # Used to read GeoTIFF files\n\n# Notebook settings\nimport warnings\nwarnings.filterwarnings(\"ignore\") # Suppressing warnings to keep notebook output clean\n%matplotlib inline\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/adaptation-futures-nz-10-2025/adaptation-futures-climate-risk-exposure-10-2025#step-1-setup-imports","position":5},{"hierarchy":{"lvl1":"Adaptation Futures Conference (AF2025) Training - Illustrating Climate Risk Exposure with CCI Data","lvl4":"Why we need those Python packages:","lvl2":"Step 1. Setup & Imports"},"type":"lvl4","url":"/external-notebooks/esa-cci/ect-training/adaptation-futures-nz-10-2025/adaptation-futures-climate-risk-exposure-10-2025#why-we-need-those-python-packages","position":6},{"hierarchy":{"lvl1":"Adaptation Futures Conference (AF2025) Training - Illustrating Climate Risk Exposure with CCI Data","lvl4":"Why we need those Python packages:","lvl2":"Step 1. Setup & Imports"},"content":"numpy: helps with numbers and arrays.\n\nmatplotlib: lets us create plots and maps.\n\nxarray: makes it easy to work with climate datasets.\n\ncartopy: helps plot maps with geographic context.\n\nToolbox: a package that facilitates access and computation of CCI data","type":"content","url":"/external-notebooks/esa-cci/ect-training/adaptation-futures-nz-10-2025/adaptation-futures-climate-risk-exposure-10-2025#why-we-need-those-python-packages","position":7},{"hierarchy":{"lvl1":"Adaptation Futures Conference (AF2025) Training - Illustrating Climate Risk Exposure with CCI Data","lvl5":"Up next: We will learn how to access ECVs from the CCI Toolbox.","lvl4":"Why we need those Python packages:","lvl2":"Step 1. Setup & Imports"},"type":"lvl5","url":"/external-notebooks/esa-cci/ect-training/adaptation-futures-nz-10-2025/adaptation-futures-climate-risk-exposure-10-2025#up-next-we-will-learn-how-to-access-ecvs-from-the-cci-toolbox","position":8},{"hierarchy":{"lvl1":"Adaptation Futures Conference (AF2025) Training - Illustrating Climate Risk Exposure with CCI Data","lvl5":"Up next: We will learn how to access ECVs from the CCI Toolbox.","lvl4":"Why we need those Python packages:","lvl2":"Step 1. Setup & Imports"},"content":"\n\n#list_datasets(\"esa-cci-zarr\")\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/adaptation-futures-nz-10-2025/adaptation-futures-climate-risk-exposure-10-2025#up-next-we-will-learn-how-to-access-ecvs-from-the-cci-toolbox","position":9},{"hierarchy":{"lvl1":"Adaptation Futures Conference (AF2025) Training - Illustrating Climate Risk Exposure with CCI Data","lvl2":"Step 2: Load & Visualize Land Surface Temperature data (LST)"},"type":"lvl2","url":"/external-notebooks/esa-cci/ect-training/adaptation-futures-nz-10-2025/adaptation-futures-climate-risk-exposure-10-2025#step-2-load-visualize-land-surface-temperature-data-lst","position":10},{"hierarchy":{"lvl1":"Adaptation Futures Conference (AF2025) Training - Illustrating Climate Risk Exposure with CCI Data","lvl2":"Step 2: Load & Visualize Land Surface Temperature data (LST)"},"content":"","type":"content","url":"/external-notebooks/esa-cci/ect-training/adaptation-futures-nz-10-2025/adaptation-futures-climate-risk-exposure-10-2025#step-2-load-visualize-land-surface-temperature-data-lst","position":11},{"hierarchy":{"lvl1":"Adaptation Futures Conference (AF2025) Training - Illustrating Climate Risk Exposure with CCI Data","lvl3":"Define the Dataset ID","lvl2":"Step 2: Load & Visualize Land Surface Temperature data (LST)"},"type":"lvl3","url":"/external-notebooks/esa-cci/ect-training/adaptation-futures-nz-10-2025/adaptation-futures-climate-risk-exposure-10-2025#define-the-dataset-id","position":12},{"hierarchy":{"lvl1":"Adaptation Futures Conference (AF2025) Training - Illustrating Climate Risk Exposure with CCI Data","lvl3":"Define the Dataset ID","lvl2":"Step 2: Load & Visualize Land Surface Temperature data (LST)"},"content":"To work with a specific ESA CCI dataset, we need to specify its dataset ID. This unique identifier tells the toolbox which variable and product we want to access.\nWhen using the command list_ecv_datasets, you can see all available datasets for the chosen parameter (in this case \"LST\").\n\nFirst, we define the dataset ID and the store from which we retrieve the data (for the LST file it is esa-cci).\nIn this section, we are using land surface temperature (LST) data from the esa-cci-zarr store. You can find the variables of the products under data_vars. For the LST, we will use the variable lst.\n\n# Uncomment (-> remove the \"# \") the next line, if you wish to see all available datafiles for the LST\n#list_ecv_datasets(\"LST\")\n\n# Open the ESA CCI store\ncci_store = new_data_store(\"esa-cci-zarr\")\n# define the dataset ID\ndata_id = 'ESACCI-LST-L3S-LST-IRCDR_-0.01deg_1MONTHLY_DAY-1995-2020-fv3.00.zarr'\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/adaptation-futures-nz-10-2025/adaptation-futures-climate-risk-exposure-10-2025#define-the-dataset-id","position":13},{"hierarchy":{"lvl1":"Adaptation Futures Conference (AF2025) Training - Illustrating Climate Risk Exposure with CCI Data","lvl3":"Describe Dataset (Check Available Variables and Metadata)","lvl2":"Step 2: Load & Visualize Land Surface Temperature data (LST)"},"type":"lvl3","url":"/external-notebooks/esa-cci/ect-training/adaptation-futures-nz-10-2025/adaptation-futures-climate-risk-exposure-10-2025#describe-dataset-check-available-variables-and-metadata","position":14},{"hierarchy":{"lvl1":"Adaptation Futures Conference (AF2025) Training - Illustrating Climate Risk Exposure with CCI Data","lvl3":"Describe Dataset (Check Available Variables and Metadata)","lvl2":"Step 2: Load & Visualize Land Surface Temperature data (LST)"},"content":"Before loading the full dataset, it‚Äôs helpful to inspect the metadata to understand its structure by using the command describe_data. This includes:\n\nAvailable variables (e.g., lst, uncertainty estimates)\n\nTemporal and spatial coverage\n\nData format and structure\n\nThis step ensures we know what the dataset contains and how to work with it. It also helps confirm that the variable we want to plot or analyze is actually included.\n\nüõ†Ô∏è Tip: You can use the description to verify variable names, dimensions (e.g., lat, lon, time), and time coverage. Under data_vars you can find the data variables and the attrs within the data_vars section show you the data attributes, e.g. the long name of the variable or the unit.\n\nüìò More on dataset structure:üîó \n\nESA Climate Toolbox ‚Äì Data Access\n\n# Inspect the data structure\ncci_store.describe_data(data_id)\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/adaptation-futures-nz-10-2025/adaptation-futures-climate-risk-exposure-10-2025#describe-dataset-check-available-variables-and-metadata","position":15},{"hierarchy":{"lvl1":"Adaptation Futures Conference (AF2025) Training - Illustrating Climate Risk Exposure with CCI Data","lvl3":"Load the Dataset","lvl2":"Step 2: Load & Visualize Land Surface Temperature data (LST)"},"type":"lvl3","url":"/external-notebooks/esa-cci/ect-training/adaptation-futures-nz-10-2025/adaptation-futures-climate-risk-exposure-10-2025#load-the-dataset","position":16},{"hierarchy":{"lvl1":"Adaptation Futures Conference (AF2025) Training - Illustrating Climate Risk Exposure with CCI Data","lvl3":"Load the Dataset","lvl2":"Step 2: Load & Visualize Land Surface Temperature data (LST)"},"content":"Now that we have an understanding of the data structure and have defined the data store and ID, we can open the dataset by using the command open_data.\n\nWe can then inspect the data structure and content by displaying the dataset. The displayed dataset is interactive in Jupyter Notebooks, thus you can use the arrows to see the content of the dataset, e.g. the Data variables or Coordinates and you can click on the container symbol ‚ò∞ to see what is inside.\n\nlst_ds = cci_store.open_data(\n    data_id=data_id,\n)\ndisplay(lst_ds)\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/adaptation-futures-nz-10-2025/adaptation-futures-climate-risk-exposure-10-2025#load-the-dataset","position":17},{"hierarchy":{"lvl1":"Adaptation Futures Conference (AF2025) Training - Illustrating Climate Risk Exposure with CCI Data","lvl3":"Create a spatial subset of the LST data:","lvl2":"Step 2: Load & Visualize Land Surface Temperature data (LST)"},"type":"lvl3","url":"/external-notebooks/esa-cci/ect-training/adaptation-futures-nz-10-2025/adaptation-futures-climate-risk-exposure-10-2025#create-a-spatial-subset-of-the-lst-data","position":18},{"hierarchy":{"lvl1":"Adaptation Futures Conference (AF2025) Training - Illustrating Climate Risk Exposure with CCI Data","lvl3":"Create a spatial subset of the LST data:","lvl2":"Step 2: Load & Visualize Land Surface Temperature data (LST)"},"content":"To focus our analysis on New Zealand, we now extract a spatial subset from the global LST dataset.\n\nUsing the bounding box (bbox) we define here, the function subset_spatial filters the dataset to include only the relevant area.\n\nThis helps reduce data volume and enables more targeted visualizations and calculations in the following steps.\n\nBelow are several longitudes and latitudes to choose from. In the comment above, you can read which area they cover.\n\n# Set bounding box to New Zealand \n#lat_min = -53.0\n#lat_max = -33.0\n#lon_min = 165.0\n#lon_max = 180.0  # Chatham Islands cannot be included here, as it is behind the 180th meridian of the longitude\n\n# # Set bounding box to Christchurch\nlat_min = -44\nlat_max = -43.2\nlon_min = 172.3\nlon_max = 173.8\n\n# Set bounding box to South Island\nlat_min = -47.78\nlat_max = -39.23\nlon_min = 166.1\nlon_max = 174.9\n\n# Set bounding box to North Island\nlat_min = -42.0\nlat_max = -34.0\nlon_min = 172.0\nlon_max = 180.0\n\nbbox = (lon_min, lat_min, lon_max, lat_max)  # Fixed order: (lon_min, lat_min, lon_max, lat_max)\n# Display bounding box for reference\nGeoJSON(shapely.geometry.box(*bbox).__geo_interface__)\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/adaptation-futures-nz-10-2025/adaptation-futures-climate-risk-exposure-10-2025#create-a-spatial-subset-of-the-lst-data","position":19},{"hierarchy":{"lvl1":"Adaptation Futures Conference (AF2025) Training - Illustrating Climate Risk Exposure with CCI Data","lvl3":"Choosing an operator","lvl2":"Step 2: Load & Visualize Land Surface Temperature data (LST)"},"type":"lvl3","url":"/external-notebooks/esa-cci/ect-training/adaptation-futures-nz-10-2025/adaptation-futures-climate-risk-exposure-10-2025#choosing-an-operator","position":20},{"hierarchy":{"lvl1":"Adaptation Futures Conference (AF2025) Training - Illustrating Climate Risk Exposure with CCI Data","lvl3":"Choosing an operator","lvl2":"Step 2: Load & Visualize Land Surface Temperature data (LST)"},"content":"The toolbox offers a variety of operators to choose which we can apply on the dataset. For creating a spatial subset, we would use the subset_spatial operator, for the temporal subset, we would use the subset_temporal operator. In the following cells, you can see how we call the operators and how we apply them to the data.\n\nThe \n\navailable operators can be listed via list_operations as shown below.\n\n#Toolbox operators\nfrom esa_climate_toolbox.core import list_operations\nlist_operations()\n\nIf you would like to read more about the different operations, e.g. what they are doing, what is needed as input and output, you can retrieve this information as shown below.\n\nfrom IPython.display import JSON\nfrom esa_climate_toolbox.core import get_op_meta_info\n\nJSON(get_op_meta_info('subset_spatial'))\n\n# Create the spatial subset with the bbox defined above\nsubset_spatial_op = get_op('subset_spatial')\nlst_ds_sub = subset_spatial_op(ds=lst_ds, region=bbox)\nlst_ds_sub\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/adaptation-futures-nz-10-2025/adaptation-futures-climate-risk-exposure-10-2025#choosing-an-operator","position":21},{"hierarchy":{"lvl1":"Adaptation Futures Conference (AF2025) Training - Illustrating Climate Risk Exposure with CCI Data","lvl4":"Climatology operator","lvl3":"Choosing an operator","lvl2":"Step 2: Load & Visualize Land Surface Temperature data (LST)"},"type":"lvl4","url":"/external-notebooks/esa-cci/ect-training/adaptation-futures-nz-10-2025/adaptation-futures-climate-risk-exposure-10-2025#climatology-operator","position":22},{"hierarchy":{"lvl1":"Adaptation Futures Conference (AF2025) Training - Illustrating Climate Risk Exposure with CCI Data","lvl4":"Climatology operator","lvl3":"Choosing an operator","lvl2":"Step 2: Load & Visualize Land Surface Temperature data (LST)"},"content":"To create a ‚Äúmean over years‚Äù dataset, the \n\nclimatology operator averages the values of the given input data over all years. This is applied in the same time resolution as the given dataset, meaning - a daily dataset will calculate a daily average over all years, a monthly dataset will calculate a monthly average accross all years.\n\nNote: the resulting monthly or daily data will be attributed to the first time array. In the case below, the dataset has a time array rom 1995 containing all averages from 1995-2020.\n\nclimatology_op = get_op('climatology')\nlst_ds_clim = climatology_op(ds=lst_ds_sub)\nlst_ds_clim # use this to have a quick look into the metadata\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/adaptation-futures-nz-10-2025/adaptation-futures-climate-risk-exposure-10-2025#climatology-operator","position":23},{"hierarchy":{"lvl1":"Adaptation Futures Conference (AF2025) Training - Illustrating Climate Risk Exposure with CCI Data","lvl3":"Plot a spatial map using the toolbox","lvl2":"Step 2: Load & Visualize Land Surface Temperature data (LST)"},"type":"lvl3","url":"/external-notebooks/esa-cci/ect-training/adaptation-futures-nz-10-2025/adaptation-futures-climate-risk-exposure-10-2025#plot-a-spatial-map-using-the-toolbox","position":24},{"hierarchy":{"lvl1":"Adaptation Futures Conference (AF2025) Training - Illustrating Climate Risk Exposure with CCI Data","lvl3":"Plot a spatial map using the toolbox","lvl2":"Step 2: Load & Visualize Land Surface Temperature data (LST)"},"content":"Let‚Äôs plot the climatology dataset using the toolbox. As index, we choose 'time' : '1995-01-01', meaning, we look at the mean LST in January from 1995-2020.\n\nplot_op = get_op('plot')\n# Create a plot of the LST data\n\nplot_op(\n    ds=lst_ds_clim,  # Dataset variable\n    var='lst',       # Variable you want to plot  # Specify the date\n    title=\"Average Land Surface Temperature in January (1995-2020)\",\n     indexers={'time': '1995-01-01'},  # Specify the date\n    properties=\"cmap='hot_r', vmin=275, vmax= 325\", # Pass other properties here, such as color\n)\n\n#\n#Latitude, 43¬∞ 31' 55.39\"S. Longitude, 172¬∞ 38' 10.41\"E\ncity_lat, city_lon = -43.353, 172.636\nplt.plot(city_lon, city_lat, linestyle='--', marker='o', color='k', label='≈åtautahi - Christchurch ')\nplt.legend()\n\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/adaptation-futures-nz-10-2025/adaptation-futures-climate-risk-exposure-10-2025#plot-a-spatial-map-using-the-toolbox","position":25},{"hierarchy":{"lvl1":"Adaptation Futures Conference (AF2025) Training - Illustrating Climate Risk Exposure with CCI Data","lvl4":"Temporal subset","lvl3":"Plot a spatial map using the toolbox","lvl2":"Step 2: Load & Visualize Land Surface Temperature data (LST)"},"type":"lvl4","url":"/external-notebooks/esa-cci/ect-training/adaptation-futures-nz-10-2025/adaptation-futures-climate-risk-exposure-10-2025#temporal-subset","position":26},{"hierarchy":{"lvl1":"Adaptation Futures Conference (AF2025) Training - Illustrating Climate Risk Exposure with CCI Data","lvl4":"Temporal subset","lvl3":"Plot a spatial map using the toolbox","lvl2":"Step 2: Load & Visualize Land Surface Temperature data (LST)"},"content":"Next, we do a temporal subset of the dataset and choose only 2019.\n\nsubset_temporal_op = get_op('subset_temporal')\nlst_ds_sub = subset_temporal_op(ds=lst_ds_sub, time_range=['2019-01-01', '2019-12-01'])\nlst_ds_sub \n\nNow let‚Äôs look at a heatwave year: 2019, in particular we will focus on January to see how we can combine LST and population data\n\n#January 2019 LST data selection\nlst_19_j=lst_ds_sub.lst.sel(time='2019-01-01')-273.15\n\nextent=[lon_min,lon_max,lat_min,lat_max]\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/adaptation-futures-nz-10-2025/adaptation-futures-climate-risk-exposure-10-2025#temporal-subset","position":27},{"hierarchy":{"lvl1":"Adaptation Futures Conference (AF2025) Training - Illustrating Climate Risk Exposure with CCI Data","lvl3":"Combine the land surface temperature data with a population density map","lvl2":"Step 2: Load & Visualize Land Surface Temperature data (LST)"},"type":"lvl3","url":"/external-notebooks/esa-cci/ect-training/adaptation-futures-nz-10-2025/adaptation-futures-climate-risk-exposure-10-2025#combine-the-land-surface-temperature-data-with-a-population-density-map","position":28},{"hierarchy":{"lvl1":"Adaptation Futures Conference (AF2025) Training - Illustrating Climate Risk Exposure with CCI Data","lvl3":"Combine the land surface temperature data with a population density map","lvl2":"Step 2: Load & Visualize Land Surface Temperature data (LST)"},"content":"We can combine satellite data with socio-economic data, such as density population maps.\nThe data is retrieved from the \n\nGlobal Human Settlement Layer from 2020 (note, that 2019 is not available). The resolution is 30 arcsec and the coordination system is WGS84. The data can be downloaded as tif file for several grids and the grids covering New Zealand have already been merged and can be found inside the same folder, where the Jupyter Notebook is stored.\nThe tif format includes relevant metadata, such as latitude and longitude, which allows us to combine it with the satellite data.\n\nThe data is licensed under \n\nCC BY 4.0.\n\nThe data has been processed (merged and clipped) for visualisation purposes in this notebook.\n\n# Load population density raster\nwith rasterio.open(\"merged_population_NewZealand2020_density.tif\") as src:\n    pop_density = src.read(1) \n    bounds = src.bounds  # get the geographical boundaries of the tif file (left, bottom, right, top)\n    extent = [bounds.left, bounds.right, bounds.bottom, bounds.top] # define the extent of the tif file\n\nlst_da_crs = lst_19_j.rio.write_crs(\"EPSG:4326\", inplace=True) #coordinates are in degrees: use EPSG:4326.\nlst_da_crs\n\n#Matching Population density data grid to the LST grid\nimport rioxarray\n\n# Load population density  as xarray DataArray\npop_da = rioxarray.open_rasterio(\"merged_population_NewZealand2015_density.tif\", masked=True).squeeze()\n\n# Regrid to LST dataset grid\npop_da_matched = pop_da.rio.reproject_match(lst_da_crs)\n\nextent = [float(pop_da_matched.x.min()), float(pop_da_matched.x.max()),\n          float(pop_da_matched.y.min()), float(pop_da_matched.y.max())]\n\npop_da_matched\n\n#Creating an xarray for population density\npop_dens= xr.DataArray(pop_da_matched, coords=lst_19_j.coords, dims=lst_19_j.dims)\n\n# Create side-by-side subplots\nfig, axes = plt.subplots(ncols=2, figsize=(12, 6), subplot_kw={\"projection\": ccrs.PlateCarree()})\n\n# Plotting LST\nplot_lst= lst_19_j.plot(ax=axes[0], cmap='hot_r', vmin=0, vmax=50, transform=ccrs.PlateCarree(),\n                       cbar_kwargs={'label': 'Land Surface Temperature (¬∞C)', 'orientation': 'vertical', 'shrink': 0.7})\n\n# Add coastlines and borders\naxes[0].add_feature(cfeature.COASTLINE, linewidth=1)\naxes[0].add_feature(cfeature.BORDERS, linestyle=':')\n# Set map extent (adjust as needed)\naxes[0].set_extent(extent)\n#cbar0.set_label('LST Risk Level', fontsize=10)\ngl0 = axes[0].gridlines(draw_labels=True, linewidth=0.5, color='gray', alpha=0.7, linestyle='--')\ngl0.top_labels = False\ngl0.right_labels = False\n\naxes[0].set_title('Hazard: LST Levels - January 2019', fontsize=12)\naxes[0].set_xlabel('Longitude [¬∞E]')\naxes[0].set_ylabel('Latitude [¬∞N]')\n\n#Plotting population density\nplot_pop= pop_dens.plot(ax=axes[1],cmap='Reds', vmin=0, vmax=10000,  transform=ccrs.PlateCarree(),  \n                        cbar_kwargs={'label': 'Population Density (people/km¬≤)', 'orientation': 'vertical', 'shrink': 0.7})\naxes[1].add_feature(cfeature.COASTLINE, linewidth=1)\naxes[1].add_feature(cfeature.BORDERS, linestyle=':')\naxes[1].set_extent(extent)\n# Add colorbar\ngl1 = axes[1].gridlines( draw_labels=True, linewidth=0.5, color='gray', alpha=0.7, linestyle='--')\ngl1.top_labels = False\ngl1.right_labels = False\n\naxes[1].set_title('Exposure:  Population Density Levels - 2019', fontsize=12)\naxes[1].set_xlabel('Longitude [¬∞E]')\naxes[1].set_ylabel('Latitude [¬∞N]')\n\nplt.suptitle('New Zealand 2019 Heatwave', fontsize=14, y=0.97)\nplt.tight_layout()\nplt.show()\n\n#Reclassifying LST and population density for risk maps\n\n# Define classes for grouping LST data\n#low : , medium: , high: \n#LST levels \n\n#very low < 20 value 1 \n#low < 20-30¬∞C value 2 \n#Medium 30-35 ¬∞C value 3 \n#High <35¬∞ - 40¬∞C value 4  \n#Very High 40‚Äì50\t5\n#Extreme >50¬∞  value 6\nlst_bins   = [20, 30, 35, 40, 50]\nlst_values = [1, 2, 3, 4, 5]\n\n# Function to reclassify data to match each value ranges to a level of risk\ndef reclassify_with_numpy_ge(array, bins, new_values):\n    reclassified_array = np.zeros_like(array)\n    reclassified_array[array < bins[0]] = new_values[0]  # below first bin\n    for i in range(len(bins) - 1):\n        reclassified_array[(array >= bins[i]) & (array < bins[i + 1])] = new_values[i]\n    reclassified_array[array >= bins[-1]] = new_values[-1]  # above last bin\n    return reclassified_array\n\n# Apply the reclassification function\nlst_class = reclassify_with_numpy_ge(lst_19_j.values, bins=lst_bins, new_values=lst_values)\n\n# Convert the reclassified array back to xarray DataArray for plotting\nlst_class_da = xr.DataArray(lst_class, coords=lst_19_j.coords, dims=lst_19_j.dims)\n\ncmap = plt.get_cmap('YlOrRd', 5) \n\n\nfig, ax = plt.subplots(figsize=(8,6), subplot_kw={\"projection\": ccrs.PlateCarree()})\n\n# Plot the data\nplot_lst= lst_class_da.plot(ax=ax, cmap=cmap, vmin=1, vmax=5, transform=ccrs.PlateCarree() , add_colorbar=False)\n\n# Add New Zealand coastlines\nax.add_feature(cfeature.COASTLINE, linewidth=1)\nax.add_feature(cfeature.BORDERS, linestyle=':')\nax.set_ylim(lat_min,lat_max)\nax.set_xlim(lon_min,lon_max)\n\n# Colorbar\ncbar = fig.colorbar(plot_lst, ticks=[1.25, 3., 4.25])\ncbar.ax.set_yticklabels(['Low', 'Medium', 'Very High'], size=10)\n\n#very low < 20 value 1 \n#low < 20-30¬∞C value 2 \n#Medium 30-40 ¬∞C value 3 \n#High <40¬∞ - 50¬∞C value 4  \n#Very High 50‚Äì55\t5\n#Extreme >55¬∞  value 6\n\n# Add gridlines with labels\ngrid = ax.gridlines(draw_labels=True, crs=ccrs.PlateCarree(), linewidth=0.5, color='gray', alpha=0.7, linestyle='--')\ngrid.top_labels = False\ngrid.right_labels = False\n\nax.set_xlabel('lon [deg_east]')\nax.set_ylabel('lat [deg_north]')\nplt.title('LST Levels during January 2019', size=12)\nplt.show()\n\n#Reclassifying Population Density for risk maps\n\n#defining level ranges for population density \npop_bins = [0, 50, 100, 1000, 10000]  # Effect on the human health\npop_values = [1, 2, 3, 4, 5]\n\n# Apply the reclassification function\npop_class = reclassify_with_numpy_ge(pop_da_matched, bins=pop_bins, new_values=pop_values)\n\n#Creating an xarray for population density classified\npop_class_da = xr.DataArray(pop_class, coords=lst_19_j.coords, dims=lst_19_j.dims)\n\ncmap = plt.get_cmap('YlOrBr', 5) \nfig, ax = plt.subplots(figsize=(8,6), subplot_kw={\"projection\": ccrs.PlateCarree()})\nplot_pop= pop_class_da.plot(ax=ax, cmap=cmap, vmin=1, vmax=5, transform=ccrs.PlateCarree(),  add_colorbar=False,)\n\ncbar = fig.colorbar(plot_pop, ticks=[1.25, 3., 4.25])\ncbar.ax.set_yticklabels(['Low', 'Medium', 'Very High'], size=10)\n\n# Add New Zealand coastlines\nax.add_feature(cfeature.COASTLINE, linewidth=1)\nax.add_feature(cfeature.BORDERS, linestyle=':')\nax.set_ylim(lat_min,lat_max)\nax.set_xlim(lon_min,lon_max)\n\n# Add gridlines with labels\ngrid = ax.gridlines(draw_labels=True, crs=ccrs.PlateCarree(), linewidth=0.5, color='gray', alpha=0.7, linestyle='--')\ngrid.top_labels = False\ngrid.right_labels = False\n\nplt.title(\"Population Density\")\nplt.tight_layout()\nplt.show()\n\n#Risk exposure to heat\nrisk_map = lst_class_da + pop_class\nrisk_map\n\n#Now let's plot the risk exposure map showing where high heat coincides with high pop exposure\n#Risk=LST¬†Level+Population¬†Density¬†Level\nfig, ax = plt.subplots(figsize=(8, 6), subplot_kw={\"projection\": ccrs.PlateCarree()})\nrisk_plot= risk_map.plot(ax=ax, vmin=0, vmax=10, cmap=cmap,  add_colorbar=False, transform=ccrs.PlateCarree())\n\ncbar = fig.colorbar(risk_plot, ticks=[2, 5,  10], pad=0.09, shrink=0.8, fraction=0.03) #pad: reduce space between plot/colorbar\ncbar.ax.set_yticklabels([ 'Low', 'Medium', 'Very high'], size=10)\nax.set_title('Heatwave Risk Exposure Map (Jan 2019)')\nax.add_feature(cfeature.COASTLINE, linewidth=1)\nax.add_feature(cfeature.BORDERS, linestyle=':')\nax.set_extent(extent)\n#PLot around Christchurch only:\n#ax.set_extent([172.3, 173.8, -44, -43.2], crs=ccrs.PlateCarree())\nax.gridlines(draw_labels=True, linewidth=0.3, color='gray', alpha=0.5, linestyle='--')\n\nplt.tight_layout()\n\nplt.savefig('risk_map.png')\nplt.show()\n\nZoom into Christchurch:\n\n#Now let's plot the risk exposure map showing where high heat coincides with high pop exposure\nfig, ax = plt.subplots(figsize=(8, 6), subplot_kw={\"projection\": ccrs.PlateCarree()})\nrisk_plot= risk_map.plot(ax=ax, vmin=0, vmax=10, cmap=cmap,  add_colorbar=False, transform=ccrs.PlateCarree())\n\ncbar = fig.colorbar(risk_plot, ticks=[2, 5,  10], pad=0.09, shrink=0.8, fraction=0.03) #pad: reduce space between plot/colorbar\ncbar.ax.set_yticklabels([ 'Low', 'Medium', 'Very high'], size=10)\nax.set_title('Heatwave Risk Exposure Map (Jan 2019)')\nax.add_feature(cfeature.COASTLINE, linewidth=1)\nax.add_feature(cfeature.BORDERS, linestyle=':')\n#ax.set_extent(extent)\n#PLot around Christchurch only:\nax.set_extent([172.3, 173.8, -44, -43.2], crs=ccrs.PlateCarree())\nax.gridlines(draw_labels=True, linewidth=0.3, color='gray', alpha=0.5, linestyle='--')\n\nplt.tight_layout()\n\nplt.savefig('risk_map_Christchurch.png')\nplt.show()\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/adaptation-futures-nz-10-2025/adaptation-futures-climate-risk-exposure-10-2025#combine-the-land-surface-temperature-data-with-a-population-density-map","position":29},{"hierarchy":{"lvl1":"Adaptation Futures Conference (AF2025) Training - Illustrating Climate Risk Exposure with CCI Data","lvl3":"‚Üí How to save the dataset","lvl2":"Step 2: Load & Visualize Land Surface Temperature data (LST)"},"type":"lvl3","url":"/external-notebooks/esa-cci/ect-training/adaptation-futures-nz-10-2025/adaptation-futures-climate-risk-exposure-10-2025#id-how-to-save-the-dataset","position":30},{"hierarchy":{"lvl1":"Adaptation Futures Conference (AF2025) Training - Illustrating Climate Risk Exposure with CCI Data","lvl3":"‚Üí How to save the dataset","lvl2":"Step 2: Load & Visualize Land Surface Temperature data (LST)"},"content":"We created a datarray file regridded on the LST grid from the population TIF dataset.\nYou can also save this dataset in your folder either as NetCDF or Zarr file like this:# For NetCDF\npop_dens.to_netcdf(\"population_density_2020.nc\")\n\n# For Zarr\npop_dens.to_zarr(\"population_density_2020.zarr\")\n\n‚Üí see next cell, where you can uncomment the command.\n\nPLEASE NOTE : The data is very large, please ensure you have enough space to save it.\n\n# For NetCDF\n#pop_dens.to_netcdf(\"population_density_2020.nc\")\n\n# For Zarr\n#pop_dens.to_zarr(\"population_density_2020.zarr\")\n\nLet‚Äôs plot the time series of LST over Christchurch\n\n#LST over CHristchurch\nlat_min = -44\nlat_max = -43.2\nlon_min = 172.3\nlon_max = 173.8\nbbox = (lon_min, lat_min, lon_max, lat_max) \nsubset_spatial_op = get_op('subset_spatial')\nlst_ds_C = subset_spatial_op(ds=lst_ds, region=bbox)\nlst_ds_C\n\n#average LST around Christchurch area\nlst_ds_C_mean=lst_ds_C.lst.mean(dim=('lat','lon'))\n\nlst_ds_C_mean\n\nfig = plt.figure(figsize=(12,3))\n# Define the axes\nax = fig.add_subplot(1,1,1) \n\n# plot the yearly mean\nlst_ds_C_mean.plot(c='crimson',linewidth=1,label='daily',marker='.')\n\n# add the labels for the axes and the title and the legend\nplt.legend()\nplt.grid()\nplt.ylabel('LST (¬∞C)')\nplt.xlabel('Year')\nplt.title(\"Time series of the yearly LST mean around Christchurch (1995-2020)\")\nplt.show()\n\nlst_ds_C_mean\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/adaptation-futures-nz-10-2025/adaptation-futures-climate-risk-exposure-10-2025#id-how-to-save-the-dataset","position":31},{"hierarchy":{"lvl1":"Adaptation Futures Conference (AF2025) Training - Illustrating Climate Risk Exposure with CCI Data","lvl3":"‚Üí How to save the time series as csv","lvl2":"Step 2: Load & Visualize Land Surface Temperature data (LST)"},"type":"lvl3","url":"/external-notebooks/esa-cci/ect-training/adaptation-futures-nz-10-2025/adaptation-futures-climate-risk-exposure-10-2025#id-how-to-save-the-time-series-as-csv","position":32},{"hierarchy":{"lvl1":"Adaptation Futures Conference (AF2025) Training - Illustrating Climate Risk Exposure with CCI Data","lvl3":"‚Üí How to save the time series as csv","lvl2":"Step 2: Load & Visualize Land Surface Temperature data (LST)"},"content":"You can save the time series as csv file like this:\n\nlst_ds_C_mean.to_dataframe(name=\"lst\").to_csv(\"lst_timeseries.csv\")\n\n‚Üí see next cell, where you can uncomment the command\n\nlst_ds_C_mean.to_dataframe(name=\"lst\").to_csv(\"lst_timeseries.csv\")","type":"content","url":"/external-notebooks/esa-cci/ect-training/adaptation-futures-nz-10-2025/adaptation-futures-climate-risk-exposure-10-2025#id-how-to-save-the-time-series-as-csv","position":33},{"hierarchy":{"lvl1":""},"type":"lvl1","url":"/external-notebooks/esa-cci/ect-training/adaptation-futures-nz-10-2025/readme","position":0},{"hierarchy":{"lvl1":""},"content":"","type":"content","url":"/external-notebooks/esa-cci/ect-training/adaptation-futures-nz-10-2025/readme","position":1},{"hierarchy":{"lvl1":"Step 1. Setup & Imports"},"type":"lvl1","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-beginner","position":0},{"hierarchy":{"lvl1":"Step 1. Setup & Imports"},"content":"","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-beginner","position":1},{"hierarchy":{"lvl1":"LPS Training - Beginner Level: Illustrating Climate News Headlines with CCI Data"},"type":"lvl1","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-beginner#lps-training-beginner-level-illustrating-climate-news-headlines-with-cci-data","position":2},{"hierarchy":{"lvl1":"LPS Training - Beginner Level: Illustrating Climate News Headlines with CCI Data"},"content":"\n\n\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-beginner#lps-training-beginner-level-illustrating-climate-news-headlines-with-cci-data","position":3},{"hierarchy":{"lvl1":"LPS Training - Beginner Level: Illustrating Climate News Headlines with CCI Data","lvl2":"1. Introduction:"},"type":"lvl2","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-beginner#id-1-introduction","position":4},{"hierarchy":{"lvl1":"LPS Training - Beginner Level: Illustrating Climate News Headlines with CCI Data","lvl2":"1. Introduction:"},"content":"In this beginner-friendly notebook, we will use real satellite-based data from the \n\nESA Climate Change Initiative (CCI) to explore recent climate trends. The goal is to understand and illustrate climate news headlines using satellite-based measurements of essential climate variables.\n\nWe will use simple Python code and visualisations to explore questions such as:\n\nHas global sea surface temperature an sea levels increased over the last decades?\n\nWhat did sea temperatures look like in record-warm years?\n\nWhat did LST and soil moisture conditions look like in record extreme fire events?\n\nThis notebook is designed for participants with no prior experience in Python or climate data analysis. You will learn:\n\nHow to access CCI climate data using the CCI Toolbox python Package\n\nHow to navigate and subset climate data using Xarray\n\nHow to create basic plots and statistics with Matplotlib\n\nHow to save a figure you generated\n\nHow to map and interpret ECVs changes over time and space\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-beginner#id-1-introduction","position":5},{"hierarchy":{"lvl1":"LPS Training - Beginner Level: Illustrating Climate News Headlines with CCI Data","lvl2":"Step 1. Setup & Imports"},"type":"lvl2","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-beginner#step-1-setup-imports","position":6},{"hierarchy":{"lvl1":"LPS Training - Beginner Level: Illustrating Climate News Headlines with CCI Data","lvl2":"Step 1. Setup & Imports"},"content":"Before we can start working with the data, we need to import a few Python libraries. These libraries provide useful tools for working with satellite data, performing simple calculations, and creating visualizations.\n\nDon‚Äôt worry if you‚Äôre not familiar with these yet ‚Äî we‚Äôll explain what you need as we go.\n\n# ESA Climate Toolbox imports for accessing and plotting ESA CCI data\nfrom esa_climate_toolbox.core import get_op              # Get predefined operations (e.g., time series, averages)\nfrom esa_climate_toolbox.core import list_ecv_datasets   # List available datasets per ECV (Essential Climate Variable)\nfrom esa_climate_toolbox.core import get_store           # Connect to an ESA data store\nfrom esa_climate_toolbox.core import list_datasets       # List all datasets in a store\nfrom esa_climate_toolbox.core import search\nfrom esa_climate_toolbox.ops import plot                 # High-level plotting functions for CCI data\n\n# Used for connecting to remote data sources (e.g., ESA CCI ODP)\nfrom xcube.core.store import new_data_store\n\n# For displaying geographic regions interactively (if desired)\nfrom IPython.display import GeoJSON\nimport shapely.geometry   # Handling geometric objects like bounding boxes\n\n# Core data science libraries\nimport pandas as pd       # For tabular data handling and time manipulation\nimport numpy as np        # For numerical operations\nimport xarray as xr       # For multi-dimensional climate data structures\n\n# Mapping and plotting\nimport matplotlib.pyplot as plt       # Plotting library\nimport cartopy.crs as ccrs            # Cartographic projections for spatial data\n\n# Notebook settings\nimport warnings\nwarnings.filterwarnings(\"ignore\") # Suppressing warnings to keep notebook output clean\n%matplotlib inline\n\nWhat we just did:\n\nnumpy: helps with numbers and arrays.\n\nmatplotlib: lets us create plots and maps.\n\nxarray: makes it easy to work with climate datasets.\n\ncartopy: helps plot maps with geographic context.\n\nToolbox: a package that facilitates access and computation of CCI data\n\nUp next: We‚Äôll learn how to access ECVs from the CCI Toolbox.\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-beginner#step-1-setup-imports","position":7},{"hierarchy":{"lvl1":"LPS Training - Beginner Level: Illustrating Climate News Headlines with CCI Data","lvl2":"Step 2: Load & Visualize Global SST"},"type":"lvl2","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-beginner#step-2-load-visualize-global-sst","position":8},{"hierarchy":{"lvl1":"LPS Training - Beginner Level: Illustrating Climate News Headlines with CCI Data","lvl2":"Step 2: Load & Visualize Global SST"},"content":"","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-beginner#step-2-load-visualize-global-sst","position":9},{"hierarchy":{"lvl1":"LPS Training - Beginner Level: Illustrating Climate News Headlines with CCI Data","lvl3":"Define the Dataset ID","lvl2":"Step 2: Load & Visualize Global SST"},"type":"lvl3","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-beginner#define-the-dataset-id","position":10},{"hierarchy":{"lvl1":"LPS Training - Beginner Level: Illustrating Climate News Headlines with CCI Data","lvl3":"Define the Dataset ID","lvl2":"Step 2: Load & Visualize Global SST"},"content":"To work with a specific ESA CCI dataset, we need to specify its dataset ID. This unique identifier tells the toolbox which variable and product we want to access.\n\nIn this section, we are using a the sea surface temperature (SST) zarr file. You can find the variables of the products under data_vars. For the SST, we will use the variable analysed_sst.\n\nFirst, we define the dataset ID and the store from which we retrieve the data (for the SST it is esa-cci-zarr). For this notebook we will focus on this dat With the command describe_data, we can have a look at the structure of the file, such as time, dimension and the variable stored within.\n\nlist_ecv_datasets(\"SST\")\n\n# Open the ESA CCI zarr store\ncci_zarr_store = new_data_store(\"esa-cci-zarr\")\n\n# Which data do we have in the ESA CCI zarr store ?\nlist_datasets(\"esa-cci-zarr\")\n\ndata_id = 'ESACCI-L4_GHRSST-SST-GMPE-GLOB_CDR2.0-1981-2016-v02.0-fv01.0.zarr' \n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-beginner#define-the-dataset-id","position":11},{"hierarchy":{"lvl1":"LPS Training - Beginner Level: Illustrating Climate News Headlines with CCI Data","lvl3":"Describe Dataset (Check Available Variables and Metadata)","lvl2":"Step 2: Load & Visualize Global SST"},"type":"lvl3","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-beginner#describe-dataset-check-available-variables-and-metadata","position":12},{"hierarchy":{"lvl1":"LPS Training - Beginner Level: Illustrating Climate News Headlines with CCI Data","lvl3":"Describe Dataset (Check Available Variables and Metadata)","lvl2":"Step 2: Load & Visualize Global SST"},"content":"Before loading the full dataset, it‚Äôs helpful to inspect the metadata to understand its structure. This includes:\n\nAvailable variables (e.g., SST, uncertainty estimates)\n\nTemporal and spatial coverage\n\nData format and structure\n\nThis step ensures we know what the dataset contains and how to work with it. It also helps confirm that the variable we want to plot or analyze is actually included.\n\nüõ†Ô∏è Tip: You can use the description to verify variable names, dimensions (e.g., lat, lon, time), and time coverage.\n\nüìò More on dataset structure:üîó \n\nESA Climate Toolbox ‚Äì Data Access\n\n# Open the ESA CCI zarr store\ncci_zarr_store.describe_data(data_id)\n\n#open the sst dataset\nsst_ds = cci_zarr_store.open_data(\n    data_id=data_id)\ndisplay(sst_ds)\n\n#Display SST variable\ndisplay(sst_ds.analysed_sst)\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-beginner#describe-dataset-check-available-variables-and-metadata","position":13},{"hierarchy":{"lvl1":"LPS Training - Beginner Level: Illustrating Climate News Headlines with CCI Data","lvl3":"Calculate and plot the global mean of SST","lvl2":"Step 2: Load & Visualize Global SST"},"type":"lvl3","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-beginner#calculate-and-plot-the-global-mean-of-sst","position":14},{"hierarchy":{"lvl1":"LPS Training - Beginner Level: Illustrating Climate News Headlines with CCI Data","lvl3":"Calculate and plot the global mean of SST","lvl2":"Step 2: Load & Visualize Global SST"},"content":"To undertand how the SST has been changing during the last decades, we can calculate the mean across all latitudes and longitudes and plot a time series of the average SST over the world.\n\nFirst let‚Äôs have a look at the different operators from the Toolbox that we can use:\n\nfrom esa_climate_toolbox.core import list_operations\nlist_operations()\n\n# Getting the time-series mean operator\nts_mean_op = get_op('tseries_mean')\n\n# Apply the operation to our dataset , specifying the variable of interest\nsst_global_mean = ts_mean_op(\n    ds=sst_ds,\n    var='analysed_sst'    \n).compute()\n\n# Show the yearly mean variable only:\nsst_global_mean.analysed_sst_mean\n\n# Let's make our first plot of the computed yearly mean variable\n# Plotting the global mean SST\nfig = plt.figure(figsize=(12,3))\n# Daily mean SST\n(sst_global_mean.analysed_sst_mean-273.15).plot(c='k',linewidth=1,label='daily')\n# Yearly mean SST\n# Add the legend\nplt.legend()\n# Add a grid \nplt.grid(True, which='both',linestyle='--')\n# Add a title and axis labels\nplt.title('Global Mean SST')\nplt.ylabel('Mean SST (¬∞C)')\nplt.xlabel('Year')\n#how to save the figure\nplt.savefig('Global-Mean-SST-1981-2016.png')\n#plt.savefig('Global-Mean-SST-1981-2016.svg') \nplt.show()\n\n#Now let's take a look at yearly mean SST , first we use the Toolbox again to compute the yearly mean:\nresample_time = get_op('temporal_aggregation') #fetching the operator to temporally aggregate our data\n\nsst_yearly_mean =resample_time(\n    ds=sst_global_mean,\n    method='mean',\n    period='1YE'\n) #note: it is also possible to use this operator for different periods, as well as computing maximum and minimum for a given period.\n\n\ndisplay(sst_yearly_mean.analysed_sst_mean)\n\n#Let's look at the change of yearly mean SST over the years, some years are much warmer than others:\n(sst_yearly_mean.analysed_sst_mean-273.15).plot(c='crimson',linewidth=1,label='yearly')\n# Define El Ni√±o winters\nelnino_periods = [\n    (1982, 9, 1983, 3),\n    (1986, 9, 1987, 3),\n    (1991, 9, 1992, 3),\n    (1997, 9, 1998, 3),\n    (2002, 9, 2003, 3),\n    (2009, 9, 2010, 3),\n    (2015, 9, 2016, 3),\n]\nax=plt.gca()\n# Add grey shading for El Ni√±o winters\nfor start_y, start_m, end_y, end_m in elnino_periods:\n    start_date = pd.Timestamp(start_y, start_m, 1)\n    end_date = pd.Timestamp(end_y, end_m, 1) + pd.offsets.MonthEnd(0)\n    ax.axvspan(start_date, end_date, color='lightgrey', alpha=0.5)\nplt.ylabel('Mean SST (¬∞C)')\nplt.xlabel('Year')\nplt.title(\"Time series of the yearly SST mean (1982-2016)\")\n\n#In climate science  rolling means (f.i 10-year averages) are applied to suppress short-term internal variability: \n#SST is influenced by short-term noise like \n#ENSO (El Ni√±o/La Ni√±a, ~2‚Äì7-year cycles), \n#Volcanic eruptions that can cause temporary cooling (e.g., Pinatubo 1991) \n#Random ocean-atmosphere fluctuations.\n#A 10-year rolling mean smooths out these high-frequency swings, revealing the underlying climate trend.\nsmooth_global_avg = sst_yearly_mean.analysed_sst_mean.rolling(time=10, center=True).mean()  \n(smooth_global_avg-273.15).plot(c='crimson',linewidth=1)\nplt.title(\"10-year running mean of SST (1982-2016)\")\nplt.ylabel('Mean SST (¬∞C)')\nplt.xlabel('Year')\n\n#when was yearly mean SST the highest?\nsst_yearly_mean.analysed_sst_mean.idxmax().dt.year\n\n#Let's plot our first spatial map: SST during the year 2015\n#First we select only sst values for the year 2015:\n#Temporal Subset\ntime_slice= '2015-01-01, 2015-12-31'\nsubset_temporal_op = get_op('subset_temporal')\nSST_sub_2015 = subset_temporal_op(ds=sst_ds,time_range=time_slice)\ndisplay(SST_sub_2015)\n\n#Now we compute the mean over the year 2015\nSST_sub_2015_avg=SST_sub_2015.analysed_sst.mean(dim='time')\n\nSST_sub_2015_avg\n\n# Now let's plot our first spatial map: SST during the year 2015\n# We need to load the two dimensions: latitute and longitude; and the variable\nSST_15_plot= SST_sub_2015_avg.squeeze().load()\nlat =SST_sub_2015_avg[\"lat\"].values\nlon = SST_sub_2015_avg[\"lon\"].values\n\nfig = plt.figure(figsize=(12, 8))\nax = plt.axes(projection=ccrs.PlateCarree())\n\nmesh = ax.pcolormesh( lon, lat, SST_15_plot - 273.15\n      , vmin=0, vmax=30)\n    \n    \nax.set_title(\"Mean SST during 2015\",\n          fontsize=14, pad=20, weight='bold')\n\n# Manually adding a colorbar below the plots\ncbar_ax = fig.add_axes([0.25, 0.1, 0.5, 0.03])  \ncbar = fig.colorbar(mesh, cax=cbar_ax, orientation='horizontal')\ncbar.set_label(\"SST (¬∞C)\")\n\nplt.show()\n\nHow abnormal was the SST during a very warm year ? Let‚Äôs focus on a particularly hot year: 2015 coinciding with an El Nino event\n\nLet‚Äôs take back the initial global dataset and compute the mean over the period 1981-2016: this will be our climatology.\n\n#Computing the climatology over the period 1981-2016\n# Compute yearly means first  \nsst_yearly_means= sst_ds.resample(time='Y').mean('time')  \n# Then average over all years  \nsst_climato = sst_yearly_means.analysed_sst.mean('time') \nsst_climato\n\n#PLotting the climatology\nsst_climato_plot=sst_climato.squeeze().load()\n\nfig = plt.figure(figsize=(12, 8))\nax = plt.axes(projection=ccrs.PlateCarree())\n\nmesh = ax.pcolormesh( lon, lat, sst_climato_plot- 273.15\n      , vmin=0, vmax=30)\n    \n    \nax.set_title(\"Mean SST (1982-2016)\",\n          fontsize=14, pad=20, weight='bold')\n\n# Manually adding a colorbar below the plots\ncbar_ax = fig.add_axes([0.25, 0.1, 0.5, 0.03])  \ncbar = fig.colorbar(mesh, cax=cbar_ax, orientation='horizontal')\ncbar.set_label(\"SST (¬∞C)\")\n\nplt.show()\n\n#PLotting the anomaly of SST in 2016 compared to 1981-2016\nfig = plt.figure(figsize=(12, 8))\nax = plt.axes(projection=ccrs.PlateCarree())\n\nmesh = ax.pcolormesh( lon, lat, SST_15_plot - sst_climato_plot ,\n      cmap='RdBu_r', vmin=-2, vmax=2)\n    \n    \nax.set_title(\"Anomaly of SST in 2015 w.r.t 1982-2016\",\n          fontsize=14, pad=20, weight='bold')\n\n# Manually adding a colorbar below the plots\ncbar_ax = fig.add_axes([0.25, 0.1, 0.5, 0.03])  \ncbar = fig.colorbar(mesh, cax=cbar_ax, orientation='horizontal')\ncbar.set_label(\"SST anomaly (¬∞C)\")\n\nplt.show()\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-beginner#calculate-and-plot-the-global-mean-of-sst","position":15},{"hierarchy":{"lvl1":"LPS Training - Beginner Level: Illustrating Climate News Headlines with CCI Data","lvl3":"Your turn: Let‚Äôs explore a few other examples with different ECVS","lvl2":"Step 2: Load & Visualize Global SST"},"type":"lvl3","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-beginner#your-turn-lets-explore-a-few-other-examples-with-different-ecvs","position":16},{"hierarchy":{"lvl1":"LPS Training - Beginner Level: Illustrating Climate News Headlines with CCI Data","lvl3":"Your turn: Let‚Äôs explore a few other examples with different ECVS","lvl2":"Step 2: Load & Visualize Global SST"},"content":"\n\nüëâ Your task: Below is the list of ECVs available in the ESA-CCI zarr datastore. Pick one of the three headlines below, and try to write a code to illustrate it, using the examples above.\n\n\n\nlist_datasets(\"esa-cci-zarr\")\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-beginner#your-turn-lets-explore-a-few-other-examples-with-different-ecvs","position":17},{"hierarchy":{"lvl1":"LPS Training - Beginner Level: Illustrating Climate News Headlines with CCI Data","lvl2":"Headline Example 1: ‚ÄúGlobal sea levels are rising as a result of human-caused global warming‚Äù"},"type":"lvl2","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-beginner#headline-example-1-global-sea-levels-are-rising-as-a-result-of-human-caused-global-warming","position":18},{"hierarchy":{"lvl1":"LPS Training - Beginner Level: Illustrating Climate News Headlines with CCI Data","lvl2":"Headline Example 1: ‚ÄúGlobal sea levels are rising as a result of human-caused global warming‚Äù"},"content":"\n\nüëâ How would you illustrate this global increase based on previous examples?\n\nüí° Display the cheat codes cells for solutions\n\nüí° For more information on the impacts of how climate change affects sea level rise, have a look at \n\nthis ESA-CCI Climate Story\n\nüëâ How would you illustrate this global increase based on previous examples?\n\n\n\n\n\n#Type your code here\n\n\n\n\n\n#Cheat Code: opening the data\ndata_id = 'ESACCI-SEALEVEL-IND-MSLTR-MERGED-1993-2016-fv02.zarr'\nvariables = ['sla'] # we choose the sea level anomaly (sla)\nsla_ds = cci_zarr_store.open_data(data_id)\ndisplay(sla_ds)\n\n#Cheat Code: plotting the data\nfig = plt.figure(figsize=(12, 8))\nax = plt.axes(projection=ccrs.PlateCarree())\nsla= sla_ds.local_msl_trend.squeeze().load()\nlat = sla_ds[\"lat\"].values\nlon = sla_ds[\"lon\"].values\n\nmesh = ax.pcolormesh( lon, lat, sla,\n        cmap=\"RdBu_r\", vmin=-10, vmax=10,\n    )\n    \nax.set_title(\"Global Sea Level Rise Anomaly\",\n          fontsize=14, pad=20, weight='bold')\n\n# Manually adding a colorbar below the plots\ncbar_ax = fig.add_axes([0.25, 0.1, 0.5, 0.03])  \ncbar = fig.colorbar(mesh, cax=cbar_ax, orientation='horizontal')\ncbar.set_label(\"SLR (mm/yr)\")\n\nplt.show()\n\n\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-beginner#headline-example-1-global-sea-levels-are-rising-as-a-result-of-human-caused-global-warming","position":19},{"hierarchy":{"lvl1":"LPS Training - Beginner Level: Illustrating Climate News Headlines with CCI Data","lvl2":"Headline Example 2: ‚ÄúCatastrophic wildfires hitting southeastern Australia in 2019-20 made worse due to climate change‚Äù"},"type":"lvl2","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-beginner#headline-example-2-catastrophic-wildfires-hitting-southeastern-australia-in-2019-20-made-worse-due-to-climate-change","position":20},{"hierarchy":{"lvl1":"LPS Training - Beginner Level: Illustrating Climate News Headlines with CCI Data","lvl2":"Headline Example 2: ‚ÄúCatastrophic wildfires hitting southeastern Australia in 2019-20 made worse due to climate change‚Äù"},"content":"\n\nüëâ Which ESA-CCI climate variables from the .zarr datastore would use to look at the conditions that made the wildfires in Australia in 2019-2020 so severe ?\n\nüëâHow would you plot spatial maps of these conditions during this period ? How would you compare them to average conditions?\n\n#Type your code here\n\n\n\n\nüí° Display the cheat codes cells for solutions\n\nüí° For more information on this extreme event, have a look at \n\nthis BBC News article and \n\nthis ESA article. Note that ESA-CCI has developped a Bruned Area product, not yet available on the CCI .zarra datastore of the Toolbox but you can find out more \n\nhere.\n\n# Focus on South-Eastern Australia (bbox: 140, -45, 155, -25) during 2019 heatwave\nbbox = (140, -45, 155, -25)  \n# Display bounding box for reference\nGeoJSON(shapely.geometry.box(*bbox).__geo_interface__)\n\n#We suggest to use the following monthly LST data\ndata_id = 'ESACCI-LST-L3S-LST-IRCDR_-0.01deg_1MONTHLY_DAY-1995-2020-fv3.00.zarr'\nLST_ds = cci_zarr_store.open_data(data_id)\nLST_ds \n\n#Cheat code for regional selection\nsubset_spatial_op = get_op('subset_spatial')\nLST_sub = subset_spatial_op(ds=LST_ds, region=bbox)\n#display spatial subset\nLST_sub\n\n#Cheat code for Temporal Subset\ntime_slice= '2019-01-01, 2019-12-31'\nsubset_temporal_op = get_op('subset_temporal')\nLST_sub_2019 = subset_temporal_op(ds=LST_sub,time_range=time_slice)\nLST_sub_2019\n\n\n\n#Let's take only the month of December 2019:\nLST_sub_2019_Dec=LST_sub.lst.time.sel(time='2019-12')\n\n#Cheat Code: loading values for plotting\nlat = LST_sub_2019[\"lat\"].values\nlon = LST_sub_2019[\"lon\"].values\nLST_sub_2019_Dec=LST_sub_2019_Dec.squeeze().load()\nLST_sub_2019_Dec\n\n#Cheat Code: Plotting the spatial map on December 2019 (time of peak conditions of the observed extreme event)\nfig = plt.figure(figsize=(12, 8))\nax = plt.axes(projection=ccrs.PlateCarree())\n\nmesh = ax.pcolormesh( lon, lat, LST_sub_2019_Dec - 273.15,\n        cmap=\"hot_r\", vmin=20, vmax=50\n    )\n    #you can adjust vmin and vmax values\nax.set_title(\"LST in Decemnber 2019\",\n          fontsize=14, pad=20, weight='bold')\n\n# Manually adding a colorbar below the plots\ncbar_ax = fig.add_axes([0.25, 0.01, 0.5, 0.03])   # you can adjust the colorbar position: [left, bottom, width, height]\ncbar = fig.colorbar(mesh, cax=cbar_ax, orientation='horizontal')\ncbar.set_label(\"T (¬∞C)\")\n\nplt.show()\n\n#Let's take all december months from 1995 to 2019\nLST_climato_Dec=LST_sub.lst.time.sel(time=LST_sub.lst['time'].dt.month == 12)\n\n# Cheat Code: How abnormal was this event ? - Computation of Climatology\n#Let's take all December months from 1995 to 2019\n#ow let's compare December 2019 with the climatology of monthly mean temperature over the period 1995-2019\n#Cheat Code: loading values for plotting\nLST_climato_Dec=LST_sub.lst.sel(time=LST_sub['time'].dt.month == 12).mean(dim='time')  \nLST_climato_Dec=LST_climato_Dec.squeeze().load()\n\n# Cheat Code: How abnormal was this event ? -  Plots\n# PLot the map for the December climatology and for December 2019 side by side\n\n# Plot side-by-side\nfig, (ax1, ax2) = plt.subplots(1, 2, figsize=(15, 6))\n\n# Plot max daytime LST (left)\nim1 = ax1.pcolormesh( lon, lat,LST_sub_2019_Dec-273.15, cmap='hot_r', vmin=5, vmax=50)\nax1.set_title('December 2019 LST')\nplt.colorbar(im1, ax=ax1, label='LST (¬∞C)')\n\n# Plot December climatology\nim2 = ax2.pcolormesh( lon, lat,LST_climato_Dec - 273.15, cmap='hot_r', vmin=5, vmax=50)\nax2.set_title('Climatology of December LST')\nplt.colorbar(im2, ax=ax2, label='LST (¬∞C)')\nplt.tight_layout()\nplt.show()\n\n\nüëâBonus Question: Now compute the anomaly of December LST in 2019 with respect to 1995-2020\n\n#You can do the same for soil moisture now - Cheat Code to open the data \n#!This data is daily and not monthly -\ndata_id = 'ESACCI-SOILMOISTURE-L3S-SSMV-COMBINED-1978-2020-fv05.3.zarr'\n#cci_zarr_store.describe_data(data_id)\nSM_ds = cci_zarr_store.open_data(data_id)\nSM_ds\n\n#Type your code here:\n\n\n\n\n#Type your code here:\n\n\n\n\n\n# Example of Plots: How abnormal was this event ?","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-beginner#headline-example-2-catastrophic-wildfires-hitting-southeastern-australia-in-2019-20-made-worse-due-to-climate-change","position":21},{"hierarchy":{"lvl1":"1. Import Necessary Packages"},"type":"lvl1","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-cloud-uncertainties","position":0},{"hierarchy":{"lvl1":"1. Import Necessary Packages"},"content":"","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-cloud-uncertainties","position":1},{"hierarchy":{"lvl1":"LPS Training - Advanced Level: Uncertainties in Essential Climate Variables (ECVs): A Focus on Clouds"},"type":"lvl1","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-cloud-uncertainties#lps-training-advanced-level-uncertainties-in-essential-climate-variables-ecvs-a-focus-on-clouds","position":2},{"hierarchy":{"lvl1":"LPS Training - Advanced Level: Uncertainties in Essential Climate Variables (ECVs): A Focus on Clouds"},"content":"\n\n\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-cloud-uncertainties#lps-training-advanced-level-uncertainties-in-essential-climate-variables-ecvs-a-focus-on-clouds","position":3},{"hierarchy":{"lvl1":"LPS Training - Advanced Level: Uncertainties in Essential Climate Variables (ECVs): A Focus on Clouds","lvl2":"Introduction:"},"type":"lvl2","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-cloud-uncertainties#introduction","position":4},{"hierarchy":{"lvl1":"LPS Training - Advanced Level: Uncertainties in Essential Climate Variables (ECVs): A Focus on Clouds","lvl2":"Introduction:"},"content":"\n\nIn climate science, no measurement is perfect‚Äîand understanding the uncertainties in our data is crucial for interpreting trends and making robust conclusions. This notebook explores the uncertainties associated with Essential Climate Variables (ECVs), using cloud properties as a representative example.\n\nThe ESA Climate Change Initiative (CCI) provides not only long-term datasets of key climate parameters, but also associated per-pixel uncertainty layers that quantify the confidence in each data point. These uncertainty values reflect the effects of sensor noise, retrieval limitations, and algorithm assumptions, all of which are especially relevant in satellite-derived variables like cloud cover.\n\nUsing the ESA CCI Toolbox, we will:\n\nLoad both the primary cloud dataset (e.g. total cloud fraction and liquid water path) and its associated uncertainty layer\n\nVisualize spatial patterns of cloud cover and uncertainty and liquid water path and its uncertainty\n\nDiscuss what these uncertainty values represent and how to interpret them when analyzing climate signals\n\nBy the end of this section, you‚Äôll gain a better understanding of:\n\nWhy uncertainty information is critical for satellite climate datasets\n\nHow the CCI represents and provides uncertainty\n\nHow to visualize and work with these values in your own analyses\n\n\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-cloud-uncertainties#introduction","position":5},{"hierarchy":{"lvl1":"LPS Training - Advanced Level: Uncertainties in Essential Climate Variables (ECVs): A Focus on Clouds","lvl3":"1. Import Necessary Packages","lvl2":"Introduction:"},"type":"lvl3","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-cloud-uncertainties#id-1-import-necessary-packages","position":6},{"hierarchy":{"lvl1":"LPS Training - Advanced Level: Uncertainties in Essential Climate Variables (ECVs): A Focus on Clouds","lvl3":"1. Import Necessary Packages","lvl2":"Introduction:"},"content":"In this section, we import the required Python packages to work with ESA Climate Change Initiative (CCI) data. Most notably, we use the \n\nESA Climate Toolbox which simplifies access, manipulation, and visualization of CCI datasets in Python.\n\nThese packages allow us to:\n\nAccess satellite-based climate data records from ESA.\n\nHandle geospatial and temporal dimensions efficiently.\n\nVisualize data with intuitive plotting tools.\n\nüìö For a broader introduction to the toolbox and how to install it, visit:üîó \n\nESA CCI Climate Toolbox Quick Startüîó \n\nESA Climate Data Toolbox Website\n\n# Create a new data store (e.g., remote or local access point for datasets)\nfrom xcube.core.store import new_data_store\n\n# Core functions from the ESA Climate Toolbox to access and process ECV datasets\nfrom esa_climate_toolbox.core import get_op               # Get predefined operations (e.g., time series mean, subsetting)\nfrom esa_climate_toolbox.core import list_ecv_datasets    # List available Essential Climate Variable (ECV) datasets\nfrom esa_climate_toolbox.core import get_store            # Connect to a specific data store (e.g., ESA CCI)\nfrom esa_climate_toolbox.core import list_datasets        # List all datasets within the selected store\n\n# Plotting utility for ESA CCI toolbox outputs\nfrom esa_climate_toolbox.ops import plot                  # Quick plotting for processed data\n\n# Work with labeled multi-dimensional arrays (ideal for satellite/climate data)\nimport xarray as xr\n\n# Plotting library for static figures\nimport matplotlib.pyplot as plt\n# Ensure that plots appear inline in Jupyter notebooks\n%matplotlib inline  \n\n# Suppress warning messages (optional, for cleaner notebook output)\nimport warnings\n\n# Numerical operations and array manipulation\nimport numpy as np\n\n# Interactive plotting with Plotly\nimport plotly.io as pio\npio.renderers.default = 'notebook_connected'  # Ensures Plotly figures render properly in notebooks\n\nimport plotly.graph_objects as go  # Create detailed and interactive figures with full layout control\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-cloud-uncertainties#id-1-import-necessary-packages","position":7},{"hierarchy":{"lvl1":"LPS Training - Advanced Level: Uncertainties in Essential Climate Variables (ECVs): A Focus on Clouds","lvl3":"Step 2: Connect to the ESA CCI Data Store","lvl2":"Introduction:"},"type":"lvl3","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-cloud-uncertainties#step-2-connect-to-the-esa-cci-data-store","position":8},{"hierarchy":{"lvl1":"LPS Training - Advanced Level: Uncertainties in Essential Climate Variables (ECVs): A Focus on Clouds","lvl3":"Step 2: Connect to the ESA CCI Data Store","lvl2":"Introduction:"},"content":"The ESA Climate Toolbox provides direct access to the ESA Climate Data Store, which hosts harmonized satellite-based climate data records produced under the ESA Climate Change Initiative (CCI).\n\nIn this step, we establish a connection to the data store so we can browse and open datasets. This connection allows us to access data without having to download files manually ‚Äî a convenient way to explore and analyze large geospatial datasets in cloud-friendly formats such as Zarr or Kerchunk.\n\nThe data store includes a wide range of essential climate variables (ECVs), such as aerosols, land surface temperature, sea level, and soil moisture.\n\nüìò Learn more about available datasets:üîó \n\nESA Climate Data Toolbox ‚Äì Quick Start Guide\n\ncci_store = new_data_store(\"esa-cci\")\n# List all available data sets of an ECV\nlist_ecv_datasets(\"Cloud\")\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-cloud-uncertainties#step-2-connect-to-the-esa-cci-data-store","position":9},{"hierarchy":{"lvl1":"LPS Training - Advanced Level: Uncertainties in Essential Climate Variables (ECVs): A Focus on Clouds","lvl3":"Step 3: Define the Dataset ID","lvl2":"Introduction:"},"type":"lvl3","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-cloud-uncertainties#step-3-define-the-dataset-id","position":10},{"hierarchy":{"lvl1":"LPS Training - Advanced Level: Uncertainties in Essential Climate Variables (ECVs): A Focus on Clouds","lvl3":"Step 3: Define the Dataset ID","lvl2":"Introduction:"},"content":"To work with a specific ESA CCI dataset, we need to specify its dataset ID. This unique identifier tells the toolbox which variable and product we want to access.\n\nIn this example, we are using a dataset from the Cloud CCI project that provides monthly Level 3 cloud property products, derived from multiple satellite sensors. These products include key cloud variables such as cloud fraction (cfc) and liquid water path (lwp) including their uncertainties.\n\nWe will use the following dataset ID:\n\ndata_id = 'esacci.CLOUD.mon.L3C.CLD_PRODUCTS.multi-sensor.multi-platform.AVHRR-PM.3-0.r1'\ncci_store.describe_data(data_id)\n\nYou can find more information on the dataset on the CEDA website \n\n(Link).\nIf you click on ‚ÄúRelated Documents‚Äù, you can find the documents about the algorithm description (ATBD CC4CL and ATBD). Those documents include the information on how the uncertainties are calculated and which parameters are included in the dataset.\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-cloud-uncertainties#step-3-define-the-dataset-id","position":11},{"hierarchy":{"lvl1":"LPS Training - Advanced Level: Uncertainties in Essential Climate Variables (ECVs): A Focus on Clouds","lvl3":"Step 4: Define Time Range and Variables of Interest and Open the Dataset","lvl2":"Introduction:"},"type":"lvl3","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-cloud-uncertainties#step-4-define-time-range-and-variables-of-interest-and-open-the-dataset","position":12},{"hierarchy":{"lvl1":"LPS Training - Advanced Level: Uncertainties in Essential Climate Variables (ECVs): A Focus on Clouds","lvl3":"Step 4: Define Time Range and Variables of Interest and Open the Dataset","lvl2":"Introduction:"},"content":"Before opening the dataset, we define a few key parameters. We focus on only one day to decrease the dataload. If you wish to look at the time series of the uncertainties, you can change the start and end date to the desired time range.\n\nTime range: the date(s) we want to load\n\nVariables: which data variable(s) to retrieve\n\n(Optional) Bounding box: spatial region of interest ‚Äî here we skip it to load the global dataset\n\nvariables = ['cfc','cfc_unc','lwp','lwp_unc','lwp_prop_unc','lwp_corr_unc']  # Variables to retrieve, their names can be found through the cci_store.describe_data(data_id) command above\nstart_date = '1997-12-01'    # Start and end date (same for a single timestep)\nend_date = '1997-12-01'\n\nNow we open the dataset using the selected parameters.The ESA Climate Toolbox will download only the necessary data (e.g., variable and time range).\nYou can always adjust the time range or variables to explore different slices of the dataset.\n\ncloud_ds = cci_store.open_data(\n    data_id=data_id,\n    variable_names=variables,\n    time_range=[start_date, end_date]\n)\ndisplay(cloud_ds)\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-cloud-uncertainties#step-4-define-time-range-and-variables-of-interest-and-open-the-dataset","position":13},{"hierarchy":{"lvl1":"LPS Training - Advanced Level: Uncertainties in Essential Climate Variables (ECVs): A Focus on Clouds","lvl3":"Step 5: Extract the Variables and create a 3D Plot","lvl2":"Introduction:"},"type":"lvl3","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-cloud-uncertainties#step-5-extract-the-variables-and-create-a-3d-plot","position":14},{"hierarchy":{"lvl1":"LPS Training - Advanced Level: Uncertainties in Essential Climate Variables (ECVs): A Focus on Clouds","lvl3":"Step 5: Extract the Variables and create a 3D Plot","lvl2":"Introduction:"},"content":"","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-cloud-uncertainties#step-5-extract-the-variables-and-create-a-3d-plot","position":15},{"hierarchy":{"lvl1":"LPS Training - Advanced Level: Uncertainties in Essential Climate Variables (ECVs): A Focus on Clouds","lvl4":"Cloud Fraction (CFC)","lvl3":"Step 5: Extract the Variables and create a 3D Plot","lvl2":"Introduction:"},"type":"lvl4","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-cloud-uncertainties#cloud-fraction-cfc","position":16},{"hierarchy":{"lvl1":"LPS Training - Advanced Level: Uncertainties in Essential Climate Variables (ECVs): A Focus on Clouds","lvl4":"Cloud Fraction (CFC)","lvl3":"Step 5: Extract the Variables and create a 3D Plot","lvl2":"Introduction:"},"content":"Next, we extract the variables we would like to plot. We start with the cloud fraction (CFC) and its uncertainty.\n\n# Extract variables\ncfc = cloud_ds['cfc'].squeeze()\ncfc_unc = cloud_ds['cfc_unc'].squeeze()\n\n# Get coordinate arrays - the lat and lon are the same for cfc_unc and cfc, thus we only load them here via the cfc variable\nlon = cfc['lon'].values\nlat = cfc['lat'].values\n\n# Get 2D grids (assuming dims are [lat, lon])\nz_unc = cfc_unc.values  # Uncertainty for Z-axis\nsurface_color = cfc.values  # For coloring the surface\n\nNow we use the plotly package to create an interactive plot of the uncertainty. We use the CFC as color and the uncertainty will be shown on the vertical axis.\n\n# Create 2D coordinate grids\nlon2d, lat2d = np.meshgrid(lon, lat)\n\n# Check that all arrays have the same shape\nassert lon2d.shape == lat2d.shape == z_unc.shape == surface_color.shape, \"Shape mismatch\"\n\n# Create surface plot, define hover variables too show data via mouse hovering\nfig = go.Figure(\n    data=[go.Surface(\n        x=lon2d,\n        y=lat2d,\n        z=z_unc,\n        surfacecolor=surface_color,\n        colorscale=\"Blues_r\",\n        colorbar=dict(title=\"Cloud Fraction\"),\n        hovertemplate=\n            \"Longitude: %{x}<br>\" +\n            \"Latitude: %{y}<br>\" +\n            \"Uncertainty in %: %{z:.2f}<br>\"\n    )]\n)\n\nfig.update_layout(\n    title=dict(text='Cloud Fraction Uncertainty Surface'),\n    autosize=False,\n    width=700,\n    height=600,\n    margin=dict(l=65, r=50, b=65, t=90),\n    scene=dict(\n        xaxis_title=\"Longitude\",\n        yaxis_title=\"Latitude\",\n        zaxis_title=\"Uncertainty in %\",\n        yaxis=dict(range=[90, -90]),  # Reverse latitude axis \n        xaxis=dict(range=[180,-180]) # Reverse longitude axis\n    )\n)\n\nfig.show()\n\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-cloud-uncertainties#cloud-fraction-cfc","position":17},{"hierarchy":{"lvl1":"LPS Training - Advanced Level: Uncertainties in Essential Climate Variables (ECVs): A Focus on Clouds","lvl3":"What do we see?","lvl2":"Introduction:"},"type":"lvl3","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-cloud-uncertainties#what-do-we-see","position":18},{"hierarchy":{"lvl1":"LPS Training - Advanced Level: Uncertainties in Essential Climate Variables (ECVs): A Focus on Clouds","lvl3":"What do we see?","lvl2":"Introduction:"},"content":"The uncertainties in Cloud Fraction Cover (CFC) are relatively straightforward to interpret.\nThey are based on the average probability of cloud presence for each pixel, where the cloud detection algorithm classifies pixels as either ‚Äúcloud‚Äù (1) or ‚Äúno cloud‚Äù (0).\n\nUncertainties arise in cases where the classification is ambiguous‚Äîfor example, over bright surfaces like snow or desert, where high surface albedo makes it difficult to distinguish clouds from the background. In such situations, the cloud detection confidence is reduced, leading to higher uncertainty values. We can see this above Antarctica, for example, where the uncertainty is abruptly rising while above the ocean along the coast of Antarctica and further north, the uncertainties are very low.\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-cloud-uncertainties#what-do-we-see","position":19},{"hierarchy":{"lvl1":"LPS Training - Advanced Level: Uncertainties in Essential Climate Variables (ECVs): A Focus on Clouds","lvl2":"Liquid Water Path (LWP)"},"type":"lvl2","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-cloud-uncertainties#liquid-water-path-lwp","position":20},{"hierarchy":{"lvl1":"LPS Training - Advanced Level: Uncertainties in Essential Climate Variables (ECVs): A Focus on Clouds","lvl2":"Liquid Water Path (LWP)"},"content":"Now we move on to a more complex parameter, the liquid water path (LWP).\n\nSatellite retrievals of LWP are based on radiative measurements (like reflectance, brightness temperature) which are fed into physical models. These retrievals are subject to various uncertainties, which are separated into two main types:","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-cloud-uncertainties#liquid-water-path-lwp","position":21},{"hierarchy":{"lvl1":"LPS Training - Advanced Level: Uncertainties in Essential Climate Variables (ECVs): A Focus on Clouds","lvl5":"1. Propagated Uncertainty (lwp_prop_unc)","lvl2":"Liquid Water Path (LWP)"},"type":"lvl5","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-cloud-uncertainties#id-1-propagated-uncertainty-lwp-prop-unc","position":22},{"hierarchy":{"lvl1":"LPS Training - Advanced Level: Uncertainties in Essential Climate Variables (ECVs): A Focus on Clouds","lvl5":"1. Propagated Uncertainty (lwp_prop_unc)","lvl2":"Liquid Water Path (LWP)"},"content":"Definition:\n\nUncertainties that originate from input measurements and propagate through the retrieval algorithm.\n\nThese stem from:\n\nInstrumental noise\n\nCalibration errors\n\nAssumed atmospheric conditions\n\nModel assumptions within the retrieval algorithm\n\nHow it‚Äôs computed:\n\nDerived by error propagation using analytic formulas or sensitivity analysis.\n\nIt accounts for how small errors in input variables affect the output (LWP).\n\nCharacteristics:\n\nPixel-specific\n\nVaries with atmospheric conditions, viewing geometry, surface type","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-cloud-uncertainties#id-1-propagated-uncertainty-lwp-prop-unc","position":23},{"hierarchy":{"lvl1":"LPS Training - Advanced Level: Uncertainties in Essential Climate Variables (ECVs): A Focus on Clouds","lvl5":"2. Correlated Uncertainty (lwp_corr_unc)","lvl2":"Liquid Water Path (LWP)"},"type":"lvl5","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-cloud-uncertainties#id-2-correlated-uncertainty-lwp-corr-unc","position":24},{"hierarchy":{"lvl1":"LPS Training - Advanced Level: Uncertainties in Essential Climate Variables (ECVs): A Focus on Clouds","lvl5":"2. Correlated Uncertainty (lwp_corr_unc)","lvl2":"Liquid Water Path (LWP)"},"content":"Definition\n\nUncertainties that are spatially or temporally correlated, not random per pixel.\n\nThese come from:\n\nSystematic biases in retrieval algorithms\n\nAssumptions in radiative transfer models\n\nShared calibration errors across multiple observations\n\nCharacteristics:\n\nNot independent from pixel to pixel\n\nImportant for regional or temporal averaging\n\nNot properly accounting for this can lead to overconfident estimates","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-cloud-uncertainties#id-2-correlated-uncertainty-lwp-corr-unc","position":25},{"hierarchy":{"lvl1":"LPS Training - Advanced Level: Uncertainties in Essential Climate Variables (ECVs): A Focus on Clouds","lvl5":"3. Total Uncertainty (lwp_unc)","lvl2":"Liquid Water Path (LWP)"},"type":"lvl5","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-cloud-uncertainties#id-3-total-uncertainty-lwp-unc","position":26},{"hierarchy":{"lvl1":"LPS Training - Advanced Level: Uncertainties in Essential Climate Variables (ECVs): A Focus on Clouds","lvl5":"3. Total Uncertainty (lwp_unc)","lvl2":"Liquid Water Path (LWP)"},"content":"ESA CCI computes total uncertainty as a quadrature sum of both components:\n\n\\text{lwp\\_unc} = \\sqrt{(\\text{lwp\\_prop\\_unc})^2 + (\\text{lwp\\_corr\\_unc})^2}\n\nThis assumes the propagated and correlated components are independent.","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-cloud-uncertainties#id-3-total-uncertainty-lwp-unc","position":27},{"hierarchy":{"lvl1":"LPS Training - Advanced Level: Uncertainties in Essential Climate Variables (ECVs): A Focus on Clouds","lvl5":"Why is the combination of uncertainties relevant?","lvl2":"Liquid Water Path (LWP)"},"type":"lvl5","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-cloud-uncertainties#why-is-the-combination-of-uncertainties-relevant","position":28},{"hierarchy":{"lvl1":"LPS Training - Advanced Level: Uncertainties in Essential Climate Variables (ECVs): A Focus on Clouds","lvl5":"Why is the combination of uncertainties relevant?","lvl2":"Liquid Water Path (LWP)"},"content":"If you‚Äôre analyzing individual pixels, the propagated uncertainty dominates. If you‚Äôre computing regional means or trends, you must consider correlated uncertainty ‚Äî otherwise, your confidence intervals will be too optimistic.\n\nIn this publication, you can read a more detailed description: \n\nStengel et al., Cloud property datasets retrieved from AVHRR, MODIS, AATSR and MERIS in the framework of the Cloud_cci project (2017).\n\nIn this ESA Cloud CCI Product User Guide, you can find all parameters and uncertainties listed: \n\nESA Cloud_cci Product User Guide (PUG).\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-cloud-uncertainties#why-is-the-combination-of-uncertainties-relevant","position":29},{"hierarchy":{"lvl1":"LPS Training - Advanced Level: Uncertainties in Essential Climate Variables (ECVs): A Focus on Clouds","lvl4":"Plotting the Correlated Uncertainty","lvl2":"Liquid Water Path (LWP)"},"type":"lvl4","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-cloud-uncertainties#plotting-the-correlated-uncertainty","position":30},{"hierarchy":{"lvl1":"LPS Training - Advanced Level: Uncertainties in Essential Climate Variables (ECVs): A Focus on Clouds","lvl4":"Plotting the Correlated Uncertainty","lvl2":"Liquid Water Path (LWP)"},"content":"\n\n# Extract and squeeze variables\nlwp = cloud_ds['lwp'].squeeze()\nlwp_corr_unc = cloud_ds['lwp_corr_unc'].squeeze()\n\n# Get 1D coordinate arrays\nlon = lwp['lon'].values\nlat = lwp['lat'].values\n\n# Create 2D coordinate grids\nlon2d, lat2d = np.meshgrid(lon, lat)\n\n# Get 2D data arrays\nz_unc = lwp_corr_unc.values\nsurface_color = lwp.values\n\n# Check that all arrays have the same shape\nassert lon2d.shape == lat2d.shape == z_unc.shape == surface_color.shape, \"Shape mismatch\"\n\n# Create surface plot\nfig = go.Figure(\n    data=[go.Surface(\n        x=lon2d,\n        y=lat2d,\n        z=z_unc,\n        surfacecolor=surface_color,\n        colorscale=\"viridis\",\n        colorbar=dict(title=\"Liquid Water Path (g/m2)\"),\n        cmin = 0,\n        cmax = 500,\n        hovertemplate=\n            \"Longitude: %{x}<br>\" +\n            \"Latitude: %{y}<br>\" +\n            \"Correlated Uncertainty (g/m2): %{z:.2f}<br>\"\n    )]\n)\n\nfig.update_layout(\n    title=dict(text='Liquid Water Path Correlated Uncertainty'),\n    autosize=False,\n    width=700,\n    height=600,\n    margin=dict(l=65, r=50, b=65, t=90),\n    scene=dict(\n        xaxis_title=\"Longitude\",\n        yaxis_title=\"Latitude\",\n        zaxis_title=\"Correlated Uncertainty (g/m2)\",\n        yaxis=dict(range=[90, -90]),  # Reverse latitude axis \n        xaxis=dict(range=[180,-180]) # Reverse longitude axis\n    )\n)\n\n# uncomment the next line \"fig.show()\" AND comment the \"pass\" command to show the figure:\n#fig.show()\npass\n\n# Extract and squeeze variables\nlwp = cloud_ds['lwp'].squeeze()\nlwp_prop_unc = cloud_ds['lwp_prop_unc'].squeeze()\n\n# Get 1D coordinate arrays\nlon = lwp['lon'].values\nlat = lwp['lat'].values\n\n# Create 2D coordinate grids\nlon2d, lat2d = np.meshgrid(lon, lat)\n\n# Get 2D data arrays\nz_unc = lwp_prop_unc.values\nsurface_color = lwp.values\n\n# Check that all arrays have the same shape\nassert lon2d.shape == lat2d.shape == z_unc.shape == surface_color.shape, \"Shape mismatch\"\n\n# Create surface plot\nfig = go.Figure(\n    data=[go.Surface(\n        x=lon2d,\n        y=lat2d,\n        z=z_unc,\n        surfacecolor=surface_color,\n        colorscale=\"viridis\",\n        colorbar=dict(title=\"Liquid Water Path (g/m2)\"),\n        cmin = 0,\n        cmax = 500,\n        hovertemplate=\n            \"Longitude: %{x}<br>\" +\n            \"Latitude: %{y}<br>\" +\n            \"Propagated Uncertainty (g/m2): %{z:.2f}<br>\"\n    )]\n)\n\nfig.update_layout(\n    title=dict(text='Liquid Water Path Propagated Uncertainty'),\n    autosize=False,\n    width=700,\n    height=600,\n    margin=dict(l=65, r=50, b=65, t=90),\n    scene=dict(\n        xaxis_title=\"Longitude\",\n        yaxis_title=\"Latitude\",\n        zaxis_title=\"Propagated Uncertainty (g/m2)\",\n        yaxis=dict(range=[90, -90]),  # Reverse latitude axis \n        xaxis=dict(range=[180,-180]) # Reverse longitude axis\n    )\n)\n\n# uncomment the next line \"fig.show()\" AND comment the \"pass\" command to show the figure:\n#fig.show()\npass\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-cloud-uncertainties#plotting-the-correlated-uncertainty","position":31},{"hierarchy":{"lvl1":"LPS Training - Advanced Level: Uncertainties in Essential Climate Variables (ECVs): A Focus on Clouds","lvl4":"Plotting the total uncertainty of LWP","lvl2":"Liquid Water Path (LWP)"},"type":"lvl4","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-cloud-uncertainties#plotting-the-total-uncertainty-of-lwp","position":32},{"hierarchy":{"lvl1":"LPS Training - Advanced Level: Uncertainties in Essential Climate Variables (ECVs): A Focus on Clouds","lvl4":"Plotting the total uncertainty of LWP","lvl2":"Liquid Water Path (LWP)"},"content":"\n\n# Extract and squeeze variables\nlwp = cloud_ds['lwp'].squeeze()\nlwp_unc = cloud_ds['lwp_unc'].squeeze()\n\n# Get 1D coordinate arrays\nlon = lwp['lon'].values\nlat = lwp['lat'].values\n\n# Create 2D coordinate grids\nlon2d, lat2d = np.meshgrid(lon, lat)\n\n# Get 2D data arrays\nz_unc = lwp_unc.values\nsurface_color = lwp.values\n\n# Check that all arrays have the same shape\nassert lon2d.shape == lat2d.shape == z_unc.shape == surface_color.shape, \"Shape mismatch\"\n\n# Create surface plot\nfig = go.Figure(\n    data=[go.Surface(\n        x=lon2d,\n        y=lat2d,\n        z=z_unc,\n        surfacecolor=surface_color,\n        colorscale=\"viridis\",\n        colorbar=dict(title=\"Liquid Water Path (g/m2)\"),\n        cmin = 0,\n        cmax = 500,\n        hovertemplate=\n            \"Longitude: %{x}<br>\" +\n            \"Latitude: %{y}<br>\" +\n            \"Uncertainty (g/m2): %{z:.2f}<br>\"\n    )]\n)\n\nfig.update_layout(\n    title=dict(text='Liquid Water Path Total Uncertainty'),\n    autosize=False,\n    width=700,\n    height=600,\n    margin=dict(l=65, r=50, b=65, t=90),\n    scene=dict(\n        xaxis_title=\"Longitude\",\n        yaxis_title=\"Latitude\",\n        zaxis_title=\"Uncertainty (g/m2)\",\n        yaxis=dict(range=[90, -90]),  # Reverse latitude axis \n        xaxis=dict(range=[180,-180]) # Reverse longitude axis\n    )\n)\n\n# uncomment the next line \"fig.show()\" AND comment the \"pass\" command to show the figure:\n#fig.show()\npass\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-cloud-uncertainties#plotting-the-total-uncertainty-of-lwp","position":33},{"hierarchy":{"lvl1":"LPS Training - Advanced Level: Uncertainties in Essential Climate Variables (ECVs): A Focus on Clouds","lvl4":"What do we see?","lvl2":"Liquid Water Path (LWP)"},"type":"lvl4","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-cloud-uncertainties#what-do-we-see-1","position":34},{"hierarchy":{"lvl1":"LPS Training - Advanced Level: Uncertainties in Essential Climate Variables (ECVs): A Focus on Clouds","lvl4":"What do we see?","lvl2":"Liquid Water Path (LWP)"},"content":"The uncertainty increases toward the northern polar region. Since this data is from December, the Sun‚Äôs zenith angle is low in these latitudes, resulting in limited visible light and higher retrieval uncertainty. Therefore, the high LWP values observed in the northern hemisphere should be interpreted with caution, as they are associated with high uncertainty.","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-cloud-uncertainties#what-do-we-see-1","position":35},{"hierarchy":{"lvl1":"Questions We Aim to Explore"},"type":"lvl1","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino","position":0},{"hierarchy":{"lvl1":"Questions We Aim to Explore"},"content":"","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino","position":1},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data"},"type":"lvl1","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#lps-training-intermediate-level-analyzing-sea-surface-temperature-and-el-ni-o-in-a-changing-climate-using-esa-cci-data","position":2},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data"},"content":"\n\n\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#lps-training-intermediate-level-analyzing-sea-surface-temperature-and-el-ni-o-in-a-changing-climate-using-esa-cci-data","position":3},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl2":"Introduction:"},"type":"lvl2","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#introduction","position":4},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl2":"Introduction:"},"content":"What drives changes in global weather patterns? Why do some years bring more droughts, floods, or extreme temperatures than others -- and how might this be changing in a warming world?\n\nThis notebook explores one of the most influential climate phenomena on Earth: El Ni√±o. Using open climate data from the ESA Climate Change Initiative (CCI), we will investigate how El Ni√±o manifests in the ocean, affects the land and atmosphere, and leaves its fingerprint across multiple Essential Climate Variables (ECVs). Further, we will try to see how it interacts with broader climate trends. As climate change progresses, scientists are increasingly asking: Is El Ni√±o itself changing?\n\nWe‚Äôll use real-world data to explore not only the signature of El Ni√±o across multiple Essential Climate Variables (ECVs), but also whether climate change is altering its frequency, intensity, or impacts.","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#introduction","position":5},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl3":"Questions We Aim to Explore","lvl2":"Introduction:"},"type":"lvl3","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#questions-we-aim-to-explore","position":6},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl3":"Questions We Aim to Explore","lvl2":"Introduction:"},"content":"What are the oceanic symptoms of El Ni√±o?\n\nCan we detect the warming of the Pacific Ocean using satellite-derived sea surface temperatures?\n\nHow does El Ni√±o affect sea level, cloud cover, and rainfall?\n\nDo we see changes in the ocean surface height or shifts in the cloud structure?\n\nWhat signals do we find over land?\n\nHow are soil moisture and land surface temperature impacted during El Ni√±o years?\n\nCan we confirm El Ni√±o‚Äôs footprint across multiple climate variables?\n\nDoes the timing and location of anomalies align across oceanic and terrestrial parameters?\n\nHow might climate change be influencing El Ni√±o?\n\nDo we see signs of increased extremes, shifting patterns, or enhanced regional impacts in recent decades?","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#questions-we-aim-to-explore","position":7},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl3":"What You‚Äôll Learn","lvl2":"Introduction:"},"type":"lvl3","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#what-youll-learn","position":8},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl3":"What You‚Äôll Learn","lvl2":"Introduction:"},"content":"By working through this notebook, you will:\n\nAccess and explore CCI datasets using the ESA Climate Toolbox\n\nCreate regional and temporal subsets of climate variables\n\nVisualize and analyze time series and spatial patterns\n\nCompare strong El Ni√±o events (e.g., 1997, 2015) with neutral or La Ni√±a years\n\nReflect on the potential influence of climate change on El Ni√±o behavior and impacts\n\nOptionally: explore uncertainties in cloud data and other advanced features\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#what-youll-learn","position":9},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl2":"What is El Ni√±o?"},"type":"lvl2","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#what-is-el-ni-o","position":10},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl2":"What is El Ni√±o?"},"content":"El Ni√±o is Spanish for ‚Äúthe Christ Child‚Äù and is named after the Christmas season when it typically occurs. During an El Ni√±o event, a mass of warm water is transported by wind circulation from the western to the eastern Pacific.\n\nThe cool, nutrient-rich water - normally present off the western coast of South America, containing large fish populations - is replaced by warm water from the west. This leads to a decline in fish stocks and heavy rainfall due to increased moisture, often resulting in floods. On the other hand, the Australian coast experiences a lack of humidity, causing draughts and wildfires. El Ni√±o is not just an oceanic phenomenon - it affects all spheres. Tracking El Ni√±o via satellite measurements enables us to take precautions and better prepare for its impacts on weather and environment.\n\nIn this Climate from Space story, you can see more information about the most recent El Ni√±o event in 2023 \n\n(Link).\n\nNow, let‚Äôs have a look at the data and how we can identify and analyse such El Ni√±o events ourselves, using the the CCI data portal with the esa_climate_toolbox.\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#what-is-el-ni-o","position":11},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl2":"Does climate change affect El Ni√±o?"},"type":"lvl2","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#does-climate-change-affect-el-ni-o","position":12},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl2":"Does climate change affect El Ni√±o?"},"content":"The effect of climate change and rising sea surface temperatures (SSTs) on El Ni√±o is still not fully understood. Some models suggest that the frequency of El Ni√±o events may not change significantly, but the events could become more intense in terms of weather extremes, such as rainfall and drought, depending on the region.\n\nHowever, predicting changes in atmospheric circulation driven by rising SSTs remains a major challenge for climate models. As a result, the influence of SST on El Ni√±o is associated with high uncertainty.\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#does-climate-change-affect-el-ni-o","position":13},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl2":"Step 1: Setup & Connect to ESA CCI"},"type":"lvl2","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#step-1-setup-connect-to-esa-cci","position":14},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl2":"Step 1: Setup & Connect to ESA CCI"},"content":"In this section, we import the required Python packages to work with ESA Climate Change Initiative (CCI) data. Most notably, we use the \n\nESA Climate Toolbox which simplifies access, manipulation, and visualization of CCI datasets in Python.\n\nThese packages allow us to:\n\nAccess satellite-based climate data records from ESA.\n\nHandle geospatial and temporal dimensions efficiently.\n\nVisualize data with intuitive plotting tools.\n\nüìö For a broader introduction to the toolbox and how to install it, visit:üîó \n\nESA CCI Climate Toolbox Quick Startüîó \n\nESA Climate Data Toolbox Website\n\n# ESA Climate Toolbox imports for accessing and plotting ESA CCI data\nfrom esa_climate_toolbox.core import get_op              # Get predefined operations (e.g., time series, averages)\nfrom esa_climate_toolbox.core import list_ecv_datasets   # List available datasets per ECV (Essential Climate Variable)\nfrom esa_climate_toolbox.core import get_store           # Connect to an ESA data store\nfrom esa_climate_toolbox.core import list_datasets       # List all datasets in a store\nfrom esa_climate_toolbox.ops import plot                 # High-level plotting functions for CCI data\n\n# Used for connecting to remote data sources (e.g., ESA CCI ODP)\nfrom xcube.core.store import new_data_store\n\n# For displaying geographic regions interactively (if desired)\nfrom IPython.display import GeoJSON\nimport shapely.geometry   # Handling geometric objects like bounding boxes\n\n# Core data science libraries\nimport pandas as pd       # For tabular data handling and time manipulation\nimport numpy as np        # For numerical operations\nimport xarray as xr       # For multi-dimensional climate data structures\n\n# Mapping and plotting\nimport matplotlib.pyplot as plt       # Plotting library\nimport cartopy.crs as ccrs            # Cartographic projections for spatial data\n\n# Notebook settings\nimport warnings\nwarnings.filterwarnings(\"ignore\") # Suppressing warnings to keep notebook output clean\n%matplotlib inline\n\nThe ESA Climate Toolbox provides direct access to the ESA Climate Data Store, which hosts harmonized satellite-based climate data records produced under the ESA Climate Change Initiative (CCI).\n\nIn this step, we establish a connection to the data store so we can browse and open datasets. This connection allows us to access data without having to download files manually ‚Äî a convenient way to explore and analyze large geospatial datasets in cloud-friendly formats such as Zarr or Kerchunk.\n\nThe data store includes a wide range of essential climate variables (ECVs), such as aerosols, land surface temperature, sea level, and soil moisture.\n\nüìò Learn more about available datasets:üîó \n\nESA Climate Data Toolbox ‚Äì Quick Start Guide\n\nFirst, we explore how to access sea surface temperature (SST) data from the ESA Climate Change Initiative (CCI) data store. This includes identifying datasets of interest, understanding their metadata, and preparing for subsequent analysis.\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#step-1-setup-connect-to-esa-cci","position":15},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl2":"Step 2: Explore the SST Dataset"},"type":"lvl2","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#step-2-explore-the-sst-dataset","position":16},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl2":"Step 2: Explore the SST Dataset"},"content":"Identify SST datasets based on spatial and temporal requirements. The list_ecv_datasets command returns the names of datasets for a given ECV.\n\nlist_ecv_datasets(\"SST\")\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#step-2-explore-the-sst-dataset","position":17},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl3":"Background: zarr & kerchunk & NetCDF format","lvl2":"Step 2: Explore the SST Dataset"},"type":"lvl3","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#background-zarr-kerchunk-netcdf-format","position":18},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl3":"Background: zarr & kerchunk & NetCDF format","lvl2":"Step 2: Explore the SST Dataset"},"content":"For the SST data it might be a good idea to use the zarr or kerchunk format, as data loading will be much faster.\nSeveral CCI data records are available in these formats as they have some advantages.\nZarr is ideal for new datasets that will be frequently accessed, updated, or analyzed and it is suitable for large-scale distributed processing in cloud-native workflows.\nKerchunk is best for efficiently accessing legacy data formats (e.g., NetCDF, GRIB) stored in object stores without converting them and useful when data duplication must be avoided.\nNetCDF, while widely used and highly compatible with scientific tools, is less optimized for cloud-native workflows and accessing large datasets efficiently, making it better suited for smaller-scale, traditional file-based analysis.\n\nFeature\n\nZarr\n\nKerchunk\n\nNetCDF\n\nStorage Format\n\nSelf-contained, new format\n\nWrapper for existing formats\n\nTraditional file-based format\n\nCloud-Native\n\nYes\n\nYes\n\nNo\n\nEfficiency\n\nGood for accessing subsets\n\nGreat for legacy data in object stores\n\nEfficient for small to medium files\n\nCompression\n\nSupports multiple algorithms\n\nDepends on underlying format\n\nLimited to format-specific methods\n\nMetadata Handling\n\nEmbedded metadata\n\nExternal JSON index\n\nEmbedded in file\n\nRead/Write Access\n\nSupports both\n\nRead-only\n\nRead and write\n\nSetup Overhead\n\nNone, works out of the box\n\nRequires pre-generated JSON indices\n\nNone, but slower for large datasets\n\nStorage Duplication\n\nRequires duplicating data\n\nMinimal, uses existing files\n\nMinimal, as data is stored in single files\n\nPerformance\n\nOptimized for chunk-based access\n\nSlight overhead for index lookup\n\nCan be slow for very large files\n\nSelective loading\n\nNot supported, entire dataset must be loaded\n\nNot supported, entire dataset must be loaded\n\nAllows selecting variables and time ranges before loading\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#background-zarr-kerchunk-netcdf-format","position":19},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl2":"Step 3: Load & Visualize Global SST"},"type":"lvl2","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#step-3-load-visualize-global-sst","position":20},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl2":"Step 3: Load & Visualize Global SST"},"content":"","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#step-3-load-visualize-global-sst","position":21},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl3":"Define the Dataset ID","lvl2":"Step 3: Load & Visualize Global SST"},"type":"lvl3","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#define-the-dataset-id","position":22},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl3":"Define the Dataset ID","lvl2":"Step 3: Load & Visualize Global SST"},"content":"To work with a specific ESA CCI dataset, we need to specify its dataset ID. This unique identifier tells the toolbox which variable and product we want to access.\n\nIn this section, we are using a the sea surface temperature (SST) zarr file. You can find the variables of the products under data_vars. For the SST, we will use the variable analysed_sst.\n\nFirst, we define the dataset ID and the store from which we retrieve the data (for the SST it is esa-cci-zarr). With the command describe_data, we can have a look at the structure of the file, such as time, dimension and the variable stored within.\n\ndata_id = 'ESACCI-L4_GHRSST-SST-GMPE-GLOB_CDR2.0-1981-2016-v02.0-fv01.0.zarr' \ncci_zarr_store = new_data_store(\"esa-cci-zarr\")\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#define-the-dataset-id","position":23},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl3":"Describe Dataset (Check Available Variables and Metadata)","lvl2":"Step 3: Load & Visualize Global SST"},"type":"lvl3","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#describe-dataset-check-available-variables-and-metadata","position":24},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl3":"Describe Dataset (Check Available Variables and Metadata)","lvl2":"Step 3: Load & Visualize Global SST"},"content":"Before loading the full dataset, it‚Äôs helpful to inspect the metadata to understand its structure. This includes:\n\nAvailable variables (e.g., SST, uncertainty estimates)\n\nTemporal and spatial coverage\n\nData format and structure\n\nThis step ensures we know what the dataset contains and how to work with it. It also helps confirm that the variable we want to plot or analyze is actually included.\n\nüõ†Ô∏è Tip: You can use the description to verify variable names, dimensions (e.g., lat, lon, time), and time coverage.\n\nüìò More on dataset structure:üîó \n\nESA Climate Toolbox ‚Äì Data Access\n\ncci_zarr_store.describe_data(data_id)\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#describe-dataset-check-available-variables-and-metadata","position":25},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl3":"Open the Dataset","lvl2":"Step 3: Load & Visualize Global SST"},"type":"lvl3","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#open-the-dataset","position":26},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl3":"Open the Dataset","lvl2":"Step 3: Load & Visualize Global SST"},"content":"Now we open the dataset using the zarr. When using the zarr format, the whole dataset is loaded. We will later use the cci-store where we can define the variables and time range we are interested in. For now, let‚Äôs load the entire dataset:\n\nsst_ds = cci_zarr_store.open_data(\n    data_id=data_id)\ndisplay(sst_ds)\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#open-the-dataset","position":27},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl3":"Visualize Results","lvl2":"Step 3: Load & Visualize Global SST"},"type":"lvl3","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#visualize-results","position":28},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl3":"Visualize Results","lvl2":"Step 3: Load & Visualize Global SST"},"content":"We now create a simple map plot of the selected variable.This allows us to explore the spatial patterns of the SST. Here, we define two dates and plot them next to each other to compare the El Nino in December 1997 with the SST one year later in December 1998.\n\nFor more interactive and advanced visualizations, check out the \n\nESA Climate Toolbox or the \n\nToolbox documentation.\n\n# Defining the time steps to plot\ntimesteps = ['1997-12-01', '1998-12-01']\n\n# Starting the plot\nfig, axes = plt.subplots(\n    nrows=1, ncols=2, figsize=(14, 5),\n    subplot_kw={'projection': ccrs.PlateCarree()}\n)\n\n# Looping over the time steps defined above\nfor i, timestep in enumerate(timesteps):\n    ax = axes[i]\n    sst = sst_ds[\"analysed_sst\"].sel(time=timestep, method='nearest').squeeze().load()\n    lat = sst_ds[\"lat\"].values\n    lon = sst_ds[\"lon\"].values\n\n    mesh = ax.pcolormesh(\n        lon, lat, sst,\n        transform=ccrs.PlateCarree(),\n        cmap=\"coolwarm\", vmin=273, vmax=310\n    )\n    \n    ax.coastlines()\n    ax.set_title(f\"SST ‚Äì {timestep}\",fontsize=14, pad=20, weight='bold')\n\n\n# Manually adding a colorbar below the plots\ncbar_ax = fig.add_axes([0.25, 0.1, 0.5, 0.03])  \ncbar = fig.colorbar(mesh, cax=cbar_ax, orientation='horizontal')\ncbar.set_label(\"Sea Surface Temperature (K)\")\n\n# Saving the figure - make sure these commands are written before using plt.show()\n# Please note that exporting the figure as pdf might take a while as it is exported as vector graphic\n\n# To export the figure as pdf, uncomment the next line: \n#plt.savefig('Global_SST_Dec1997_vs_Dec1998.pdf',bbox_inches='tight') # bbox_inches='tight' ensures no white space around the plot\n\n# To export the figure as png, uncomment the next line:\n#plt.savefig('Global_SST_Dec1997_vs_Dec1998.png') \n\nplt.show()\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#visualize-results","position":29},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl3":"What Do We See?","lvl2":"Step 3: Load & Visualize Global SST"},"type":"lvl3","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#what-do-we-see","position":30},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl3":"What Do We See?","lvl2":"Step 3: Load & Visualize Global SST"},"content":"The two maps show global Sea Surface Temperature (SST) in December 1997 (left) and December 1998 (right).These years mark a transition from a strong El Ni√±o event to a La Ni√±a phase.\n\nFocus on the equatorial Pacific region ‚Äî especially along the west coast of South America.\n\nIn December 1997, SSTs are significantly warmer than usual across the central and eastern Pacific. This warm band is a classic signature of El Ni√±o.\n\nIn December 1998, we see the opposite: cooler waters dominate the same region, indicating the onset of La Ni√±a.\n\nThese opposing ocean states have far-reaching effects on global weather, ecosystems, and even economies.This visual comparison helps us recognize how large-scale climate anomalies manifest in satellite observations.\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#what-do-we-see","position":31},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl3":"Calculate an plot the global mean of SST","lvl2":"Step 3: Load & Visualize Global SST"},"type":"lvl3","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#calculate-an-plot-the-global-mean-of-sst","position":32},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl3":"Calculate an plot the global mean of SST","lvl2":"Step 3: Load & Visualize Global SST"},"content":"To undertand how the SST has been changing during the last decades, we can calculate the mean across all latitudes and longitudes and plot a time series of the mean SST.\n\n# Define the time series mean operation\n# This calculates the mean SST over the selected region for each time step\nts_mean_op = get_op('tseries_mean')\n\n# Apply the operation to the subset dataset\nsst_global_mean = ts_mean_op(\n    ds=sst_ds,\n    var='analysed_sst'    \n).compute()\n\n# Show the result\ndisplay(sst_global_mean)\n\nWe can also calculate the yearly mean of the global SST, so we can observe the overall trend in temperature.\n\nsst_yearly_mean = sst_global_mean.resample(time='1YE').mean()\n\n# Plotting the global mean SST\nfig = plt.figure(figsize=(12,3))\n# Daily mean SST\nsst_global_mean.analysed_sst_mean.plot(c='k',linewidth=1,label='daily')\n# Yearly mean SST\nsst_yearly_mean.analysed_sst_mean.plot(c='crimson',linewidth=1,label='yearly')\n# Add the legend\nplt.legend()\n# Add a grid \nplt.grid(True, which='both',linestyle='--')\n# Add a title and axis labels\nplt.title('Global Mean SST',fontsize=14, pad=20, weight='bold')\nplt.ylabel('Mean SST (K)')\nplt.xlabel('Year')\n\n# Saving the figure - make sure these commands are written before using plt.show()\n\n# To export the figure as pdf, uncomment the next line: \n#plt.savefig('Global_Mean_SST.pdf',bbox_inches='tight') # bbox_inches='tight' ensures no white space around the plot\n\n# To export the figure as png, uncomment the next line:\n#plt.savefig('Global_Mean_SST.png') \n\nplt.show()\n\nWe can see that the yearly mean temperature has been rising during the past years. The daily mean SST shows that the minima and maxima are increasing over time.\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#calculate-an-plot-the-global-mean-of-sst","position":33},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl2":"Step 4: Zooming In ‚Äì Investigating El Ni√±o in the Eastern Pacific"},"type":"lvl2","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#step-4-zooming-in-investigating-el-ni-o-in-the-eastern-pacific","position":34},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl2":"Step 4: Zooming In ‚Äì Investigating El Ni√±o in the Eastern Pacific"},"content":"In the previous step, we observed the global Sea Surface Temperature patterns for an El Ni√±o year and a non-El Ni√±o year.\n\nTo better understand the dynamics of this climate phenomenon, we now define a region of interest that captures the core area of warming during El Ni√±o events.\n\nWe will focus on the eastern equatorial Pacific, specifically the region between the Gal√°pagos Islands and the coast of Ecuador.\nThis smaller area reduces the data load and allows us to analyze temporal trends more efficiently in later steps.\n\n# Set bounding box the eastern Pacific and the rainforest\nbbox = (-92.0, -2.0, -80.0, 1.0)  \n# Display bounding box for reference\nGeoJSON(shapely.geometry.box(*bbox).__geo_interface__)\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#step-4-zooming-in-investigating-el-ni-o-in-the-eastern-pacific","position":35},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl3":"Create a spacial subset of the SST:","lvl2":"Step 4: Zooming In ‚Äì Investigating El Ni√±o in the Eastern Pacific"},"type":"lvl3","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#create-a-spacial-subset-of-the-sst","position":36},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl3":"Create a spacial subset of the SST:","lvl2":"Step 4: Zooming In ‚Äì Investigating El Ni√±o in the Eastern Pacific"},"content":"To focus our analysis on the eastern Pacific region most affected by El Ni√±o, we now extract a spatial subset from the global SST dataset.\nUsing the bounding box we defined earlier, the function subset_spatial filters the dataset to include only the relevant area.\nThis helps reduce data volume and enables more targeted visualizations and calculations in the following steps.\n\nsubset_spatial_op = get_op('subset_spatial')\nsst_sub = subset_spatial_op(ds=sst_ds, region=bbox)\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#create-a-spacial-subset-of-the-sst","position":37},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl3":"Calculate the mean SST of the subset region","lvl2":"Step 4: Zooming In ‚Äì Investigating El Ni√±o in the Eastern Pacific"},"type":"lvl3","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#calculate-the-mean-sst-of-the-subset-region","position":38},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl3":"Calculate the mean SST of the subset region","lvl2":"Step 4: Zooming In ‚Äì Investigating El Ni√±o in the Eastern Pacific"},"content":"To better understand how sea surface temperature varies over time in our selected region, we now calculate the regional mean SST time series.\nWe use the tseries_mean operation from the ESA Climate Toolbox to compute the average SST across all grid points within the selected area for each timestep. This creates a simplified view of how SST changed over time in this key region affected by El Ni√±o.\nThese pre-defined operations are useful for quick analysis without needing to write complex code.\n\nThe available operations can be listed as follows:\n\nfrom esa_climate_toolbox.core import list_operations\n\nlist_operations()\n\nWe now define the tseries_mean operation and apply it to the dataset. This operation computes the average value of the variable across the defined spatial subset for each timestep, resulting in a time series that reflects how the regional mean SST evolves over time.\n\nThis is particularly helpful for detecting gradual changes or events like El Ni√±o, which manifest as sustained temperature anomalies over months.\n\n# Define the time series mean operation\n# This calculates the mean SST over the selected region for each time step\nts_mean_op = get_op('tseries_mean')\n\n# Apply the operation to the subset dataset\nsst_mean = ts_mean_op(\n    ds=sst_sub,\n    var='analysed_sst'    \n).compute()\n\n# Show the result\ndisplay(sst_mean)\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#calculate-the-mean-sst-of-the-subset-region","position":39},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl3":"Plot the mean SST as time series","lvl2":"Step 4: Zooming In ‚Äì Investigating El Ni√±o in the Eastern Pacific"},"type":"lvl3","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#plot-the-mean-sst-as-time-series","position":40},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl3":"Plot the mean SST as time series","lvl2":"Step 4: Zooming In ‚Äì Investigating El Ni√±o in the Eastern Pacific"},"content":"We now visualize the temporal evolution of the average global Sea Surface Temperature (SST) and the mean of our sub-region of interest in the eastern tropical Pacific.\nThis helps us to identify warming events, such as El Ni√±o, which are typically marked by elevated SST values in this region.\nWe mark the El Ni√±o periods with grey area so we can compare its effect on the SST.\n\n# Define El Ni√±o winters\nelnino_periods = [\n    (1982, 9, 1983, 3),\n    (1986, 9, 1987, 3),\n    (1991, 9, 1992, 3),\n    (1997, 9, 1998, 3),\n    (2002, 9, 2003, 3),\n    (2009, 9, 2010, 3),\n    (2015, 9, 2016, 3),\n]\n\n\n# Plot\nfig = plt.figure(figsize=(12, 6))\n# add subplot \nax = fig.add_subplot(2,1,1)\n\n# Plot the SST mean\nsst_global_mean.analysed_sst_mean.plot(ax=ax,c='red',linewidth=1)\n\n# Add grey shading for El Ni√±o winters\nfor start_y, start_m, end_y, end_m in elnino_periods:\n    start_date = pd.Timestamp(start_y, start_m, 1)\n    end_date = pd.Timestamp(end_y, end_m, 1) + pd.offsets.MonthEnd(0)\n    ax.axvspan(start_date, end_date, color='lightgrey', alpha=0.5)\n\n# Final touches\nplt.grid(True, which='both', linestyle='--')\nplt.title('Global mean SST',fontsize=14, pad=20, weight='bold')\nplt.ylabel('Mean SST (K)')\nplt.xlabel('Year')\nplt.tight_layout()\n\nax2 = fig.add_subplot(2,1,2)\n\n# Plot the SST mean\nsst_mean.analysed_sst_mean.plot(ax=ax2, c='royalblue', linewidth=1)\n\n# Add grey shading for El Ni√±o winters\nfor start_y, start_m, end_y, end_m in elnino_periods:\n    start_date = pd.Timestamp(start_y, start_m, 1)\n    end_date = pd.Timestamp(end_y, end_m, 1) + pd.offsets.MonthEnd(0)\n    ax2.axvspan(start_date, end_date, color='lightgrey', alpha=0.5)\n\n# Final touches\nplt.grid(True, which='both', linestyle='--')\nplt.title('Mean SST of Subset Region',fontsize=14, pad=20, weight='bold')\nplt.ylabel('Mean SST (K)')\nplt.xlabel('Year')\nplt.tight_layout()\n\n# Saving the figure - make sure these commands are written before using plt.show()\n\n# To export the figure as pdf, uncomment the next line: \n#plt.savefig('Global_and_Subset_Mean_SST.pdf',bbox_inches='tight') # bbox_inches='tight' ensures no white space around the plot\n\n# To export the figure as png, uncomment the next line:\n#plt.savefig('Global_and_Subset_Mean_SST.png') \n\nplt.show()\n\nThe plot shows a clear peak in SST during the winter of 1997/1998, corresponding to one of the strongest El Ni√±o events on record.\nNote how temperatures rise rapidly in late 1997 and drops again in 1998 ‚Äî a typical temporal signature of El Ni√±o.\nThese events are associated with major shifts in ocean-atmosphere circulation and can influence weather patterns globally.\nIn the global mean SST we also see higher temperatures during El Ni√±o winters compared to the other periodic winter minima.\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#plot-the-mean-sst-as-time-series","position":41},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl2":"Step 5: Which other ocean parameters are affected by El Ni√±o?"},"type":"lvl2","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#step-5-which-other-ocean-parameters-are-affected-by-el-ni-o","position":42},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl2":"Step 5: Which other ocean parameters are affected by El Ni√±o?"},"content":"We‚Äôve seen that sea surface temperatures (SST) increased significantly in the eastern Pacific during the 1997/1998 El Ni√±o event. But SST is just one symptom.El Ni√±o also alters sea level, currents, and ocean heat distribution.\n\nIn this section, we‚Äôll look at Sea Level Anomalies (SLA) to answer:\n\nDoes the rise in SST also lead to a rise in sea level in the same region?\n\nWe‚Äôll follow a similar process as before ‚Äî listing available datasets, selecting a variable, and analyzing its changes during the El Ni√±o event.\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#step-5-which-other-ocean-parameters-are-affected-by-el-ni-o","position":43},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl3":"How does El Ni√±o affect sea level?","lvl2":"Step 5: Which other ocean parameters are affected by El Ni√±o?"},"type":"lvl3","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#how-does-el-ni-o-affect-sea-level","position":44},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl3":"How does El Ni√±o affect sea level?","lvl2":"Step 5: Which other ocean parameters are affected by El Ni√±o?"},"content":"El Ni√±o not only warms the surface ocean ‚Äî it also redistributes heat and water across the Pacific. This can lead to measurable changes in sea level.By analyzing Sea Level Anomaly (SLA) data, we can investigate whether the eastern Pacific experienced a rise in sea level during the 1997/1998 El Ni√±o event.\n\nWe begin by listing the available sea level datasets:list_ecv_datasets(\"SEALEVEL\")\n\ncci_store = new_data_store(\"esa-cci\")\ndata_id = 'esacci.SEALEVEL.mon.L4.MSLA.multi-sensor.multi-platform.MERGED.2-0.r1'\ncci_store.describe_data(data_id)\n\nAs we now use the esa-cci store, we can define the variable we wish to load. Here, we choose the sea level anomaly (sla):\n\nvariables = ['sla'] # we choose the sea level anomaly (sla)\nsla_ds = cci_store.open_data(\n    data_id=data_id,\n    variable_names=variables,\n)\n\nLet‚Äôs visualize the sea level anomaly during the peak of El Ni√±o and compare it to the conditions one year later. This helps us observe how sea levels respond to and recover from such events.\n\n# Define the two time steps we want to compare (El Ni√±o year and the year after)\ntimesteps = ['1997-12-01', '1998-12-01']\n\n# Create a figure with two subplots, using a PlateCarree map projection\nfig, axes = plt.subplots(\n    nrows=1, ncols=2, figsize=(14, 5),\n    subplot_kw={'projection': ccrs.PlateCarree()}\n)\n\n# Loop through the two selected time steps and plot each one\nfor i, timestep in enumerate(timesteps):\n    ax = axes[i]\n    \n    # Select and load the data closest to the chosen date\n    sla = sla_ds[\"sla\"].sel(time=timestep, method='nearest').squeeze().load()\n    \n    # Extract latitude and longitude\n    lat = sla_ds[\"lat\"].values\n    lon = sla_ds[\"lon\"].values\n\n    # Create the filled contour plot (color map of SLA)\n    mesh = ax.pcolormesh(\n        lon, lat, sla,\n        transform=ccrs.PlateCarree(),\n        cmap=\"coolwarm\", vmin=-0.2, vmax=0.2\n    )\n    \n    # Add coastlines and a title\n    ax.coastlines()\n    time_str = sla_ds['time'].sel(time=timestep, method='nearest').dt.strftime('%Y-%m-%d').item()\n    ax.set_title('Sea Level Anomaly - ' + time_str,fontsize=14, pad=20, weight='bold')\n\n# Add a single horizontal colorbar below the plots\ncbar_ax = fig.add_axes([0.25, 0.1, 0.5, 0.03])  \ncbar = fig.colorbar(mesh, cax=cbar_ax, orientation='horizontal')\ncbar.set_label(\"Sea Level Anomaly (m)\")\n\n\n# Saving the figure - make sure these commands are written before using plt.show()\n# Please note that exporting the figure as pdf might take a while as it is exported as vector graphic\n\n# To export the figure as pdf, uncomment the next line: \n#plt.savefig('Global_SLA_Nov1997_vs_Nov1998.pdf',bbox_inches='tight') # bbox_inches='tight' ensures no white space around the plot\n\n# To export the figure as png, uncomment the next line:\n#plt.savefig('Global_SLA_Nov1997_vs_Nov1998.png') \n\n\n# Display the plot\nplt.show()\n\nThe resulting plot shows Sea Level Anomalies (SLA) for two specific dates:\n\nDecember 1997 ‚Äî during a strong El Ni√±o event\n\nDecember 1998 ‚Äî about a year later, during neutral or La Ni√±a conditions","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#how-does-el-ni-o-affect-sea-level","position":45},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl3":"What you see in the plot:","lvl2":"Step 5: Which other ocean parameters are affected by El Ni√±o?"},"type":"lvl3","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#what-you-see-in-the-plot","position":46},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl3":"What you see in the plot:","lvl2":"Step 5: Which other ocean parameters are affected by El Ni√±o?"},"content":"Colors represent deviations from the average sea level (climatology):\n\nRed areas: higher-than-average sea levels (positive anomaly)\n\nBlue areas: lower-than-average sea levels (negative anomaly)","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#what-you-see-in-the-plot","position":47},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl3":"Interpretation:","lvl2":"Step 5: Which other ocean parameters are affected by El Ni√±o?"},"type":"lvl3","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#interpretation","position":48},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl3":"Interpretation:","lvl2":"Step 5: Which other ocean parameters are affected by El Ni√±o?"},"content":"In December 1997, the eastern equatorial Pacific (off the coast of Ecuador and Peru) typically shows strong positive SLA, a hallmark of El Ni√±o. This reflects warmer waters piling up, causing the sea level to rise.\n\nIn December 1998, that region likely shows lower or negative SLA, consistent with cooling waters during a La Ni√±a or post-El Ni√±o period.","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#interpretation","position":49},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl3":"Why this matters:","lvl2":"Step 5: Which other ocean parameters are affected by El Ni√±o?"},"type":"lvl3","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#why-this-matters","position":50},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl3":"Why this matters:","lvl2":"Step 5: Which other ocean parameters are affected by El Ni√±o?"},"content":"These changes are not just visual ‚Äî they represent major shifts in ocean heat content, currents, and even global weather patterns.\n\nSLA is a valuable indicator of ocean-atmosphere coupling, especially in tracking El Ni√±o‚ÄìSouthern Oscillation (ENSO) events.\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#why-this-matters","position":51},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl2":"Choose Your Investigation"},"type":"lvl2","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#choose-your-investigation","position":52},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl2":"Choose Your Investigation"},"content":"El Ni√±o doesn‚Äôt just warm the ocean ‚Äî it also disrupts weather patterns, shifts rainfall, and influences ecosystems on land.\nIn this section, you choose what to explore next:\n\nHow does El Ni√±o affect cloud cover?\n\nIs there a signal in land surface temperature?\n\nWhat changes do we observe in vegetation or soil moisture?\n\nIn this section, users can choose an Essential Climate Variable (ECV) they want to investigate. Uncomment the corresponding code snippet to load a specific dataset and then run the shared analysis steps (plotting, subsetting, averaging).\n\nFor each ECV, we also provide a guiding question or task to explore. Where possible, there‚Äôs an additional advanced part for more experienced users.\n\nüëâ Pick a topic that interests you and follow the steps ‚Äî or try several to compare results.\n\nOnce your variable is selected and dataset loaded, continue with the following steps:\n\nPlot a global map for El Ni√±o and non-El Ni√±o years\n\nApply a spatial subset (region of interest)\n\nCalculate the temporal mean within this region\n\nVisualize as a time series or seasonal comparison\n\nüí° Tip: Advanced users can explore uncertainty variables (e.g., cloud uncertainty) or apply temporal filtering.\n\n\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#choose-your-investigation","position":53},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl3":"Option 1: Cloud Fraction","lvl2":"Choose Your Investigation"},"type":"lvl3","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#option-1-cloud-fraction","position":54},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl3":"Option 1: Cloud Fraction","lvl2":"Choose Your Investigation"},"content":"Guiding question: Do cloud patterns change during El Ni√±o events?Beginner task: Compare mean cloud fraction during December 1997 (El Ni√±o) and 1998 (neutral).Advanced task: Explore cloud uncertainty during El Ni√±o and discuss where it is largest.\n\nThe following cell is defining the data_id for the cloud dataset and the variable cloud fraction. We also define parameters for the map plot, such as the limits for the colorbar, its label, and the figure title.\n\n#data_id = 'ESACCI-L3C_CLOUD-CLD_PRODUCTS-AVHRR_NOAA-1982-2016-fv3.0.zarr' \n#variable = ['cfc']\n#colorbarlabel = \"Cloud fraction (0 - 1)\"\n#ecvmin = 0\n#ecvmax = 1\n#ecvtitle = \"Cloud Fraction\"\n#ecvcmap = 'Blues_r'\n\n#cci_zarr_store = new_data_store(\"esa-cci-zarr\")\n\n#ecv_ds = cci_zarr_store.open_data(\n#    data_id=data_id,\n#)\n\n#cci_zarr_store.describe_data(data_id)\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#option-1-cloud-fraction","position":55},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl3":"Option 2: Ocean Colour","lvl2":"Choose Your Investigation"},"type":"lvl3","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#option-2-ocean-colour","position":56},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl3":"Option 2: Ocean Colour","lvl2":"Choose Your Investigation"},"content":"Guiding question: Does ocean productivity respond to El Ni√±o?Beginner task: Visualize chlorophyll concentrations in the eastern Pacific in 1997 vs 1998.Advanced task: Explore upwelling changes and their impact on biological activity.\n\nThe following cell is defining the data_id for the ocean color dataset and the variable chlorophyll a, an indicator for phytoplankton activity:\n\ndata_id = 'ESACCI-OC-L3S-OC_PRODUCTS-MERGED-1M_MONTHLY_4km_GEO_PML_OCx_QAA-1997-2022-fv6.0.zarr'\nvariable = ['chlor_a']\ncolorbarlabel = \"log10(Chlorophyll-a) [log10(mg/m¬≥)]\"\necvmin = -2\necvmax = 1\necvtitle = \"Chlorophyll-a Concentration\"\necvcmap = 'viridis'\n\ncci_zarr_store = new_data_store(\"esa-cci-zarr\")\n\necv_ds = cci_zarr_store.open_data(\n    data_id=data_id,\n)\n\ncci_zarr_store.describe_data(data_id)\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#option-2-ocean-colour","position":57},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl3":"Option 3: Soil Moisture","lvl2":"Choose Your Investigation"},"type":"lvl3","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#option-3-soil-moisture","position":58},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl3":"Option 3: Soil Moisture","lvl2":"Choose Your Investigation"},"content":"Guiding question: How does soil moisture change during El Ni√±o?Beginner task: Compare soil moisture in southern Africa during 1997 vs 1998.Advanced task: Evaluate interannual variability or extreme dry/wet anomalies.\n\n#data_id = 'ESACCI-SOILMOISTURE-L3S-SSMV-COMBINED-1978-2021-fv07.1.zarr'\n#variable = ['sm']  \n#colorbarlabel = \"Soil Moisture (m¬≥/m¬≥)\"\n#ecvmin = 0\n#ecvmax = 0.6\n#ecvtitle = \"Soil Moisture\"\n#ecvcmap = 'BrBG'\n\n#cci_zarr_store = new_data_store(\"esa-cci-zarr\")\n\n#ecv_ds = cci_zarr_store.open_data(\n#    data_id=data_id,\n#)\n\n#cci_zarr_store.describe_data(data_id)\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#option-3-soil-moisture","position":59},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl3":"Option 4: Land Surface Temperature (LST)","lvl2":"Choose Your Investigation"},"type":"lvl3","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#option-4-land-surface-temperature-lst","position":60},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl3":"Option 4: Land Surface Temperature (LST)","lvl2":"Choose Your Investigation"},"content":"Guiding question: How does El Ni√±o affect land temperatures?Beginner task: Observe temperature anomalies in Australia during December 1997 and 1998.Advanced task: Compare LST changes between continents (Australia vs South America).\n\n#data_id = 'esacci.LST.yr.L3C.LST.multi-sensor.multi-platform.SSMI_SSMIS.v2-33.ASC'\n#variable = ['lst'] \n#colorbarlabel = \"LST (K)\"\n#ecvmin = 230\n#ecvmax = 320\n#ecvtitle = \"Land Surface Temperature\"\n#ecvcmap = 'inferno'\n#cci_store = new_data_store(\"esa-cci\")\n#ecv_ds = cci_store.open_data(\n#    data_id=data_id,\n#)\n\n#cci_store.describe_data(data_id)\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#option-4-land-surface-temperature-lst","position":61},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl3":"Visualize Global ECV Patterns","lvl2":"Choose Your Investigation"},"type":"lvl3","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#visualize-global-ecv-patterns","position":62},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl3":"Visualize Global ECV Patterns","lvl2":"Choose Your Investigation"},"content":"In this section, we visualize the selected Essential Climate Variable (ECV) on a global map for two key time points ‚Äî typically during an El Ni√±o event and a year afterward. This helps us identify how the variable responds to large-scale climate anomalies like El Ni√±o.\n\nThe selected dates can be adjusted as needed, depending on your area of interest and the dataset‚Äôs time coverage. (Tip: Use cci_zarr_store.describe_data() to check available dates in the dataset.)\n\nThis visual comparison is a powerful tool to explore spatial patterns, spot regional anomalies, and begin forming hypotheses about climate impacts.\n\n# Defining the time steps to plot\ntimesteps = ['1997-12-01', '1998-12-01']\n\n# Starting the plot\nfig, axes = plt.subplots(\n    nrows=1, ncols=2, figsize=(14, 5),\n    subplot_kw={'projection': ccrs.PlateCarree()}\n)\n\n# Looping over the time steps defined above\n# Note that for the chlorophyll data, we want to plot the log, thus we include an if loop checking which variable has been chosen\nfor i, timestep in enumerate(timesteps):\n    ax = axes[i]\n    if variable[0] == 'chlor_a':\n        ecv = np.log10(ecv_ds[variable[0]].sel(time=timestep, method='nearest').squeeze().load())\n    else:\n        ecv = ecv_ds[variable[0]].sel(time=timestep, method='nearest').squeeze().load()\n    lat = ecv_ds[\"lat\"].values\n    lon = ecv_ds[\"lon\"].values\n\n    mesh = ax.pcolormesh(\n        lon, lat, ecv,\n        transform=ccrs.PlateCarree(),\n        cmap=ecvcmap, vmin=ecvmin, vmax=ecvmax\n    )\n    \n    ax.coastlines()\n    # get timestep for title\n    t = ecv_ds['time'].sel(time=timestep, method='nearest')\n    time_str = t.dt.strftime('%Y-%m-%d').item()\n    ax.set_title(ecvtitle + ' - ' + time_str,fontsize=14, pad=20, weight='bold')\n\n# Manually adding a colorbar below the plots\ncbar_ax = fig.add_axes([0.25, 0.1, 0.5, 0.03])  \ncbar = fig.colorbar(mesh, cax=cbar_ax, orientation='horizontal')\ncbar.set_label(colorbarlabel)\n\n# Saving the figure - make sure these commands are written before using plt.show()\n# Please note that exporting the figure as pdf might take a while as it is exported as vector graphic\n\n# To export the figure as pdf, uncomment the next line: \n#plt.savefig('Global_ECV_1997_vs_1998.pdf',bbox_inches='tight') # bbox_inches='tight' ensures no white space around the plot\n\n# To export the figure as png, uncomment the next line:\n#plt.savefig('Global_ECV_1997_vs_1998.png') \n\n\nplt.show()\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#visualize-global-ecv-patterns","position":63},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl3":"What do we expect to see?","lvl2":"Choose Your Investigation"},"type":"lvl3","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#what-do-we-expect-to-see","position":64},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl3":"What do we expect to see?","lvl2":"Choose Your Investigation"},"content":"Depending on the selected variable, we might observe:\n\nCloud Fraction: Increased or decreased cloudiness in the tropics, possibly linked to shifting convection zones.\n\nLand Surface Temperature: Warmer or cooler land surfaces, particularly in regions affected by altered precipitation and wind patterns.\n\nOcean Colour (Chlorophyll-a): Changes in ocean productivity, especially in the Pacific where upwelling is disrupted.\n\nSoil Moisture: Wetter or drier conditions in regions like Australia, Africa, or South America due to rainfall variability.\n\nUse this map as a diagnostic tool to detect where major El Ni√±o signals appear in your chosen variable.\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#what-do-we-expect-to-see","position":65},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl3":"Regional Focus: Subset, Average & Time Series Plot","lvl2":"Choose Your Investigation"},"type":"lvl3","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#regional-focus-subset-average-time-series-plot","position":66},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl3":"Regional Focus: Subset, Average & Time Series Plot","lvl2":"Choose Your Investigation"},"content":"Now that we‚Äôve looked at the global distribution, let‚Äôs zoom in on a specific region. By applying a spatial subset (bounding box), we can explore local responses to the El Ni√±o event in more detail.\n\nThis step includes:\n\nCreating a Spatial Subset\nSelect a region of interest ‚Äî for example, the eastern Pacific for ocean data or the Amazon basin for vegetation or soil moisture. Use a bbox (bounding box) to isolate that area.\n\nCalculating the Mean\nWe compute the average of the selected variable over the region for each timestep to reduce the data to a one-dimensional time series.\n\nPlotting the Time Series\nThe resulting plot shows how the variable changes over time in your chosen region, helping identify unusual behavior during the El Ni√±o period.\n\nThis step is particularly useful to detect shifts in trends, seasonal anomalies, or extreme values tied to climate variability. Choose a region relevant to your selected ECV (e.g., ocean for SST or chlorophyll, land for soil moisture or vegetation).\n\n# lon_min, lat_min, lon_max, lat_max\nbbox_amazon = (-75.0, -2.0, -65.0, 1.0) # bbox covering parts of the Amazon\nbbox_ecu = (-92.0, -20.0, -80.0, 1.0)  # bbox covering Galapagos to Ecuador\n\nland_ecv = ['sm','lst']\nocean_ecv = ['chlor_a','cfc'] # optional: put cloud fraction to land_cfc\n\nif  variable[0] in land_ecv:\n    bbox = bbox_amazon\n    print(f\"Chosen parameter: {variable[0]} -> selected bbox: {bbox_amazon}\")\nelif variable[0] in ocean_ecv:\n    bbox = bbox_ecu\n    print(f\"Chosen parameter: {variable[0]} -> selected bbox: {bbox_ecu}\")\nelse:\n    print(f\"{variable[0]} is not listed in land_ecv or ocean_ecv.\")\n\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#regional-focus-subset-average-time-series-plot","position":67},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl4":"Create the spacial subset of the ECV","lvl3":"Regional Focus: Subset, Average & Time Series Plot","lvl2":"Choose Your Investigation"},"type":"lvl4","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#create-the-spacial-subset-of-the-ecv","position":68},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl4":"Create the spacial subset of the ECV","lvl3":"Regional Focus: Subset, Average & Time Series Plot","lvl2":"Choose Your Investigation"},"content":"\n\nsubset_spatial_op = get_op('subset_spatial')\n\necv_sub = subset_spatial_op(ds=ecv_ds, region=bbox)\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#create-the-spacial-subset-of-the-ecv","position":69},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl4":"Calculate the mean over the subset","lvl3":"Regional Focus: Subset, Average & Time Series Plot","lvl2":"Choose Your Investigation"},"type":"lvl4","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#calculate-the-mean-over-the-subset","position":70},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl4":"Calculate the mean over the subset","lvl3":"Regional Focus: Subset, Average & Time Series Plot","lvl2":"Choose Your Investigation"},"content":"\n\n# Apply time series mean operation to the spatial subset\n# This computes the mean value for each time step over the selected region\nts_mean_op = get_op('tseries_mean')\n\necv_sub_mean = ts_mean_op(\n    ds=ecv_sub,\n    var=variable[0]   \n).compute()\n\n# Get the name of the resulting variable (can vary depending on input)\nmean_var_name = list(ecv_sub_mean.data_vars)[0] \n\n\n# Define El Ni√±o winters\nelnino_periods = [\n    (1982, 9, 1983, 3),\n    (1986, 9, 1987, 3),\n    (1991, 9, 1992, 3),\n    (1997, 9, 1998, 3),\n    (2002, 9, 2003, 3),\n    (2009, 9, 2010, 3),\n    (2015, 9, 2016, 3),\n]\n\n# Create a figure for plotting the time series\nfig = plt.figure(figsize=(10, 3))\nax = fig.add_subplot()\n\n# Plot the time series\necv_sub_mean[mean_var_name].plot(linewidth=1)\n# Add grey shading for El Ni√±o winters\nfor start_y, start_m, end_y, end_m in elnino_periods:\n    start_date = pd.Timestamp(start_y, start_m, 1)\n    end_date = pd.Timestamp(end_y, end_m, 1) + pd.offsets.MonthEnd(0)\n    ax.axvspan(start_date, end_date, color='lightgrey', alpha=0.5)\n\n\nplt.title(ecvtitle,fontsize=14, pad=20, weight='bold')        # Title of the plot\nax.grid(axis='both', linestyle='--')  # Add grid lines for better readability\nax.minorticks_on()  # Enable minor ticks on both axes\n\n# Saving the figure - make sure these commands are written before using plt.show()\n# Please note that exporting the figure as pdf might take a while as it is exported as vector graphic\n\n# To export the figure as pdf, uncomment the next line: \n#plt.savefig('Mean_ECV.pdf',bbox_inches='tight') # bbox_inches='tight' ensures no white space around the plot\n\n# To export the figure as png, uncomment the next line:\n#plt.savefig('Mean_ECV.png') \n\n\nplt.show()\n\nDepending on the ECV and region you‚Äôve chosen, the time series may reveal distinct patterns:\n\nSea Surface Temperature might show a sharp rise during El Ni√±o months, especially in the eastern Pacific.\n\nCloud Fraction could increase or decrease depending on atmospheric convection changes over oceans or continents.\n\nLand Surface Temperature often rises in some regions (e.g., Australia or Indonesia), highlighting heatwave tendencies.\n\nSoil Moisture may decrease in areas affected by El Ni√±o-induced droughts (e.g., parts of South America or Africa).\n\nLook for unusual peaks or drops during late 1997 to early 1998 ‚Äî these often correspond to the peak El Ni√±o phase. Advanced users may also explore interannual variability or compare multiple El Ni√±o events across the time series.\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#calculate-the-mean-over-the-subset","position":71},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl3":"What next?","lvl2":"Choose Your Investigation"},"type":"lvl3","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#what-next","position":72},{"hierarchy":{"lvl1":"LPS Training - Intermediate Level: Analyzing Sea Surface Temperature and El Ni√±o in a Changing Climate using ESA CCI Data","lvl3":"What next?","lvl2":"Choose Your Investigation"},"content":"When examining the climate and its effects on climate variables, it is important to consider extreme events like El Ni√±o, as well as the specific region being studied. These extreme weather patterns can often mask the underlying trends caused by climate change.\n\nTo better understand the overall trend of a variable, you can analyze larger or multiple regions, calculate averages, and explore how different variables interact with and influence one another.\n\nIf you‚Äôd like to read more on the effect of climate change on El Ni√±o, you can read the studies which are trying to shed more light on this topic.\nSome examples are:\n\nCai, W. et al. ENSO and greenhouse warming. Nature Clim Change 5, 849‚Äì859 (2015)\n\nFredriksen, H.-B. et al., How does El Ni√±o-Southern Oscillation Change Under Global Warming - A First Look at CMIP6 (2020)\n\n\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#what-next","position":73},{"hierarchy":{"lvl1":"Advanced data analysis"},"type":"lvl1","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#advanced-data-analysis","position":74},{"hierarchy":{"lvl1":"Advanced data analysis"},"content":"\n\nIf you are interested in using the data e.g. for publications or create through analysis, you need to understand how the data is produced and take into account the uncertainties of the data quality before interpreting them.\n\nIn a seperate notebook, we are looking into the uncertainties of the cloud data, how to visualise it and how to interpret it.\n\nYou can find the Jupyter notebook in this Github folder: \n\nLPS‚Äã_cloud‚Äã_uncertainties‚Äã.ipynb\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lps-vienna-06-2025/lps-intermediate-level-elnino#advanced-data-analysis","position":75},{"hierarchy":{"lvl1":"Analyzing Land Surface Temperature and Uncertainties: Insights from ESA CCI Data"},"type":"lvl1","url":"/external-notebooks/esa-cci/ect-training/lst-leicester-12-2024/lst-training","position":0},{"hierarchy":{"lvl1":"Analyzing Land Surface Temperature and Uncertainties: Insights from ESA CCI Data"},"content":"This notebook guides you through analyzing Land Surface Temperature (LST) data from the ESA Climate Change Initiative (CCI) to study urban heat islands, focusing on the Leicestershire region. We‚Äôll use LST data alongside land cover information to identify temperature differences between urban and non-urban areas. Additionally, we‚Äôll discuss uncertainties associated with LST data products.\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lst-leicester-12-2024/lst-training","position":1},{"hierarchy":{"lvl1":"Analyzing Land Surface Temperature and Uncertainties: Insights from ESA CCI Data","lvl3":"Objectives"},"type":"lvl3","url":"/external-notebooks/esa-cci/ect-training/lst-leicester-12-2024/lst-training#objectives","position":2},{"hierarchy":{"lvl1":"Analyzing Land Surface Temperature and Uncertainties: Insights from ESA CCI Data","lvl3":"Objectives"},"content":"Access and visualize LST data for Leicestershire using the ESA CCI toolbox.\n\nAnalyze urban heat islands in Leicestershire by comparing urban and non-urban areas.\n\nExplore uncertainties in LST data and interpret quality flags.\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lst-leicester-12-2024/lst-training#objectives","position":3},{"hierarchy":{"lvl1":"Analyzing Land Surface Temperature and Uncertainties: Insights from ESA CCI Data","lvl4":"Add imports","lvl3":"Objectives"},"type":"lvl4","url":"/external-notebooks/esa-cci/ect-training/lst-leicester-12-2024/lst-training#add-imports","position":4},{"hierarchy":{"lvl1":"Analyzing Land Surface Temperature and Uncertainties: Insights from ESA CCI Data","lvl4":"Add imports","lvl3":"Objectives"},"content":"To run this Notebook, make sure the ESA CCI Toolbox is setup correctly.\n\nfrom xcube.core.store import new_data_store\nimport IPython.display\nimport shapely.geometry\nimport matplotlib.pyplot as plt\nfrom esa_climate_toolbox.core import get_store\nfrom esa_climate_toolbox.core import get_op\nfrom esa_climate_toolbox.core import list_ecv_datasets\nfrom esa_climate_toolbox.core import list_datasets\nfrom esa_climate_toolbox.ops import downsample_2d\nfrom esa_climate_toolbox.ops import coregister\nimport matplotlib\nimport numpy as np\nimport xarray as xr\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lst-leicester-12-2024/lst-training#add-imports","position":5},{"hierarchy":{"lvl1":"Analyzing Land Surface Temperature and Uncertainties: Insights from ESA CCI Data","lvl2":"1. Access and visualize LST data"},"type":"lvl2","url":"/external-notebooks/esa-cci/ect-training/lst-leicester-12-2024/lst-training#id-1-access-and-visualize-lst-data","position":6},{"hierarchy":{"lvl1":"Analyzing Land Surface Temperature and Uncertainties: Insights from ESA CCI Data","lvl2":"1. Access and visualize LST data"},"content":"In this section, we explore how to access Land Surface Temperature (LST) data from the ESA Climate Change Initiative (CCI) data store. This includes identifying datasets of interest, understanding their metadata, and preparing for subsequent analysis.\n\nThe ESA CCI provides high-quality, harmonized climate data records that are essential for monitoring and understanding climate variability and trends. These datasets are generated using consistent algorithms across space and time, ensuring their reliability for climate research and applications.\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lst-leicester-12-2024/lst-training#id-1-access-and-visualize-lst-data","position":7},{"hierarchy":{"lvl1":"Analyzing Land Surface Temperature and Uncertainties: Insights from ESA CCI Data","lvl4":"Filter and Select LST Data","lvl2":"1. Access and visualize LST data"},"type":"lvl4","url":"/external-notebooks/esa-cci/ect-training/lst-leicester-12-2024/lst-training#filter-and-select-lst-data","position":8},{"hierarchy":{"lvl1":"Analyzing Land Surface Temperature and Uncertainties: Insights from ESA CCI Data","lvl4":"Filter and Select LST Data","lvl2":"1. Access and visualize LST data"},"content":"Identify LST datasets based on spatial and temporal requirements. The list_ecv_datasets command returns the names of datasets for a given essential climate variable.\n\nlist_ecv_datasets(\"LST\")\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lst-leicester-12-2024/lst-training#filter-and-select-lst-data","position":9},{"hierarchy":{"lvl1":"Analyzing Land Surface Temperature and Uncertainties: Insights from ESA CCI Data","lvl4":"zarr & kerchunk & NetCDF format","lvl2":"1. Access and visualize LST data"},"type":"lvl4","url":"/external-notebooks/esa-cci/ect-training/lst-leicester-12-2024/lst-training#zarr-kerchunk-netcdf-format","position":10},{"hierarchy":{"lvl1":"Analyzing Land Surface Temperature and Uncertainties: Insights from ESA CCI Data","lvl4":"zarr & kerchunk & NetCDF format","lvl2":"1. Access and visualize LST data"},"content":"For this workshop it might be a good idea to use LST data in zarr or kerchunk format, as data loading will be much faster.\nSeveral CCI data records are available in these formats as they have some advantages.\nZarr is ideal for new datasets that will be frequently accessed, updated, or analyzed and it is suitable for large-scale distributed processing in cloud-native workflows.\nKerchunk is best for efficiently accessing legacy data formats (e.g., NetCDF, GRIB) stored in object stores without converting them and useful when data duplication must be avoided.\nNetCDF, while widely used and highly compatible with scientific tools, is less optimized for cloud-native workflows and accessing large datasets efficiently, making it better suited for smaller-scale, traditional file-based analysis.\n\nFeature\n\nZarr\n\nKerchunk\n\nNetCDF\n\nStorage Format\n\nSelf-contained, new format\n\nWrapper for existing formats\n\nTraditional file-based format\n\nCloud-Native\n\nYes\n\nYes\n\nNo\n\nEfficiency\n\nGood for accessing subsets\n\nGreat for legacy data in object stores\n\nEfficient for small to medium files\n\nCompression\n\nSupports multiple algorithms\n\nDepends on underlying format\n\nLimited to format-specific methods\n\nMetadata Handling\n\nEmbedded metadata\n\nExternal JSON index\n\nEmbedded in file\n\nRead/Write Access\n\nSupports both\n\nRead-only\n\nRead and write\n\nSetup Overhead\n\nNone, works out of the box\n\nRequires pre-generated JSON indices\n\nNone, but slower for large datasets\n\nStorage Duplication\n\nRequires duplicating data\n\nMinimal, uses existing files\n\nMinimal, as data is stored in single files\n\nPerformance\n\nOptimized for chunk-based access\n\nSlight overhead for index lookup\n\nCan be slow for very large files\n\nlist_datasets(\"esa-cci-zarr\")\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lst-leicester-12-2024/lst-training#zarr-kerchunk-netcdf-format","position":11},{"hierarchy":{"lvl1":"Analyzing Land Surface Temperature and Uncertainties: Insights from ESA CCI Data","lvl4":"Defining the Region of Interest (Leicestershire)","lvl2":"1. Access and visualize LST data"},"type":"lvl4","url":"/external-notebooks/esa-cci/ect-training/lst-leicester-12-2024/lst-training#defining-the-region-of-interest-leicestershire","position":12},{"hierarchy":{"lvl1":"Analyzing Land Surface Temperature and Uncertainties: Insights from ESA CCI Data","lvl4":"Defining the Region of Interest (Leicestershire)","lvl2":"1. Access and visualize LST data"},"content":"In this section, we define the bounding box for the Leicestershire region to extract a dataset sample covering both urban and non-urban areas. This will help to analyze temperature variations between these areas. In addition, the data size to download will be much smaller.\n\n# Set bounding box for Leicestershire\nlon_min, lon_max = -1.5, -0.5\nlat_min, lat_max = 52.5, 53.5\n\nbbox = (lon_min, lat_min, lon_max, lat_max)\n\n# Display bounding box for reference\nIPython.display.GeoJSON(shapely.geometry.box(*bbox).__geo_interface__)\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lst-leicester-12-2024/lst-training#defining-the-region-of-interest-leicestershire","position":13},{"hierarchy":{"lvl1":"Analyzing Land Surface Temperature and Uncertainties: Insights from ESA CCI Data","lvl4":"LST data basing on polar-orbiting satellites","lvl2":"1. Access and visualize LST data"},"type":"lvl4","url":"/external-notebooks/esa-cci/ect-training/lst-leicester-12-2024/lst-training#lst-data-basing-on-polar-orbiting-satellites","position":14},{"hierarchy":{"lvl1":"Analyzing Land Surface Temperature and Uncertainties: Insights from ESA CCI Data","lvl4":"LST data basing on polar-orbiting satellites","lvl2":"1. Access and visualize LST data"},"content":"For this example, we will have a look at monthly LST for the years 2011 to 2020, which is available in the zarr data store:\n‚ÄòESACCI-LST-L3S-LST-IRCDR_-0.01deg_1MONTHLY_DAY-1995-2020-fv3.00.zarr‚Äô\n\nThis dataset provides monthly-averaged land surface temperatures (LSTs) and uncertainty estimates from multiple polar-orbiting satellites, spanning August 1995 to December 2020, with coverage on a 0.01¬∞ global grid. LSTs, derived from instruments such as ATSR-2, AATSR, MODIS Terra, and SLSTR, are adjusted for inter-instrument biases and provide separate daytime (used in this example) and nighttime temperatures along with observation geometry, land cover, and quality flags. Produced by the University of Leicester as part of the ESA Land Surface Temperature Climate Change Initiative, the dataset meets GCOS standards and supports studies of surface heat and water fluxes.\n\ncci_zarr_store = get_store(\"esa-cci-zarr\")\nlst_ds = cci_zarr_store.open_data(\n    'ESACCI-LST-L3S-LST-IRCDR_-0.01deg_1MONTHLY_DAY-1995-2020-fv3.00.zarr'\n)\nlst_ds\n\nNow get a spatial and temporal subset. This reduces the data size and speeds up calculations.\n\nsubset_spatial_op = get_op('subset_spatial')\nlst_ds_sub = subset_spatial_op(ds=lst_ds, region=bbox)\n\nsubset_temporal_op = get_op('subset_temporal')\nlst_ds_sub = subset_temporal_op(ds=lst_ds_sub, time_range=['2011-01-01', '2020-12-01'])\nlst_ds_sub  # use this to have a quick look into the metadata\n\nTo get an impression of the mean LST in that region, we calculate the mean of the data and make a simple plot. The climatology operation of the CCI Toolbox creates a ‚Äòmean over years‚Äô dataset by averaging the values of the given input dataset over all years. The output is a climatological dataset with the same resolution as the input dataset, in this example a monthly climatology.\n\nclimatology_op = get_op('climatology')\nlst_ds_clim = climatology_op(ds=lst_ds_sub)\n# lst_ds_clim  # use this to have a quick look into the metadata\n\n# The warning is informing you that the code is handling np.datetime64 objects without explicit timezone information. \n# This is typically not a problem for operations that do not require timezone awareness, such as climatology calculations, \n# but it might lead to unexpected behavior if timezone handling is critical for your workflow.\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lst-leicester-12-2024/lst-training#lst-data-basing-on-polar-orbiting-satellites","position":15},{"hierarchy":{"lvl1":"Analyzing Land Surface Temperature and Uncertainties: Insights from ESA CCI Data","lvl4":"Let‚Äôs plot the climatology data","lvl2":"1. Access and visualize LST data"},"type":"lvl4","url":"/external-notebooks/esa-cci/ect-training/lst-leicester-12-2024/lst-training#lets-plot-the-climatology-data","position":16},{"hierarchy":{"lvl1":"Analyzing Land Surface Temperature and Uncertainties: Insights from ESA CCI Data","lvl4":"Let‚Äôs plot the climatology data","lvl2":"1. Access and visualize LST data"},"content":"Plotting LST Data: The code uses the plot_op operation to create a plot of mean Land Surface Temperature (LST) for a specific date (2011-06-01 represents the mean for June 2011 to 2020) from the dataset lst_ds_clim, applying a color map (‚Äòviridis‚Äô) and adding a title for context.\n\nAdding Geographical Markers: The plot highlights specific locations, Leicester and Nottingham, by overlaying markers (o) with dashed lines at their respective latitude and longitude coordinates.\n\nCustomizing the Plot: Legends are added to label the geographical markers, enhancing the plot‚Äôs interpretability for spatial analysis.\n\nplot_op = get_op('plot')\n# Create a plot of the LST data\n%matplotlib inline \n\nplot_op(\n    ds=lst_ds_clim,  # Dataset variable\n    var='lst',       # Variable you want to plot\n    indexers={'time': '2011-06-01'},  # Specify the date\n    title=\"Mean Land Surface Temperature June 2011 to 2020\",\n    properties=\"cmap='viridis'\",  # Pass other properties here, such as color\n)\n\n# Add Leicester to the plot\nleicester_lat, leicester_lon = 52.6369, -1.1398\nplt.plot(leicester_lon, leicester_lat, linestyle='--', marker='o', color='r', label='Leicester')\nplt.legend()\n\n# Add Nottingham to the plot\nnottingham_lat, nottingham_lon = 52.9536, -1.1569\nplt.plot(nottingham_lon, nottingham_lat, linestyle='--', marker='o', color='m', label='Nottingham')\nplt.legend()\n\n\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lst-leicester-12-2024/lst-training#lets-plot-the-climatology-data","position":17},{"hierarchy":{"lvl1":"Analyzing Land Surface Temperature and Uncertainties: Insights from ESA CCI Data","lvl2":"2. Analyze urban heat islands"},"type":"lvl2","url":"/external-notebooks/esa-cci/ect-training/lst-leicester-12-2024/lst-training#id-2-analyze-urban-heat-islands","position":18},{"hierarchy":{"lvl1":"Analyzing Land Surface Temperature and Uncertainties: Insights from ESA CCI Data","lvl2":"2. Analyze urban heat islands"},"content":"Urban areas often exhibit higher temperatures compared to their surrounding non-urban regions, a phenomenon known as the Urban Heat Island (UHI) effect. This section focuses on quantifying and visualizing this effect using Land Surface Temperature (LST) data from the ESA CCI dataset. By comparing LST values in urban and non-urban pixels, we can identify temperature differences and analyze their spatial patterns over time. This analysis is particularly relevant for understanding the impacts of urbanization on local climates and informing sustainable urban planning.\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lst-leicester-12-2024/lst-training#id-2-analyze-urban-heat-islands","position":19},{"hierarchy":{"lvl1":"Analyzing Land Surface Temperature and Uncertainties: Insights from ESA CCI Data","lvl4":"Land Cover (LC) data","lvl2":"2. Analyze urban heat islands"},"type":"lvl4","url":"/external-notebooks/esa-cci/ect-training/lst-leicester-12-2024/lst-training#land-cover-lc-data","position":20},{"hierarchy":{"lvl1":"Analyzing Land Surface Temperature and Uncertainties: Insights from ESA CCI Data","lvl4":"Land Cover (LC) data","lvl2":"2. Analyze urban heat islands"},"content":"For this step, we will use LC data for the same region. The ESA Land Cover CCI provides annual global land cover maps at 300m spatial resolution, covering the period from 1992 to 2015. Each pixel represents a land cover class based on the UN Land Cover Classification System (LCCS), accompanied by quality flags that document the classification reliability. These data offer a valuable resource for studying land cover dynamics and their role in climate systems.\n\nlc_ds = cci_zarr_store.open_data(\n    'ESACCI-LC-L4-LCCS-Map-300m-P1Y-1992-2015-v2.0.7b.zarr'\n)\nlc_ds\n\nlc_ds_sub = subset_temporal_op(ds=lc_ds, time_range=['2015-07-03', '2015-07-03'])\n\nselect_var_op = get_op('select_var')\nlc_ds_sub = select_var_op(ds=lc_ds_sub, var=\"lccs_class\")\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lst-leicester-12-2024/lst-training#land-cover-lc-data","position":21},{"hierarchy":{"lvl1":"Analyzing Land Surface Temperature and Uncertainties: Insights from ESA CCI Data","lvl4":"Downsample LC data to match the grid resolution of LST data","lvl2":"2. Analyze urban heat islands"},"type":"lvl4","url":"/external-notebooks/esa-cci/ect-training/lst-leicester-12-2024/lst-training#downsample-lc-data-to-match-the-grid-resolution-of-lst-data","position":22},{"hierarchy":{"lvl1":"Analyzing Land Surface Temperature and Uncertainties: Insights from ESA CCI Data","lvl4":"Downsample LC data to match the grid resolution of LST data","lvl2":"2. Analyze urban heat islands"},"content":"This code snippet first normalizes the land cover dataset (lc_ds_sub) to standardize its values using the normalize_op operation. It then coregisters the normalized land cover dataset (lc_ds_sub) with the land surface temperature dataset (lst_ds_sub) using the coregister_op operation, aligning their spatial grids and downsampling the land cover data to match the LST grid using the ‚Äúmode‚Äù method for categorical data.\n\nResampling categorical data presents a challenge because traditional statistical methods like averaging are not suitable. Instead, mode-based aggregation must be used to preserve the integrity of categorical classifications, ensuring that the dominant class in each new grid cell accurately reflects the underlying data.\n\nnormalize_op = get_op('normalize')\n\nlc_ds_sub = normalize_op(ds=lc_ds_sub)\n\ncoregister_op = get_op('coregister')\n\ndownsampled_lc = coregister_op(\n    ds_primary=lst_ds_sub,\n    ds_replica=lc_ds_sub,\n    method_ds=\"mode\"\n)\ndownsampled_lc\n\nPlotting the resulting LC field. You can have a look into the metadata of the lccs_class variable to get the meaning of each land cover flag.\n\n# Create a colormap for land cover categories (e.g., forest, urban, water)\n\nplot_op(\n    ds=downsampled_lc,           # Dataset variable (should be xarray.Dataset or DataArray)\n    var='lccs_class',            # Variable name\n    title=\"Downsampled Land Cover Map\",\n    properties=\"cmap='tab20'\"    # Choose a colormap suitable for categorical data\n)\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lst-leicester-12-2024/lst-training#downsample-lc-data-to-match-the-grid-resolution-of-lst-data","position":23},{"hierarchy":{"lvl1":"Analyzing Land Surface Temperature and Uncertainties: Insights from ESA CCI Data","lvl4":"Identify urban and non-urban grid points","lvl2":"2. Analyze urban heat islands"},"type":"lvl4","url":"/external-notebooks/esa-cci/ect-training/lst-leicester-12-2024/lst-training#identify-urban-and-non-urban-grid-points","position":24},{"hierarchy":{"lvl1":"Analyzing Land Surface Temperature and Uncertainties: Insights from ESA CCI Data","lvl4":"Identify urban and non-urban grid points","lvl2":"2. Analyze urban heat islands"},"content":"Information on the flag for urban grid points is stored in the meta data for the variable lccs_class of the LC data. To check if the masks for urban and non-urban grid points look reasonable, we plot both fields.\n\n# Urban flag value based on the land cover data\nurban_flag = 190\n\n# Apply the threshold to create the urban mask\nurban_mask = downsampled_lc['lccs_class'] >= urban_flag  # Boolean mask for urban points\nurban_mask_da = urban_mask.astype(int).to_dataset(name=\"urban_mask\")  # Convert to dataset with int values\n\n# Plot the urban mask\nplot_op(\n    ds=urban_mask_da,          # Dataset variable\n    var='urban_mask',          # Variable name\n    title=\"Urban Mask\",\n    properties=\"cmap='Greys'\"  # Use a greyscale colormap\n)\n\n# Apply the threshold to create the non-urban mask\nnon_urban_mask = ~urban_mask  # Invert the urban mask\nnon_urban_mask_da = non_urban_mask.astype(int).to_dataset(name=\"non_urban_mask\")  # Convert to dataset with int values\n\n# Plot the non-urban mask\nplot_op(\n    ds=non_urban_mask_da,      # Dataset variable\n    var='non_urban_mask',      # Variable name\n    title=\"Non-Urban Mask\",\n    properties=\"cmap='Greys'\"  # Use a greyscale colormap\n)\n\n\nNow we apply this mask to the data.\n\n# Extract the LST variable as an xarray.DataArray\nlst_data_array = lst_ds_clim['lst']  # Replace 'lst' with the correct variable name\n\n# Flip the urban_mask along the latitude axis\nurban_mask_flipped = np.flipud(urban_mask)  # Flip along the vertical axis\n\n# Apply the flipped mask to the LST data\nurban_lst = xr.where(urban_mask_flipped, lst_data_array, np.nan)\nnon_urban_lst = xr.where(~urban_mask_flipped, lst_data_array, np.nan)\n\n# Plot an example time step\ntime_step = lst_data_array.time[5]  # Choose the sixth time step for June\nplt.figure(figsize=(12, 6))\n\n# Plot Urban LST\nplt.subplot(1, 2, 1)\nurban_lst.sel(time=time_step).plot(cmap=\"viridis\")\nplt.title(f\"Urban LST at {time_step.values}\")\n\n# Plot Non-Urban LST\nplt.subplot(1, 2, 2)\nnon_urban_lst.sel(time=time_step).plot(cmap=\"viridis\")\nplt.title(f\"Non-Urban LST at {time_step.values}\")\n\nplt.tight_layout()\nplt.show()\n\n\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lst-leicester-12-2024/lst-training#identify-urban-and-non-urban-grid-points","position":25},{"hierarchy":{"lvl1":"Analyzing Land Surface Temperature and Uncertainties: Insights from ESA CCI Data","lvl4":"Compare urban and non-urban grid points","lvl2":"2. Analyze urban heat islands"},"type":"lvl4","url":"/external-notebooks/esa-cci/ect-training/lst-leicester-12-2024/lst-training#compare-urban-and-non-urban-grid-points","position":26},{"hierarchy":{"lvl1":"Analyzing Land Surface Temperature and Uncertainties: Insights from ESA CCI Data","lvl4":"Compare urban and non-urban grid points","lvl2":"2. Analyze urban heat islands"},"content":"When comparing urban and non-urban mean LST time series, keep in mind that the differing number of grid points can bias results. Urban areas often cover fewer, geographically clustered points, while non-urban areas span diverse climates, potentially skewing averages. Thus, we should consider including uncertainty bounds, noting the grid point counts, and normalizing results to improve comparability.\n\n# Compute the mean LST for urban and non-urban pixels over time\nurban_mean = urban_lst.mean(dim=[\"lat\", \"lon\"])\nnon_urban_mean = non_urban_lst.mean(dim=[\"lat\", \"lon\"])\n\n# Plot the time series\nplt.figure(figsize=(10, 6))\nurban_mean.plot(label=\"Urban\")\nnon_urban_mean.plot(label=\"Non-Urban\")\nplt.title(\"Mean LST Over Time\")\nplt.ylabel(\"LST (K)\")\nplt.xlabel(\"Time\")\nplt.legend()\nplt.show()\n\n# Compute the number of grid points explicitly\nurban_count = urban_mask.sum().compute()  # Trigger computation for the Dask array\nnon_urban_count = non_urban_mask.sum().compute()\n\n# Print the results\nprint(f\"Number of Urban Grid Points: {urban_count.values}\")\nprint(f\"Number of Non-Urban Grid Points: {non_urban_count.values}\")\n\nnormalized_urban_mean = urban_mean / urban_count\nnormalized_non_urban_mean = non_urban_mean / non_urban_count\n\n# Plot the normalized time series\nplt.figure(figsize=(10, 6))\nnormalized_urban_mean.plot(label=\"Urban normalized\")\nnormalized_non_urban_mean.plot(label=\"Non-Urban normalized\")\nplt.title(\"Normalized LST Over Time\")\nplt.ylabel(\"normalized LST\")\nplt.xlabel(\"Time\")\nplt.legend()\nplt.show()\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lst-leicester-12-2024/lst-training#compare-urban-and-non-urban-grid-points","position":27},{"hierarchy":{"lvl1":"Analyzing Land Surface Temperature and Uncertainties: Insights from ESA CCI Data","lvl2":"3. Explore uncertainties"},"type":"lvl2","url":"/external-notebooks/esa-cci/ect-training/lst-leicester-12-2024/lst-training#id-3-explore-uncertainties","position":28},{"hierarchy":{"lvl1":"Analyzing Land Surface Temperature and Uncertainties: Insights from ESA CCI Data","lvl2":"3. Explore uncertainties"},"content":"","type":"content","url":"/external-notebooks/esa-cci/ect-training/lst-leicester-12-2024/lst-training#id-3-explore-uncertainties","position":29},{"hierarchy":{"lvl1":"Analyzing Land Surface Temperature and Uncertainties: Insights from ESA CCI Data","lvl4":"Discussion on Uncertainties in LST Data","lvl2":"3. Explore uncertainties"},"type":"lvl4","url":"/external-notebooks/esa-cci/ect-training/lst-leicester-12-2024/lst-training#discussion-on-uncertainties-in-lst-data","position":30},{"hierarchy":{"lvl1":"Analyzing Land Surface Temperature and Uncertainties: Insights from ESA CCI Data","lvl4":"Discussion on Uncertainties in LST Data","lvl2":"3. Explore uncertainties"},"content":"Land Surface Temperature (LST) data from the ESA CCI include detailed uncertainty estimates to account for the challenges of measuring surface temperatures from space. These uncertainties arise from factors such as sensor differences, atmospheric corrections, and surface characteristics, all of which can impact data quality. In this section, we explore the different sources of uncertainty, visualize their spatial and temporal distributions, and discuss how they contribute to the total uncertainty provided with the LST products. Understanding these uncertainties is essential for interpreting the data and ensuring confidence in its applications.\n\nLet‚Äôs use as an example the LST data for one random year.\n\nlst_example = subset_temporal_op(ds=lst_ds_sub, time_range=['2011-01-01', '2011-12-01'])\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lst-leicester-12-2024/lst-training#discussion-on-uncertainties-in-lst-data","position":31},{"hierarchy":{"lvl1":"Analyzing Land Surface Temperature and Uncertainties: Insights from ESA CCI Data","lvl4":"Step 1: Visualize Total Uncertainty","lvl2":"3. Explore uncertainties"},"type":"lvl4","url":"/external-notebooks/esa-cci/ect-training/lst-leicester-12-2024/lst-training#step-1-visualize-total-uncertainty","position":32},{"hierarchy":{"lvl1":"Analyzing Land Surface Temperature and Uncertainties: Insights from ESA CCI Data","lvl4":"Step 1: Visualize Total Uncertainty","lvl2":"3. Explore uncertainties"},"content":"The total uncertainty in the CCI LST data represents the overall error estimate associated with each LST measurement. It combines contributions from multiple sources of uncertainty, including:\n\nRandom Errors:\n\nNoise in the sensor measurements and other uncorrelated sources of error.\n\nLocally Correlated Errors:\n\nErrors linked to specific spatial and temporal conditions, such as:\n\nAtmospheric Scale Errors: Uncertainty from atmospheric corrections.\n\nSurface Scale Errors: Uncertainty due to surface emissivity and heterogeneity.\n\nLST Correction Errors: Errors introduced during LST algorithm corrections.\n\nSystematic Errors:\n\nLarger-scale, persistent biases across the dataset, such as calibration differences between sensors or long-term trends in instrument performance.\n\nBy aggregating these components, the total uncertainty provides a comprehensive error estimate for each pixel, helping users to assess the reliability of the data for their specific applications.\n\n# Extract the total uncertainty variable\ntotal_uncertainty = lst_example['lst_uncertainty']  # That's the total uncertainty\n\n# Plot total uncertainty for a specific time step\ntime_step = total_uncertainty.time[5]  # Choose the sixth time step for June\nplt.figure(figsize=(8, 6))\ntotal_uncertainty.sel(time=time_step).plot(cmap=\"viridis\")  # Xarray handles the colorbar\nplt.title(f\"Total LST Uncertainty at {time_step.values}\")\nplt.show()\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lst-leicester-12-2024/lst-training#step-1-visualize-total-uncertainty","position":33},{"hierarchy":{"lvl1":"Analyzing Land Surface Temperature and Uncertainties: Insights from ESA CCI Data","lvl4":"Step 2: Compare Uncertainty Components","lvl2":"3. Explore uncertainties"},"type":"lvl4","url":"/external-notebooks/esa-cci/ect-training/lst-leicester-12-2024/lst-training#step-2-compare-uncertainty-components","position":34},{"hierarchy":{"lvl1":"Analyzing Land Surface Temperature and Uncertainties: Insights from ESA CCI Data","lvl4":"Step 2: Compare Uncertainty Components","lvl2":"3. Explore uncertainties"},"content":"To better understand the sources of uncertainty in the LST data, we visualize the spatial distribution of each component:\n\nAtmospheric Errors\n\nLST Correction Errors\n\nSurface Errors\n\nRandom Errors\n\n# Extract individual uncertainty components\nunc_loc_atm = lst_example['lst_unc_loc_atm']\nunc_loc_cor = lst_example['lst_unc_loc_cor']\nunc_loc_sfc = lst_example['lst_unc_loc_sfc']\nunc_ran = lst_example['lst_unc_ran']\n\n# Plot individual components for a specific time step\nfig, axs = plt.subplots(2, 2, figsize=(12, 10))\ncomponents = [unc_loc_atm, unc_loc_cor, unc_loc_sfc, unc_ran]\ntitles = [\n    \"Atmospheric Uncertainty (loc_atm)\",\n    \"LST Corrections Uncertainty (loc_cor)\",\n    \"Surface Uncertainty (loc_sfc)\",\n    \"Random Uncertainty (ran)\"\n]\n\nfor ax, comp, title in zip(axs.flat, components, titles):\n    comp.sel(time=time_step).plot(ax=ax, cmap=\"coolwarm\")\n    ax.set_title(title)\n\nplt.suptitle(f\"LST Uncertainty Components at {time_step.values}\")\nplt.tight_layout()\nplt.show()\n\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lst-leicester-12-2024/lst-training#step-2-compare-uncertainty-components","position":35},{"hierarchy":{"lvl1":"Analyzing Land Surface Temperature and Uncertainties: Insights from ESA CCI Data","lvl4":"Step 3: Contribution to Total Uncertainty","lvl2":"3. Explore uncertainties"},"type":"lvl4","url":"/external-notebooks/esa-cci/ect-training/lst-leicester-12-2024/lst-training#step-3-contribution-to-total-uncertainty","position":36},{"hierarchy":{"lvl1":"Analyzing Land Surface Temperature and Uncertainties: Insights from ESA CCI Data","lvl4":"Step 3: Contribution to Total Uncertainty","lvl2":"3. Explore uncertainties"},"content":"Let‚Äôs have a look at the contribution of each uncertainty component to the total uncertainty.\n\n# Compute mean uncertainty components over the region and time\nmean_unc_loc_atm = unc_loc_atm.mean(dim=[\"lat\", \"lon\"]).sel(time=time_step)\nmean_unc_loc_cor = unc_loc_cor.mean(dim=[\"lat\", \"lon\"]).sel(time=time_step)\nmean_unc_loc_sfc = unc_loc_sfc.mean(dim=[\"lat\", \"lon\"]).sel(time=time_step)\nmean_unc_ran = unc_ran.mean(dim=[\"lat\", \"lon\"]).sel(time=time_step)\nmean_total_unc = total_uncertainty.mean(dim=[\"lat\", \"lon\"]).sel(time=time_step)\n\n# Plot the contributions\ncontributions = [\n    mean_unc_loc_atm, mean_unc_loc_cor, mean_unc_loc_sfc, mean_unc_ran\n]\nlabels = [\"Loc Atm\", \"Loc Cor\", \"Loc Sfc\", \"Random\"]\n\nplt.figure(figsize=(8, 6))\nsome_colors = [\"#2a9d8f\", \"#264653\", \"#e9c46a\", \"#e76f51\"]\nplt.bar(labels, [c.values for c in contributions], color=some_colors)\nplt.axhline(y=mean_total_unc.values, color=\"black\", linestyle=\"--\", label=\"Total\")\nplt.title(f\"Contribution of Uncertainty Components at {time_step.values}\")\nplt.ylabel(\"Mean Uncertainty (K)\")\nplt.legend()\nplt.show()\n\n\nRandom errors contribute the most to the total uncertainty in LST data because they arise from sensor noise, atmospheric variability, and surface heterogeneity, which are inherently unpredictable and uncorrelated across space and time. These errors are amplified in challenging conditions, such as areas with variable cloud cover, complex terrain, or mixed land cover types, where accurate retrieval of surface temperatures becomes more difficult. Additionally, the high-resolution nature of the data means more detailed measurements, which can increase the influence of random fluctuations compared to systematic or locally correlated errors.\n\n","type":"content","url":"/external-notebooks/esa-cci/ect-training/lst-leicester-12-2024/lst-training#step-3-contribution-to-total-uncertainty","position":37},{"hierarchy":{"lvl1":"Analyzing Land Surface Temperature and Uncertainties: Insights from ESA CCI Data","lvl4":"Step 4: Temporal Trends in Uncertainties","lvl2":"3. Explore uncertainties"},"type":"lvl4","url":"/external-notebooks/esa-cci/ect-training/lst-leicester-12-2024/lst-training#step-4-temporal-trends-in-uncertainties","position":38},{"hierarchy":{"lvl1":"Analyzing Land Surface Temperature and Uncertainties: Insights from ESA CCI Data","lvl4":"Step 4: Temporal Trends in Uncertainties","lvl2":"3. Explore uncertainties"},"content":"Here, we aim to identify how different sources of uncertainty in LST data vary over time. By examining temporal patterns, we hope to:\n\nDetect seasonal trends, such as higher uncertainties during periods of increased cloud cover or surface variability.\n\nAssess whether uncertainties remain stable over the dataset‚Äôs time span or change due to factors like sensor transitions or calibration updates.\n\nUnderstand how each component contributes to the total uncertainty across different periods, which can provide insights into the consistency and reliability of the LST dataset for long-term climate studies.\n\n# Compute mean uncertainty components over time\nmean_unc_loc_atm_time = unc_loc_atm.mean(dim=[\"lat\", \"lon\"]).dropna(dim=\"time\")\nmean_unc_loc_cor_time = unc_loc_cor.mean(dim=[\"lat\", \"lon\"]).dropna(dim=\"time\")\nmean_unc_loc_sfc_time = unc_loc_sfc.mean(dim=[\"lat\", \"lon\"]).dropna(dim=\"time\")\nmean_unc_ran_time = unc_ran.mean(dim=[\"lat\", \"lon\"]).dropna(dim=\"time\")\nmean_total_unc_time = total_uncertainty.mean(dim=[\"lat\", \"lon\"]).dropna(dim=\"time\")\n\n# Plot the time series\nplt.figure(figsize=(10, 6))\nmean_unc_loc_atm_time.plot(label=\"Loc Atm\")\nmean_unc_loc_cor_time.plot(label=\"Loc Cor\")\nmean_unc_loc_sfc_time.plot(label=\"Loc Sfc\")\nmean_unc_ran_time.plot(label=\"Random\")\nmean_total_unc_time.plot(label=\"Total\", linestyle=\"--\", color=\"black\")\nplt.title(\"Temporal Variation of LST Uncertainty Components\")\nplt.ylabel(\"Mean Uncertainty (K)\")\nplt.xlabel(\"Time\")\nplt.legend()\nplt.show()","type":"content","url":"/external-notebooks/esa-cci/ect-training/lst-leicester-12-2024/lst-training#step-4-temporal-trends-in-uncertainties","position":39}]}